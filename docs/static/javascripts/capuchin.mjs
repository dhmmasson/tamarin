/*! For license information please see capuchin.mjs.LICENSE.txt */
(()=>{var t={809:function(t,e){var i,s;i=function t(){"use strict";var e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},i=!e.document&&!!e.postMessage,s=i&&/blob:/i.test((e.location||{}).protocol),n={},r=0,o={parse:function(i,s){var a=(s=s||{}).dynamicTyping||!1;if(b(a)&&(s.dynamicTypingFunction=a,a={}),s.dynamicTyping=a,s.transform=!!b(s.transform)&&s.transform,s.worker&&o.WORKERS_SUPPORTED){var l=function(){if(!o.WORKERS_SUPPORTED)return!1;var i,s,a=(i=e.URL||e.webkitURL||null,s=t.toString(),o.BLOB_URL||(o.BLOB_URL=i.createObjectURL(new Blob(["(",s,")();"],{type:"text/javascript"})))),l=new e.Worker(a);return l.onmessage=g,l.id=r++,n[l.id]=l}();return l.userStep=s.step,l.userChunk=s.chunk,l.userComplete=s.complete,l.userError=s.error,s.step=b(s.step),s.chunk=b(s.chunk),s.complete=b(s.complete),s.error=b(s.error),delete s.worker,void l.postMessage({input:i,config:s,workerId:l.id})}var p=null;return o.NODE_STREAM_INPUT,"string"==typeof i?p=s.download?new h(s):new d(s):!0===i.readable&&b(i.read)&&b(i.on)?p=new u(s):(e.File&&i instanceof File||i instanceof Object)&&(p=new c(s)),p.stream(i)},unparse:function(t,e){var i=!1,s=!0,n=",",r="\r\n",a='"',l=a+a,h=!1,c=null,d=!1;!function(){if("object"==typeof e){if("string"!=typeof e.delimiter||o.BAD_DELIMITERS.filter((function(t){return-1!==e.delimiter.indexOf(t)})).length||(n=e.delimiter),("boolean"==typeof e.quotes||"function"==typeof e.quotes||Array.isArray(e.quotes))&&(i=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(h=e.skipEmptyLines),"string"==typeof e.newline&&(r=e.newline),"string"==typeof e.quoteChar&&(a=e.quoteChar),"boolean"==typeof e.header&&(s=e.header),Array.isArray(e.columns)){if(0===e.columns.length)throw new Error("Option columns is empty");c=e.columns}void 0!==e.escapeChar&&(l=e.escapeChar+a),("boolean"==typeof e.escapeFormulae||e.escapeFormulae instanceof RegExp)&&(d=e.escapeFormulae instanceof RegExp?e.escapeFormulae:/^[=+\-@\t\r].*$/)}}();var u=new RegExp(m(a),"g");if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return p(null,t,h);if("object"==typeof t[0])return p(c||Object.keys(t[0]),t,h)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||c),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:"object"==typeof t.data[0]?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),p(t.fields||[],t.data||[],h);throw new Error("Unable to serialize unrecognized input");function p(t,e,i){var o="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var a=Array.isArray(t)&&0<t.length,l=!Array.isArray(e[0]);if(a&&s){for(var h=0;h<t.length;h++)0<h&&(o+=n),o+=f(t[h],h);0<e.length&&(o+=r)}for(var c=0;c<e.length;c++){var d=a?t.length:e[c].length,u=!1,p=a?0===Object.keys(e[c]).length:0===e[c].length;if(i&&!a&&(u="greedy"===i?""===e[c].join("").trim():1===e[c].length&&0===e[c][0].length),"greedy"===i&&a){for(var m=[],g=0;g<d;g++){var y=l?t[g]:g;m.push(e[c][y])}u=""===m.join("").trim()}if(!u){for(var _=0;_<d;_++){0<_&&!p&&(o+=n);var v=a&&l?t[_]:_;o+=f(e[c][v],_)}c<e.length-1&&(!i||0<d&&!p)&&(o+=r)}}return o}function f(t,e){if(null==t)return"";if(t.constructor===Date)return JSON.stringify(t).slice(1,25);var s=!1;d&&"string"==typeof t&&d.test(t)&&(t="'"+t,s=!0);var r=t.toString().replace(u,l);return(s=s||!0===i||"function"==typeof i&&i(t,e)||Array.isArray(i)&&i[e]||function(t,e){for(var i=0;i<e.length;i++)if(-1<t.indexOf(e[i]))return!0;return!1}(r,o.BAD_DELIMITERS)||-1<r.indexOf(n)||" "===r.charAt(0)||" "===r.charAt(r.length-1))?a+r+a:r}}};if(o.RECORD_SEP=String.fromCharCode(30),o.UNIT_SEP=String.fromCharCode(31),o.BYTE_ORDER_MARK="\ufeff",o.BAD_DELIMITERS=["\r","\n",'"',o.BYTE_ORDER_MARK],o.WORKERS_SUPPORTED=!i&&!!e.Worker,o.NODE_STREAM_INPUT=1,o.LocalChunkSize=10485760,o.RemoteChunkSize=5242880,o.DefaultDelimiter=",",o.Parser=f,o.ParserHandle=p,o.NetworkStreamer=h,o.FileStreamer=c,o.StringStreamer=d,o.ReadableStreamStreamer=u,e.jQuery){var a=e.jQuery;a.fn.parse=function(t){var i=t.config||{},s=[];return this.each((function(t){if("INPUT"!==a(this).prop("tagName").toUpperCase()||"file"!==a(this).attr("type").toLowerCase()||!e.FileReader||!this.files||0===this.files.length)return!0;for(var n=0;n<this.files.length;n++)s.push({file:this.files[n],inputElem:this,instanceConfig:a.extend({},i)})})),n(),this;function n(){if(0!==s.length){var e,i,n,l=s[0];if(b(t.before)){var h=t.before(l.file,l.inputElem);if("object"==typeof h){if("abort"===h.action)return e=l.file,i=l.inputElem,n=h.reason,void(b(t.error)&&t.error({name:"AbortError"},e,i,n));if("skip"===h.action)return void r();"object"==typeof h.config&&(l.instanceConfig=a.extend(l.instanceConfig,h.config))}else if("skip"===h)return void r()}var c=l.instanceConfig.complete;l.instanceConfig.complete=function(t){b(c)&&c(t,l.file,l.inputElem),r()},o.parse(l.file,l.instanceConfig)}else b(t.complete)&&t.complete()}function r(){s.splice(0,1),n()}}}function l(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var e=v(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new p(e),(this._handle.streamer=this)._config=e}.call(this,t),this.parseChunk=function(t,i){if(this.isFirstChunk&&b(this._config.beforeFirstChunk)){var n=this._config.beforeFirstChunk(t);void 0!==n&&(t=n)}this.isFirstChunk=!1,this._halted=!1;var r=this._partialLine+t;this._partialLine="";var a=this._handle.parse(r,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var l=a.meta.cursor;this._finished||(this._partialLine=r.substring(l-this._baseIndex),this._baseIndex=l),a&&a.data&&(this._rowCount+=a.data.length);var h=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(s)e.postMessage({results:a,workerId:o.WORKER_ID,finished:h});else if(b(this._config.chunk)&&!i){if(this._config.chunk(a,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);a=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(a.data),this._completeResults.errors=this._completeResults.errors.concat(a.errors),this._completeResults.meta=a.meta),this._completed||!h||!b(this._config.complete)||a&&a.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),h||a&&a.meta.paused||this._nextChunk(),a}this._halted=!0},this._sendError=function(t){b(this._config.error)?this._config.error(t):s&&this._config.error&&e.postMessage({workerId:o.WORKER_ID,error:t,finished:!1})}}function h(t){var e;(t=t||{}).chunkSize||(t.chunkSize=o.RemoteChunkSize),l.call(this,t),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),i||(e.onload=w(this._chunkLoaded,this),e.onerror=w(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var t=this._config.downloadRequestHeaders;for(var s in t)e.setRequestHeader(s,t[s])}if(this._config.chunkSize){var n=this._start+this._config.chunkSize-1;e.setRequestHeader("Range","bytes="+this._start+"-"+n)}try{e.send(this._config.downloadRequestBody)}catch(t){this._chunkError(t.message)}i&&0===e.status&&this._chunkError()}},this._chunkLoaded=function(){4===e.readyState&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:e.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(t){var e=t.getResponseHeader("Content-Range");return null===e?-1:parseInt(e.substring(e.lastIndexOf("/")+1))}(e),this.parseChunk(e.responseText)))},this._chunkError=function(t){var i=e.statusText||t;this._sendError(new Error(i))}}function c(t){var e,i;(t=t||{}).chunkSize||(t.chunkSize=o.LocalChunkSize),l.call(this,t);var s="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,i=t.slice||t.webkitSlice||t.mozSlice,s?((e=new FileReader).onload=w(this._chunkLoaded,this),e.onerror=w(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input;if(this._config.chunkSize){var n=Math.min(this._start+this._config.chunkSize,this._input.size);t=i.call(t,this._start,n)}var r=e.readAsText(t,this._config.encoding);s||this._chunkLoaded({target:{result:r}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function d(t){var e;l.call(this,t=t||{}),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t,i=this._config.chunkSize;return i?(t=e.substring(0,i),e=e.substring(i)):(t=e,e=""),this._finished=!e,this.parseChunk(t)}}}function u(t){l.call(this,t=t||{});var e=[],i=!0,s=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){s&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):i=!0},this._streamData=w((function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(t){this._streamError(t)}}),this),this._streamError=w((function(t){this._streamCleanUp(),this._sendError(t)}),this),this._streamEnd=w((function(){this._streamCleanUp(),s=!0,this._streamData("")}),this),this._streamCleanUp=w((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function p(t){var e,i,s,n=Math.pow(2,53),r=-n,a=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,l=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,h=this,c=0,d=0,u=!1,p=!1,g=[],y={data:[],errors:[],meta:{}};if(b(t.step)){var _=t.step;t.step=function(e){if(y=e,E())x();else{if(x(),0===y.data.length)return;c+=e.data.length,t.preview&&c>t.preview?i.abort():(y.data=y.data[0],_(y,h))}}}function w(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function x(){return y&&s&&(C("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+o.DefaultDelimiter+"'"),s=!1),t.skipEmptyLines&&(y.data=y.data.filter((function(t){return!w(t)}))),E()&&function(){if(y)if(Array.isArray(y.data[0])){for(var e=0;E()&&e<y.data.length;e++)y.data[e].forEach(i);y.data.splice(0,1)}else y.data.forEach(i);function i(e,i){b(t.transformHeader)&&(e=t.transformHeader(e,i)),g.push(e)}}(),function(){if(!y||!t.header&&!t.dynamicTyping&&!t.transform)return y;function e(e,i){var s,n=t.header?{}:[];for(s=0;s<e.length;s++){var r=s,o=e[s];t.header&&(r=s>=g.length?"__parsed_extra":g[s]),t.transform&&(o=t.transform(o,r)),o=k(r,o),"__parsed_extra"===r?(n[r]=n[r]||[],n[r].push(o)):n[r]=o}return t.header&&(s>g.length?C("FieldMismatch","TooManyFields","Too many fields: expected "+g.length+" fields but parsed "+s,d+i):s<g.length&&C("FieldMismatch","TooFewFields","Too few fields: expected "+g.length+" fields but parsed "+s,d+i)),n}var i=1;return!y.data.length||Array.isArray(y.data[0])?(y.data=y.data.map(e),i=y.data.length):y.data=e(y.data,0),t.header&&y.meta&&(y.meta.fields=g),d+=i,y}()}function E(){return t.header&&0===g.length}function k(e,i){return s=e,t.dynamicTypingFunction&&void 0===t.dynamicTyping[s]&&(t.dynamicTyping[s]=t.dynamicTypingFunction(s)),!0===(t.dynamicTyping[s]||t.dynamicTyping)?"true"===i||"TRUE"===i||"false"!==i&&"FALSE"!==i&&(function(t){if(a.test(t)){var e=parseFloat(t);if(r<e&&e<n)return!0}return!1}(i)?parseFloat(i):l.test(i)?new Date(i):""===i?null:i):i;var s}function C(t,e,i,s){var n={type:t,code:e,message:i};void 0!==s&&(n.row=s),y.errors.push(n)}this.parse=function(n,r,a){var l=t.quoteChar||'"';if(t.newline||(t.newline=function(t,e){t=t.substring(0,1048576);var i=new RegExp(m(e)+"([^]*?)"+m(e),"gm"),s=(t=t.replace(i,"")).split("\r"),n=t.split("\n"),r=1<n.length&&n[0].length<s[0].length;if(1===s.length||r)return"\n";for(var o=0,a=0;a<s.length;a++)"\n"===s[a][0]&&o++;return o>=s.length/2?"\r\n":"\r"}(n,l)),s=!1,t.delimiter)b(t.delimiter)&&(t.delimiter=t.delimiter(n),y.meta.delimiter=t.delimiter);else{var h=function(e,i,s,n,r){var a,l,h,c;r=r||[",","\t","|",";",o.RECORD_SEP,o.UNIT_SEP];for(var d=0;d<r.length;d++){var u=r[d],p=0,m=0,g=0;h=void 0;for(var y=new f({comments:n,delimiter:u,newline:i,preview:10}).parse(e),_=0;_<y.data.length;_++)if(s&&w(y.data[_]))g++;else{var v=y.data[_].length;m+=v,void 0!==h?0<v&&(p+=Math.abs(v-h),h=v):h=v}0<y.data.length&&(m/=y.data.length-g),(void 0===l||p<=l)&&(void 0===c||c<m)&&1.99<m&&(l=p,a=u,c=m)}return{successful:!!(t.delimiter=a),bestDelimiter:a}}(n,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);h.successful?t.delimiter=h.bestDelimiter:(s=!0,t.delimiter=o.DefaultDelimiter),y.meta.delimiter=t.delimiter}var c=v(t);return t.preview&&t.header&&c.preview++,e=n,i=new f(c),y=i.parse(e,r,a),x(),u?{meta:{paused:!0}}:y||{meta:{paused:!1}}},this.paused=function(){return u},this.pause=function(){u=!0,i.abort(),e=b(t.chunk)?"":e.substring(i.getCharIndex())},this.resume=function(){h.streamer._halted?(u=!1,h.streamer.parseChunk(e,!0)):setTimeout(h.resume,3)},this.aborted=function(){return p},this.abort=function(){p=!0,i.abort(),y.meta.aborted=!0,b(t.complete)&&t.complete(y),e=""}}function m(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function f(t){var e,i=(t=t||{}).delimiter,s=t.newline,n=t.comments,r=t.step,a=t.preview,l=t.fastMode,h=e=void 0===t.quoteChar||null===t.quoteChar?'"':t.quoteChar;if(void 0!==t.escapeChar&&(h=t.escapeChar),("string"!=typeof i||-1<o.BAD_DELIMITERS.indexOf(i))&&(i=","),n===i)throw new Error("Comment character same as delimiter");!0===n?n="#":("string"!=typeof n||-1<o.BAD_DELIMITERS.indexOf(n))&&(n=!1),"\n"!==s&&"\r"!==s&&"\r\n"!==s&&(s="\n");var c=0,d=!1;this.parse=function(t,o,u){if("string"!=typeof t)throw new Error("Input must be a string");var p=t.length,f=i.length,g=s.length,y=n.length,_=b(r),v=[],w=[],x=[],E=c=0;if(!t)return B();if(l||!1!==l&&-1===t.indexOf(e)){for(var k=t.split(s),C=0;C<k.length;C++){if(x=k[C],c+=x.length,C!==k.length-1)c+=s.length;else if(u)return B();if(!n||x.substring(0,y)!==n){if(_){if(v=[],A(x.split(i)),H(),d)return B()}else A(x.split(i));if(a&&a<=C)return v=v.slice(0,a),B(!0)}}return B()}for(var L=t.indexOf(i,c),T=t.indexOf(s,c),S=new RegExp(m(h)+m(e),"g"),O=t.indexOf(e,c);;)if(t[c]!==e)if(n&&0===x.length&&t.substring(c,c+y)===n){if(-1===T)return B();c=T+g,T=t.indexOf(s,c),L=t.indexOf(i,c)}else if(-1!==L&&(L<T||-1===T))x.push(t.substring(c,L)),c=L+f,L=t.indexOf(i,c);else{if(-1===T)break;if(x.push(t.substring(c,T)),P(T+g),_&&(H(),d))return B();if(a&&v.length>=a)return B(!0)}else for(O=c,c++;;){if(-1===(O=t.indexOf(e,O+1)))return u||w.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:v.length,index:c}),R();if(O===p-1)return R(t.substring(c,O).replace(S,e));if(e!==h||t[O+1]!==h){if(e===h||0===O||t[O-1]!==h){-1!==L&&L<O+1&&(L=t.indexOf(i,O+1)),-1!==T&&T<O+1&&(T=t.indexOf(s,O+1));var M=I(-1===T?L:Math.min(L,T));if(t.substr(O+1+M,f)===i){x.push(t.substring(c,O).replace(S,e)),t[c=O+1+M+f]!==e&&(O=t.indexOf(e,c)),L=t.indexOf(i,c),T=t.indexOf(s,c);break}var D=I(T);if(t.substring(O+1+D,O+1+D+g)===s){if(x.push(t.substring(c,O).replace(S,e)),P(O+1+D+g),L=t.indexOf(i,c),O=t.indexOf(e,c),_&&(H(),d))return B();if(a&&v.length>=a)return B(!0);break}w.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:v.length,index:c}),O++}}else O++}return R();function A(t){v.push(t),E=c}function I(e){var i=0;if(-1!==e){var s=t.substring(O+1,e);s&&""===s.trim()&&(i=s.length)}return i}function R(e){return u||(void 0===e&&(e=t.substring(c)),x.push(e),c=p,A(x),_&&H()),B()}function P(e){c=e,A(x),x=[],T=t.indexOf(s,c)}function B(t){return{data:v,errors:w,meta:{delimiter:i,linebreak:s,aborted:d,truncated:!!t,cursor:E+(o||0)}}}function H(){r(B()),v=[],w=[]}},this.abort=function(){d=!0},this.getCharIndex=function(){return c}}function g(t){var e=t.data,i=n[e.workerId],s=!1;if(e.error)i.userError(e.error,e.file);else if(e.results&&e.results.data){var r={abort:function(){s=!0,y(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:_,resume:_};if(b(i.userStep)){for(var o=0;o<e.results.data.length&&(i.userStep({data:e.results.data[o],errors:e.results.errors,meta:e.results.meta},r),!s);o++);delete e.results}else b(i.userChunk)&&(i.userChunk(e.results,r,e.file),delete e.results)}e.finished&&!s&&y(e.workerId,e.results)}function y(t,e){var i=n[t];b(i.userComplete)&&i.userComplete(e),i.terminate(),delete n[t]}function _(){throw new Error("Not implemented.")}function v(t){if("object"!=typeof t||null===t)return t;var e=Array.isArray(t)?[]:{};for(var i in t)e[i]=v(t[i]);return e}function w(t,e){return function(){t.apply(e,arguments)}}function b(t){return"function"==typeof t}return s&&(e.onmessage=function(t){var i=t.data;if(void 0===o.WORKER_ID&&i&&(o.WORKER_ID=i.workerId),"string"==typeof i.input)e.postMessage({workerId:o.WORKER_ID,results:o.parse(i.input,i.config),finished:!0});else if(e.File&&i.input instanceof File||i.input instanceof Object){var s=o.parse(i.input,i.config);s&&e.postMessage({workerId:o.WORKER_ID,results:s,finished:!0})}}),(h.prototype=Object.create(l.prototype)).constructor=h,(c.prototype=Object.create(l.prototype)).constructor=c,(d.prototype=Object.create(d.prototype)).constructor=d,(u.prototype=Object.create(l.prototype)).constructor=u,o},void 0===(s=i.apply(e,[]))||(t.exports=s)}},e={};function i(s){var n=e[s];if(void 0!==n)return n.exports;var r=e[s]={exports:{}};return t[s].call(r.exports,r,r.exports,i),r.exports}i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";var t={};i.r(t),i.d(t,{A:()=>ji,Animator:()=>ki,Array:()=>me,Box:()=>Kt,Circle:()=>Fi,ClipPath:()=>Wi,Color:()=>jt,Container:()=>we,Controller:()=>Ge,Defs:()=>be,Dom:()=>ye,Ease:()=>Ue,Element:()=>_e,Ellipse:()=>Ae,EventTarget:()=>he,ForeignObject:()=>$i,Fragment:()=>Ie,G:()=>zi,Gradient:()=>Ne,Image:()=>We,Line:()=>ze,List:()=>Qt,Marker:()=>je,Mask:()=>Vi,Matrix:()=>Yt,Morphable:()=>ci,NonMorphable:()=>di,Number:()=>fe,ObjectBag:()=>mi,PID:()=>Qe,Path:()=>_i,PathArray:()=>li,Pattern:()=>Fe,Point:()=>Vt,PointArray:()=>$e,Polygon:()=>wi,Polyline:()=>bi,Queue:()=>Ei,Rect:()=>xi,Runner:()=>Si,SVG:()=>Ki,Shape:()=>xe,Spring:()=>Je,Stop:()=>Xi,Style:()=>Yi,Svg:()=>Ri,Symbol2:()=>Pi,Text:()=>Hi,TextPath:()=>Ui,Timeline:()=>Ti,TransformBag:()=>ui,Tspan:()=>Ni,Use:()=>Gi,adopt:()=>yt,assignNewId:()=>kt,clearEvents:()=>re,create:()=>mt,defaults:()=>pe,dispatch:()=>le,easing:()=>Xe,eid:()=>Et,extend:()=>Ct,find:()=>te,getClass:()=>bt,getEventTarget:()=>ne,getEvents:()=>se,getWindow:()=>ct,makeInstance:()=>ft,makeMorphable:()=>yi,mockAdopt:()=>vt,namespaces:()=>st,nodeOrNew:()=>gt,off:()=>ae,on:()=>oe,parser:()=>Ut,regex:()=>Wt,register:()=>wt,registerMorphableType:()=>gi,registerWindow:()=>rt,restoreWindow:()=>lt,root:()=>pt,saveWindow:()=>at,utils:()=>J,windowEvents:()=>ie,withWindow:()=>ht,wrapWithAttrCheck:()=>Lt});var e=i(809);class s{static tabPressed=!1;static keyDown=!1;static keys={TAB:["Tab"],ENTER:["Enter"],ESC:["Escape","Esc"],BACKSPACE:["Backspace"],ARROW_UP:["ArrowUp","Up"],ARROW_DOWN:["ArrowDown","Down"],ARROW_LEFT:["ArrowLeft","Left"],ARROW_RIGHT:["ArrowRight","Right"],DELETE:["Delete","Del"]};static docHandleKeydown(t){s.keyDown=!0,[...s.keys.TAB,...s.keys.ARROW_DOWN,...s.keys.ARROW_UP].includes(t.key)&&(s.tabPressed=!0)}static docHandleKeyup(t){s.keyDown=!1,[...s.keys.TAB,...s.keys.ARROW_DOWN,...s.keys.ARROW_UP].includes(t.key)&&(s.tabPressed=!1)}static docHandleFocus(t){s.keyDown&&document.body.classList.add("keyboard-focused")}static docHandleBlur(t){document.body.classList.remove("keyboard-focused")}static guid(){const t=()=>Math.floor(65536*(1+Math.random())).toString(16).substring(1);return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}static checkWithinContainer(t,e,i){let s={top:!1,right:!1,bottom:!1,left:!1},n=t.getBoundingClientRect(),r=t===document.body?Math.max(n.bottom,window.innerHeight):n.bottom,o=t.scrollLeft,a=t.scrollTop,l=e.left-o,h=e.top-a;return(l<n.left+i||l<i)&&(s.left=!0),(l+e.width>n.right-i||l+e.width>window.innerWidth-i)&&(s.right=!0),(h<n.top+i||h<i)&&(s.top=!0),(h+e.height>r-i||h+e.height>window.innerHeight-i)&&(s.bottom=!0),s}static checkPossibleAlignments(t,e,i,s){let n={top:!0,right:!0,bottom:!0,left:!0,spaceOnTop:null,spaceOnRight:null,spaceOnBottom:null,spaceOnLeft:null},r="visible"===getComputedStyle(e).overflow,o=e.getBoundingClientRect(),a=Math.min(o.height,window.innerHeight),l=Math.min(o.width,window.innerWidth),h=t.getBoundingClientRect(),c=e.scrollLeft,d=e.scrollTop,u=i.left-c,p=i.top-d,m=i.top+h.height-d;return n.spaceOnRight=r?window.innerWidth-(h.left+i.width):l-(u+i.width),n.spaceOnRight<0&&(n.left=!1),n.spaceOnLeft=r?h.right-i.width:u-i.width+h.width,n.spaceOnLeft<0&&(n.right=!1),n.spaceOnBottom=r?window.innerHeight-(h.top+i.height+s):a-(p+i.height+s),n.spaceOnBottom<0&&(n.top=!1),n.spaceOnTop=r?h.bottom-(i.height+s):m-(i.height-s),n.spaceOnTop<0&&(n.bottom=!1),n}static getIdFromTrigger(t){let e=t.dataset.target;return e||(e=t.getAttribute("href"),e?e.slice(1):"")}static getDocumentScrollTop(){return window.scrollY||document.documentElement.scrollTop||document.body.scrollTop||0}static getDocumentScrollLeft(){return window.scrollX||document.documentElement.scrollLeft||document.body.scrollLeft||0}static throttle(t,e,i=null){let s,n,r,o=null,a=0;i||(i={});let l=function(){a=!1===i.leading?0:(new Date).getTime(),o=null,r=t.apply(s,n),s=n=null};return function(){let h=(new Date).getTime();a||!1!==i.leading||(a=h);let c=e-(h-a);return s=this,n=arguments,c<=0?(clearTimeout(o),o=null,a=h,r=t.apply(s,n),s=n=null):o||!1===i.trailing||(o=setTimeout(l,c)),r}}}class n{el;options;constructor(t,e,i){t instanceof HTMLElement||console.error(Error(t+" is not an HTML Element"));let s=i.getInstance(t);s&&s.destroy(),this.el=t}static init(t,e,i){let s=null;if(t instanceof Element)s=new i(t,e);else if(t&&t.length){s=[];for(let n=0;n<t.length;n++)s.push(new i(t[n],e))}return s}static get defaults(){return{}}static getInstance(t){throw new Error("This method must be implemented.")}destroy(){throw new Error("This method must be implemented.")}}const r={alignment:"left",autoFocus:!0,constrainWidth:!0,container:null,coverTrigger:!0,closeOnClick:!0,hover:!1,inDuration:150,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,onItemClick:null};class o extends n{static _dropdowns=[];id;dropdownEl;isOpen;isScrollable;isTouchMoving;focusedIndex;filterQuery;filterTimeout;constructor(t,e){super(t,e,o),this.el.M_Dropdown=this,o._dropdowns.push(this),this.id=s.getIdFromTrigger(t),this.dropdownEl=document.getElementById(this.id),this.options={...o.defaults,...e},this.isOpen=!1,this.isScrollable=!1,this.isTouchMoving=!1,this.focusedIndex=-1,this.filterQuery=[],this._moveDropdown(),this._makeDropdownFocusable(),this._setupEventHandlers()}static get defaults(){return r}static init(t,e={}){return super.init(t,e,o)}static getInstance(t){return t.M_Dropdown}destroy(){this._resetDropdownStyles(),this._removeEventHandlers(),o._dropdowns.splice(o._dropdowns.indexOf(this),1),this.el.M_Dropdown=void 0}_setupEventHandlers(){this.el.addEventListener("keydown",this._handleTriggerKeydown),this.dropdownEl?.addEventListener("click",this._handleDropdownClick),this.options.hover?(this.el.addEventListener("mouseenter",this._handleMouseEnter),this.el.addEventListener("mouseleave",this._handleMouseLeave),this.dropdownEl.addEventListener("mouseleave",this._handleMouseLeave)):this.el.addEventListener("click",this._handleClick)}_removeEventHandlers(){this.el.removeEventListener("keydown",this._handleTriggerKeydown),this.dropdownEl.removeEventListener("click",this._handleDropdownClick),this.options.hover?(this.el.removeEventListener("mouseenter",this._handleMouseEnter),this.el.removeEventListener("mouseleave",this._handleMouseLeave),this.dropdownEl.removeEventListener("mouseleave",this._handleMouseLeave)):this.el.removeEventListener("click",this._handleClick)}_setupTemporaryEventHandlers(){document.body.addEventListener("click",this._handleDocumentClick),document.body.addEventListener("touchmove",this._handleDocumentTouchmove),this.dropdownEl.addEventListener("keydown",this._handleDropdownKeydown),window.addEventListener("resize",this._handleWindowResize)}_removeTemporaryEventHandlers(){document.body.removeEventListener("click",this._handleDocumentClick),document.body.removeEventListener("touchmove",this._handleDocumentTouchmove),this.dropdownEl.removeEventListener("keydown",this._handleDropdownKeydown),window.removeEventListener("resize",this._handleWindowResize)}_handleClick=t=>{t.preventDefault(),this.isOpen?this.close():this.open()};_handleMouseEnter=()=>{this.open()};_handleMouseLeave=t=>{const e=t.relatedTarget,i=!!e.closest(".dropdown-content");let s=!1;const n=e.closest(".dropdown-trigger");n&&n.M_Dropdown&&n.M_Dropdown.isOpen&&(s=!0),s||i||this.close()};_handleDocumentClick=t=>{const e=t.target;this.options.closeOnClick&&e.closest(".dropdown-content")&&!this.isTouchMoving?this.close():e.closest(".dropdown-content")||setTimeout((()=>{this.isOpen&&this.close()}),0),this.isTouchMoving=!1};_handleTriggerKeydown=t=>{(s.keys.ARROW_DOWN.includes(t.key)||s.keys.ENTER.includes(t.key))&&!this.isOpen&&(t.preventDefault(),this.open())};_handleDocumentTouchmove=t=>{t.target.closest(".dropdown-content")&&(this.isTouchMoving=!0)};_handleDropdownClick=t=>{if("function"==typeof this.options.onItemClick){const e=t.target.closest("li");this.options.onItemClick.call(this,e)}};_handleDropdownKeydown=t=>{const e=s.keys.ARROW_DOWN.includes(t.key)||s.keys.ARROW_UP.includes(t.key);if(s.keys.TAB.includes(t.key))t.preventDefault(),this.close();else if(e&&this.isOpen){t.preventDefault();const e=s.keys.ARROW_DOWN.includes(t.key)?1:-1;let i=this.focusedIndex,n=!1;do{if(i+=e,this.dropdownEl.children[i]&&-1!==this.dropdownEl.children[i].tabIndex){n=!0;break}}while(i<this.dropdownEl.children.length&&i>=0);n&&(this.focusedIndex>=0&&this.dropdownEl.children[this.focusedIndex].classList.remove("active"),this.focusedIndex=i,this._focusFocusedItem())}else if(s.keys.ENTER.includes(t.key)&&this.isOpen){const t=this.dropdownEl.children[this.focusedIndex],e=t.querySelector("a, button");e?e.click():t&&t instanceof HTMLElement&&t.click()}else s.keys.ESC.includes(t.key)&&this.isOpen&&(t.preventDefault(),this.close());const i=t.key.toLowerCase(),n=/[a-zA-Z0-9-_]/.test(i),r=[...s.keys.ARROW_DOWN,...s.keys.ARROW_UP,...s.keys.ENTER,...s.keys.ESC,...s.keys.TAB];if(n&&!r.includes(t.key)){this.filterQuery.push(i);const t=this.filterQuery.join(""),e=Array.from(this.dropdownEl.querySelectorAll("li")).find((e=>0===e.innerText.toLowerCase().indexOf(t)));e&&(this.focusedIndex=[...e.parentNode.children].indexOf(e),this._focusFocusedItem())}this.filterTimeout=setTimeout(this._resetFilterQuery,1e3)};_handleWindowResize=t=>{this.el.offsetParent&&this.recalculateDimensions()};_resetFilterQuery=()=>{this.filterQuery=[]};_resetDropdownStyles(){this.dropdownEl.style.display="",this.dropdownEl.style.width="",this.dropdownEl.style.height="",this.dropdownEl.style.left="",this.dropdownEl.style.top="",this.dropdownEl.style.transformOrigin="",this.dropdownEl.style.transform="",this.dropdownEl.style.opacity=""}_moveDropdown(t=null){this.options.container?this.options.container.append(this.dropdownEl):t?t.contains(this.dropdownEl)||t.append(this.dropdownEl):this.el.after(this.dropdownEl)}_makeDropdownFocusable(){this.dropdownEl&&(this.dropdownEl.popover="",this.dropdownEl.tabIndex=0,Array.from(this.dropdownEl.children).forEach((t=>{t.getAttribute("tabindex")||t.setAttribute("tabindex","0")})))}_focusFocusedItem(){this.focusedIndex>=0&&this.focusedIndex<this.dropdownEl.children.length&&this.options.autoFocus&&(this.dropdownEl.children[this.focusedIndex].focus({preventScroll:!0}),this.dropdownEl.children[this.focusedIndex].scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"}))}_getDropdownPosition(t){this.el.offsetParent.getBoundingClientRect();const e=this.el.getBoundingClientRect(),i=this.dropdownEl.getBoundingClientRect();let n=i.height,r=i.width,o=e.left-i.left,a=e.top-i.top;const l={left:o,top:a,height:n,width:r},h=s.checkPossibleAlignments(this.el,t,l,this.options.coverTrigger?0:e.height);let c="top",d=this.options.alignment;if(a+=this.options.coverTrigger?0:e.height,this.isScrollable=!1,h.top||(h.bottom?(c="bottom",this.options.coverTrigger||(a-=e.height)):(this.isScrollable=!0,n-=20,h.spaceOnTop>h.spaceOnBottom?(c="bottom",n+=h.spaceOnTop,a-=this.options.coverTrigger?h.spaceOnTop-20:h.spaceOnTop-20+e.height):n+=h.spaceOnBottom)),!h[d]){const t="left"===d?"right":"left";h[t]?d=t:h.spaceOnLeft>h.spaceOnRight?(d="right",r+=h.spaceOnLeft,o-=h.spaceOnLeft):(d="left",r+=h.spaceOnRight)}return"bottom"===c&&(a=a-i.height+(this.options.coverTrigger?e.height:0)),"right"===d&&(o=o-i.width+e.width),{x:o,y:a,verticalAlignment:c,horizontalAlignment:d,height:n,width:r}}_animateIn(){const t=this.options.inDuration;this.dropdownEl.style.transition="none",this.dropdownEl.style.opacity="0",this.dropdownEl.style.transform="scale(0.3, 0.3)",setTimeout((()=>{this.dropdownEl.style.transition=`opacity ${t}ms ease, transform ${t}ms ease`,this.dropdownEl.style.opacity="1",this.dropdownEl.style.transform="scale(1, 1)"}),1),setTimeout((()=>{this.options.autoFocus&&this.dropdownEl.focus(),"function"==typeof this.options.onOpenEnd&&this.options.onOpenEnd.call(this,this.el)}),t)}_animateOut(){const t=this.options.outDuration;this.dropdownEl.style.transition=`opacity ${t}ms ease, transform ${t}ms ease`,this.dropdownEl.style.opacity="0",this.dropdownEl.style.transform="scale(0.3, 0.3)",setTimeout((()=>{this._resetDropdownStyles(),"function"==typeof this.options.onCloseEnd&&this.options.onCloseEnd.call(this,this.el)}),t)}_getClosestAncestor(t,e){let i=t.parentNode;for(;null!==i&&i!==document;){if(e(i))return i;i=i.parentElement}return null}_placeDropdown(){let t=this._getClosestAncestor(this.dropdownEl,(t=>!["HTML","BODY"].includes(t.tagName)&&"visible"!==getComputedStyle(t).overflow));t||(t=this.dropdownEl.offsetParent?this.dropdownEl.offsetParent:this.dropdownEl.parentNode),"static"===getComputedStyle(t).position&&(t.style.position="relative"),this._moveDropdown(t);const e=this.options.constrainWidth?this.el.getBoundingClientRect().width:this.dropdownEl.getBoundingClientRect().width;this.dropdownEl.style.width=e+"px";const i=this._getDropdownPosition(t);this.dropdownEl.style.left=i.x+"px",this.dropdownEl.style.top=i.y+"px",this.dropdownEl.style.height=i.height+"px",this.dropdownEl.style.width=i.width+"px",this.dropdownEl.style.transformOrigin=`${"left"===i.horizontalAlignment?"0":"100%"} ${"top"===i.verticalAlignment?"0":"100%"}`}open=()=>{this.isOpen||(this.isOpen=!0,"function"==typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el),this._resetDropdownStyles(),this.dropdownEl.style.display="block",this._placeDropdown(),this._animateIn(),setTimeout((()=>this._setupTemporaryEventHandlers()),0))};close=()=>{this.isOpen&&(this.isOpen=!1,this.focusedIndex=-1,"function"==typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),this._animateOut(),this._removeTemporaryEventHandlers(),this.options.autoFocus&&this.el.focus())};recalculateDimensions=()=>{this.isOpen&&(this.dropdownEl.style.width="",this.dropdownEl.style.height="",this.dropdownEl.style.left="",this.dropdownEl.style.top="",this.dropdownEl.style.transformOrigin="",this._placeDropdown())}}let a={data:[],onAutocomplete:null,dropdownOptions:{autoFocus:!1,closeOnClick:!1,coverTrigger:!1},minLength:1,isMultiSelect:!1,onSearch:(t,e)=>{const i=t.toLocaleLowerCase();e.setMenuItems(e.options.data.filter((t=>t.id.toString().toLocaleLowerCase().includes(i)||t.text?.toLocaleLowerCase().includes(i))))},maxDropDownHeight:"300px",allowUnsafeHTML:!1};class l extends n{isOpen;count;activeIndex;oldVal;$active;_mousedown;container;dropdown;static _keydown;selectedValues;menuItems;constructor(t,e){super(t,e,l),this.el.M_Autocomplete=this,this.options={...l.defaults,...e},this.isOpen=!1,this.count=0,this.activeIndex=-1,this.oldVal="",this.selectedValues=[],this.menuItems=this.options.data||[],this.$active=null,this._mousedown=!1,this._setupDropdown(),this._setupEventHandlers()}static get defaults(){return a}static init(t,e={}){return super.init(t,e,l)}static getInstance(t){return t.M_Autocomplete}destroy(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_Autocomplete=void 0}_setupEventHandlers(){this.el.addEventListener("blur",this._handleInputBlur),this.el.addEventListener("keyup",this._handleInputKeyupAndFocus),this.el.addEventListener("focus",this._handleInputKeyupAndFocus),this.el.addEventListener("keydown",this._handleInputKeydown),this.el.addEventListener("click",this._handleInputClick),this.container.addEventListener("mousedown",this._handleContainerMousedownAndTouchstart),this.container.addEventListener("mouseup",this._handleContainerMouseupAndTouchend),void 0!==window.ontouchstart&&(this.container.addEventListener("touchstart",this._handleContainerMousedownAndTouchstart),this.container.addEventListener("touchend",this._handleContainerMouseupAndTouchend))}_removeEventHandlers(){this.el.removeEventListener("blur",this._handleInputBlur),this.el.removeEventListener("keyup",this._handleInputKeyupAndFocus),this.el.removeEventListener("focus",this._handleInputKeyupAndFocus),this.el.removeEventListener("keydown",this._handleInputKeydown),this.el.removeEventListener("click",this._handleInputClick),this.container.removeEventListener("mousedown",this._handleContainerMousedownAndTouchstart),this.container.removeEventListener("mouseup",this._handleContainerMouseupAndTouchend),void 0!==window.ontouchstart&&(this.container.removeEventListener("touchstart",this._handleContainerMousedownAndTouchstart),this.container.removeEventListener("touchend",this._handleContainerMouseupAndTouchend))}_setupDropdown(){this.container=document.createElement("ul"),this.container.style.maxHeight=this.options.maxDropDownHeight,this.container.id=`autocomplete-options-${s.guid()}`,this.container.classList.add("autocomplete-content","dropdown-content"),this.el.setAttribute("data-target",this.container.id),this.menuItems.forEach((t=>{const e=this._createDropdownItem(t);this.container.append(e)})),this.el.parentElement.appendChild(this.container);let t={...l.defaults.dropdownOptions,...this.options.dropdownOptions},e=t.onItemClick;t.onItemClick=t=>{if(!t)return;const i=t.getAttribute("data-id");this.selectOption(i),e&&"function"==typeof e&&e.call(this.dropdown,this.el)},this.dropdown=o.init(this.el,t);const i=this.el.parentElement.querySelector("label");i&&this.el.after(i),this.el.removeEventListener("click",this.dropdown._handleClick),this.el.value&&this.selectOption(this.el.value);const n=document.createElement("div");n.classList.add("status-info"),n.setAttribute("style","position: absolute;right:0;top:0;"),this.el.parentElement.appendChild(n),this._updateSelectedInfo()}_removeDropdown(){this.container.parentNode.removeChild(this.container)}_handleInputBlur=()=>{this._mousedown||(this.close(),this._resetAutocomplete())};_handleInputKeyupAndFocus=t=>{"keyup"===t.type&&(l._keydown=!1),this.count=0;const e=this.el.value.toLocaleLowerCase();s.keys.ENTER.includes(t.key)||s.keys.ARROW_UP.includes(t.key)||s.keys.ARROW_DOWN.includes(t.key)||(this.oldVal===e||!s.tabPressed&&"focus"===t.type||this.open(),this.oldVal!==e&&(this._setStatusLoading(),this.options.onSearch(this.el.value,this)),this.options.isMultiSelect||0!==this.el.value.length||(this.selectedValues=[],this._triggerChanged()),this.oldVal=e)};_handleInputKeydown=t=>{l._keydown=!0;const e=this.container.querySelectorAll("li").length;if(s.keys.ENTER.includes(t.key)&&this.activeIndex>=0){const e=this.container.querySelectorAll("li")[this.activeIndex];e&&(this.selectOption(e.getAttribute("data-id")),t.preventDefault())}else(s.keys.ARROW_UP.includes(t.key)||s.keys.ARROW_DOWN.includes(t.key))&&(t.preventDefault(),s.keys.ARROW_UP.includes(t.key)&&this.activeIndex>0&&this.activeIndex--,s.keys.ARROW_DOWN.includes(t.key)&&this.activeIndex<e-1&&this.activeIndex++,this.$active?.classList.remove("active"),this.activeIndex>=0&&(this.$active=this.container.querySelectorAll("li")[this.activeIndex],this.$active?.classList.add("active"),this.container.children[this.activeIndex].scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})))};_handleInputClick=()=>{this.open()};_handleContainerMousedownAndTouchstart=()=>{this._mousedown=!0};_handleContainerMouseupAndTouchend=()=>{this._mousedown=!1};_resetCurrentElementPosition(){this.activeIndex=-1,this.$active?.classList.remove("active")}_resetAutocomplete(){this.container.replaceChildren(),this._resetCurrentElementPosition(),this.oldVal=null,this.isOpen=!1,this._mousedown=!1}_highlightPartialText(t,e){const i=e.toLocaleLowerCase().indexOf(""+t.toLocaleLowerCase()),s=i+t.length-1;return-1==i||-1==s?[e,"",""]:[e.slice(0,i),e.slice(i,s+1),e.slice(s+1)]}_createDropdownItem(t){const e=document.createElement("li");if(e.setAttribute("data-id",t.id),e.setAttribute("style","display:grid; grid-auto-flow: column; user-select: none; align-items: center;"),this.options.isMultiSelect&&(e.innerHTML=`\n        <div class="item-selection" style="text-align:center;">\n        <input type="checkbox"${this.selectedValues.some((e=>e.id===t.id))?' checked="checked"':""}><span style="padding-left:21px;"></span>\n      </div>`),t.image){const i=document.createElement("img");i.classList.add("circle"),i.src=t.image,e.appendChild(i)}const i=this.el.value.toLocaleLowerCase(),s=this._highlightPartialText(i,(t.text||t.id).toString()),n=document.createElement("div");if(n.setAttribute("style","line-height:1.2;font-weight:500;"),this.options.allowUnsafeHTML)n.innerHTML=s[0]+'<span class="highlight">'+s[1]+"</span>"+s[2];else if(n.appendChild(document.createTextNode(s[0])),s[1]){const t=document.createElement("span");t.textContent=s[1],t.classList.add("highlight"),n.appendChild(t),n.appendChild(document.createTextNode(s[2]))}const r=document.createElement("div");if(r.classList.add("item-text"),r.setAttribute("style","padding:5px;overflow:hidden;"),e.appendChild(r),e.querySelector(".item-text").appendChild(n),"string"==typeof t.description||"number"==typeof t.description&&!isNaN(t.description)){const i=document.createElement("small");i.setAttribute("style","line-height:1.3;color:grey;white-space:nowrap;text-overflow:ellipsis;display:block;width:90%;overflow:hidden;"),i.innerText=t.description,e.querySelector(".item-text").appendChild(i)}return e.style.gridTemplateColumns=(()=>this.options.isMultiSelect?t.image?"40px min-content auto":"40px auto":t.image?"min-content auto":"auto")(),e}_renderDropdown(){this._resetAutocomplete(),0===this.menuItems.length&&(this.menuItems=this.selectedValues);for(let t=0;t<this.menuItems.length;t++){const e=this._createDropdownItem(this.menuItems[t]);this.container.append(e)}}_setStatusLoading(){this.el.parentElement.querySelector(".status-info").innerHTML='<div style="height:100%;width:50px;"><svg version="1.1" id="L4" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 0 0" xml:space="preserve">\n    <circle fill="#888c" stroke="none" cx="6" cy="50" r="6"><animate attributeName="opacity" dur="1s" values="0;1;0" repeatCount="indefinite" begin="0.1"/></circle>\n    <circle fill="#888c" stroke="none" cx="26" cy="50" r="6"><animate attributeName="opacity" dur="1s" values="0;1;0" repeatCount="indefinite" begin="0.2"/></circle>\n    <circle fill="#888c" stroke="none" cx="46" cy="50" r="6"><animate attributeName="opacity" dur="1s" values="0;1;0" repeatCount="indefinite"  begin="0.3"/></circle>\n  </svg></div>'}_updateSelectedInfo(){const t=this.el.parentElement.querySelector(".status-info");t&&(this.options.isMultiSelect?t.innerHTML=this.selectedValues.length.toString():t.innerHTML="")}_refreshInputText(){if(1===this.selectedValues.length){const t=this.selectedValues[0];this.el.value=t.text||t.id}}_triggerChanged(){this.el.dispatchEvent(new Event("change")),"function"==typeof this.options.onAutocomplete&&this.options.onAutocomplete.call(this,this.selectedValues)}open=()=>{const t=this.el.value.toLocaleLowerCase();this._resetAutocomplete(),t.length>=this.options.minLength&&(this.isOpen=!0,this._renderDropdown()),this.dropdown.isOpen?this.dropdown.recalculateDimensions():setTimeout((()=>{this.dropdown.open()}),0)};close=()=>{this.dropdown.close()};setMenuItems(t){this.menuItems=t,this.open(),this._updateSelectedInfo()}setValues(t){this.selectedValues=t,this._updateSelectedInfo(),this.options.isMultiSelect||this._refreshInputText(),this._triggerChanged()}selectOption(t){const e=this.menuItems.find((e=>e.id==t));if(!e)return;const i=this.container.querySelector('li[data-id="'+t+'"]');if(i){if(this.options.isMultiSelect){const t=i.querySelector('input[type="checkbox"]');t.checked=!t.checked,t.checked?this.selectedValues.push(e):this.selectedValues=this.selectedValues.filter((t=>t.id!==e.id)),this.el.focus()}else this.selectedValues=[e],this._refreshInputText(),this._resetAutocomplete(),this.close();this._updateSelectedInfo(),this._triggerChanged()}}}let h={direction:"top",hoverEnabled:!0,toolbarEnabled:!1};class c extends n{isOpen;_anchor;_menu;_floatingBtns;_floatingBtnsReverse;offsetY;offsetX;btnBottom;btnLeft;btnWidth;constructor(t,e){super(t,e,c),this.el.M_FloatingActionButton=this,this.options={...c.defaults,...e},this.isOpen=!1,this._anchor=this.el.querySelector("a"),this._menu=this.el.querySelector("ul"),this._floatingBtns=Array.from(this.el.querySelectorAll("ul .btn-floating")),this._floatingBtnsReverse=this._floatingBtns.reverse(),this.offsetY=0,this.offsetX=0,this.el.classList.add(`direction-${this.options.direction}`),"top"===this.options.direction?this.offsetY=40:"right"===this.options.direction?this.offsetX=-40:"bottom"===this.options.direction?this.offsetY=-40:this.offsetX=40,this._setupEventHandlers()}static get defaults(){return h}static init(t,e={}){return super.init(t,e,c)}static getInstance(t){return t.M_FloatingActionButton}destroy(){this._removeEventHandlers(),this.el.M_FloatingActionButton=void 0}_setupEventHandlers(){this.options.hoverEnabled&&!this.options.toolbarEnabled?(this.el.addEventListener("mouseenter",this.open),this.el.addEventListener("mouseleave",this.close)):this.el.addEventListener("click",this._handleFABClick)}_removeEventHandlers(){this.options.hoverEnabled&&!this.options.toolbarEnabled?(this.el.removeEventListener("mouseenter",this.open),this.el.removeEventListener("mouseleave",this.close)):this.el.removeEventListener("click",this._handleFABClick)}_handleFABClick=()=>{this.isOpen?this.close():this.open()};_handleDocumentClick=t=>{t.target!==this._menu&&this.close};open=()=>{this.isOpen||(this.options.toolbarEnabled?this._animateInToolbar():this._animateInFAB(),this.isOpen=!0)};close=()=>{this.isOpen&&(this.options.toolbarEnabled?(window.removeEventListener("scroll",this.close,!0),document.body.removeEventListener("click",this._handleDocumentClick,!0)):this._animateOutFAB(),this.isOpen=!1)};_animateInFAB(){this.el.classList.add("active"),this._floatingBtnsReverse.forEach(((t,e)=>{const i=40*e;t.style.transition="none",t.style.opacity="0",t.style.transform=`translate(${this.offsetX}px, ${this.offsetY}px) scale(0.4)`,setTimeout((()=>{t.style.opacity="0.4",setTimeout((()=>{t.style.transition="opacity 275ms ease, transform 275ms ease",t.style.opacity="1",t.style.transform="translate(0, 0) scale(1)"}),1)}),i)}))}_animateOutFAB(){setTimeout((()=>this.el.classList.remove("active")),175),this._floatingBtnsReverse.forEach((t=>{t.style.transition="opacity 175ms ease, transform 175ms ease",t.style.opacity="0",t.style.transform=`translate(${this.offsetX}px, ${this.offsetY}px) scale(0.4)`}))}_animateInToolbar(){let t,e=window.innerWidth,i=window.innerHeight,s=this.el.getBoundingClientRect();const n=document.createElement("div");n.classList.add("fab-backdrop");const r=getComputedStyle(this._anchor).backgroundColor;this._anchor.append(n),this.offsetX=s.left-e/2+s.width/2,this.offsetY=i-s.bottom,t=e/n[0].clientWidth,this.btnBottom=s.bottom,this.btnLeft=s.left,this.btnWidth=s.width,this.el.classList.add("active"),this.el.style.textAlign="center",this.el.style.width="100%",this.el.style.bottom="0",this.el.style.left="0",this.el.style.transform="translateX("+this.offsetX+"px)",this.el.style.transition="none",this._anchor.style.transform=`translateY(${this.offsetY}px`,this._anchor.style.transition="none",n.style.backgroundColor=r,setTimeout((()=>{this.el.style.transform="",this.el.style.transition="transform .2s cubic-bezier(0.550, 0.085, 0.680, 0.530), background-color 0s linear .2s",this._anchor.style.overflow="visible",this._anchor.style.transform="",this._anchor.style.transition="transform .2s",setTimeout((()=>{this.el.style.overflow="hidden",this.el.style.backgroundColor=r,n.style.transform="scale("+t+")",n.style.transition="transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)",this._menu.querySelectorAll("li > a").forEach((t=>t.style.opacity="1")),window.addEventListener("scroll",this.close,!0),document.body.addEventListener("click",this._handleDocumentClick,!0)}),100)}),0)}}let d={duration:200,dist:-100,shift:0,padding:0,numVisible:5,fullWidth:!1,indicators:!1,noWrap:!1,onCycleTo:null};class u extends n{hasMultipleSlides;showIndicators;noWrap;pressed;dragged;offset;target;images;itemWidth;itemHeight;dim;_indicators;count;xform;verticalDragged;reference;referenceY;velocity;frame;timestamp;ticker;amplitude;center=0;imageHeight;scrollingTimeout;oneTimeCallback;constructor(t,e){super(t,e,u),this.el.M_Carousel=this,this.options={...u.defaults,...e},this.hasMultipleSlides=this.el.querySelectorAll(".carousel-item").length>1,this.showIndicators=this.options.indicators&&this.hasMultipleSlides,this.noWrap=this.options.noWrap||!this.hasMultipleSlides,this.pressed=!1,this.dragged=!1,this.offset=this.target=0,this.images=[],this.itemWidth=this.el.querySelector(".carousel-item").clientWidth,this.itemHeight=this.el.querySelector(".carousel-item").clientHeight,this.dim=2*this.itemWidth+this.options.padding||1,this.options.fullWidth&&(this.options.dist=0,this._setCarouselHeight(),this.showIndicators&&this.el.querySelector(".carousel-fixed-item")?.classList.add("with-indicators")),this._indicators=document.createElement("ul"),this._indicators.classList.add("indicators"),this.el.querySelectorAll(".carousel-item").forEach(((t,e)=>{if(this.images.push(t),this.showIndicators){const t=document.createElement("li");t.classList.add("indicator-item"),0===e&&t.classList.add("active"),this._indicators.appendChild(t)}})),this.showIndicators&&this.el.appendChild(this._indicators),this.count=this.images.length,this.options.numVisible=Math.min(this.count,this.options.numVisible),this.xform="transform",["webkit","Moz","O","ms"].every((t=>{var e=t+"Transform";return void 0===document.body.style[e]||(this.xform=e,!1)})),this._setupEventHandlers(),this._scroll(this.offset)}static get defaults(){return d}static init(t,e={}){return super.init(t,e,u)}static getInstance(t){return t.M_Carousel}destroy(){this._removeEventHandlers(),this.el.M_Carousel=void 0}_setupEventHandlers(){void 0!==window.ontouchstart&&(this.el.addEventListener("touchstart",this._handleCarouselTap),this.el.addEventListener("touchmove",this._handleCarouselDrag),this.el.addEventListener("touchend",this._handleCarouselRelease)),this.el.addEventListener("mousedown",this._handleCarouselTap),this.el.addEventListener("mousemove",this._handleCarouselDrag),this.el.addEventListener("mouseup",this._handleCarouselRelease),this.el.addEventListener("mouseleave",this._handleCarouselRelease),this.el.addEventListener("click",this._handleCarouselClick),this.showIndicators&&this._indicators&&this._indicators.querySelectorAll(".indicator-item").forEach((t=>{t.addEventListener("click",this._handleIndicatorClick)})),window.addEventListener("resize",this._handleThrottledResize)}_removeEventHandlers(){void 0!==window.ontouchstart&&(this.el.removeEventListener("touchstart",this._handleCarouselTap),this.el.removeEventListener("touchmove",this._handleCarouselDrag),this.el.removeEventListener("touchend",this._handleCarouselRelease)),this.el.removeEventListener("mousedown",this._handleCarouselTap),this.el.removeEventListener("mousemove",this._handleCarouselDrag),this.el.removeEventListener("mouseup",this._handleCarouselRelease),this.el.removeEventListener("mouseleave",this._handleCarouselRelease),this.el.removeEventListener("click",this._handleCarouselClick),this.showIndicators&&this._indicators&&this._indicators.querySelectorAll(".indicator-item").forEach((t=>{t.removeEventListener("click",this._handleIndicatorClick)})),window.removeEventListener("resize",this._handleThrottledResize)}_handleThrottledResize=s.throttle((function(){this._handleResize()}),200,null).bind(this);_handleCarouselTap=t=>{"mousedown"===t.type&&"IMG"===t.target.tagName&&t.preventDefault(),this.pressed=!0,this.dragged=!1,this.verticalDragged=!1,this.reference=this._xpos(t),this.referenceY=this._ypos(t),this.velocity=this.amplitude=0,this.frame=this.offset,this.timestamp=Date.now(),clearInterval(this.ticker),this.ticker=setInterval(this._track,100)};_handleCarouselDrag=t=>{let e,i,s,n;if(this.pressed)if(e=this._xpos(t),i=this._ypos(t),s=this.reference-e,n=Math.abs(this.referenceY-i),n<30&&!this.verticalDragged)(s>2||s<-2)&&(this.dragged=!0,this.reference=e,this._scroll(this.offset+s));else{if(this.dragged)return t.preventDefault(),t.stopPropagation(),!1;this.verticalDragged=!0}if(this.dragged)return t.preventDefault(),t.stopPropagation(),!1};_handleCarouselRelease=t=>{if(this.pressed)return this.pressed=!1,clearInterval(this.ticker),this.target=this.offset,(this.velocity>10||this.velocity<-10)&&(this.amplitude=.9*this.velocity,this.target=this.offset+this.amplitude),this.target=Math.round(this.target/this.dim)*this.dim,this.noWrap&&(this.target>=this.dim*(this.count-1)?this.target=this.dim*(this.count-1):this.target<0&&(this.target=0)),this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this._autoScroll),this.dragged&&(t.preventDefault(),t.stopPropagation()),!1};_handleCarouselClick=t=>{if(this.dragged)return t.preventDefault(),t.stopPropagation(),!1;if(!this.options.fullWidth){const e=t.target.closest(".carousel-item");if(!e)return;const i=[...e.parentNode.children].indexOf(e);0!=this._wrap(this.center)-i&&(t.preventDefault(),t.stopPropagation()),i<0?t.clientX-t.target.getBoundingClientRect().left>this.el.clientWidth/2?this.next():this.prev():this._cycleTo(i)}};_handleIndicatorClick=t=>{t.stopPropagation();const e=t.target.closest(".indicator-item");if(e){const t=[...e.parentNode.children].indexOf(e);this._cycleTo(t)}};_handleResize=()=>{this.options.fullWidth?(this.itemWidth=this.el.querySelector(".carousel-item").clientWidth,this.imageHeight=this.el.querySelector(".carousel-item.active").clientHeight,this.dim=2*this.itemWidth+this.options.padding,this.offset=2*this.center*this.itemWidth,this.target=this.offset,this._setCarouselHeight(!0)):this._scroll()};_setCarouselHeight(t=!1){const e=this.el.querySelector(".carousel-item.active")?this.el.querySelector(".carousel-item.active"):this.el.querySelector(".carousel-item"),i=e.querySelector("img");if(i)if(i.complete){const t=i.clientHeight;if(t>0)this.el.style.height=t+"px";else{const t=i.naturalWidth,e=i.naturalHeight,s=this.el.clientWidth/t*e;this.el.style.height=s+"px"}}else i.addEventListener("load",(()=>{this.el.style.height=i.offsetHeight+"px"}));else if(!t){const t=e.clientHeight;this.el.style.height=t+"px"}}_xpos(t){return t.type.startsWith("touch")&&t.targetTouches.length>=1?t.targetTouches[0].clientX:t.clientX}_ypos(t){return t.type.startsWith("touch")&&t.targetTouches.length>=1?t.targetTouches[0].clientY:t.clientY}_wrap(t){return t>=this.count?t%this.count:t<0?this._wrap(this.count+t%this.count):t}_track=()=>{let t,e,i,s;t=Date.now(),e=t-this.timestamp,this.timestamp=t,i=this.offset-this.frame,this.frame=this.offset,s=1e3*i/(1+e),this.velocity=.8*s+.2*this.velocity};_autoScroll=()=>{let t,e;this.amplitude&&(t=Date.now()-this.timestamp,e=this.amplitude*Math.exp(-t/this.options.duration),e>2||e<-2?(this._scroll(this.target-e),requestAnimationFrame(this._autoScroll)):this._scroll(this.target))};_scroll(t=0){let e,i,s,n,r,o,a,l,h,c;this.el.classList.contains("scrolling")||this.el.classList.add("scrolling"),null!=this.scrollingTimeout&&window.clearTimeout(this.scrollingTimeout),this.scrollingTimeout=window.setTimeout((()=>{this.el.classList.remove("scrolling")}),this.options.duration);let d=this.center,u=1/this.options.numVisible;if(this.offset="number"==typeof t?t:this.offset,this.center=Math.floor((this.offset+this.dim/2)/this.dim),s=this.offset-this.center*this.dim,n=s<0?1:-1,r=-n*s*2/this.dim,i=this.count>>1,this.options.fullWidth?(a="translateX(0)",c=1):(a="translateX("+(this.el.clientWidth-this.itemWidth)/2+"px) ",a+="translateY("+(this.el.clientHeight-this.itemHeight)/2+"px)",c=1-u*r),this.showIndicators){const t=this.center%this.count,e=this._indicators.querySelector(".indicator-item.active");if([...e.parentNode.children].indexOf(e)!==t){e.classList.remove("active");const i=t<0?this.count+t:t;this._indicators.querySelectorAll(".indicator-item")[i].classList.add("active")}}if(!this.noWrap||this.center>=0&&this.center<this.count){o=this.images[this._wrap(this.center)],o.classList.contains("active")||(this.el.querySelector(".carousel-item").classList.remove("active"),o.classList.add("active"));let t=`${a} translateX(${-s/2}px) translateX(${n*this.options.shift*r*e}px) translateZ(${this.options.dist*r}px)`;this._updateItemStyle(o,c,0,t)}for(e=1;e<=i;++e){if(this.options.fullWidth?(l=this.options.dist,h=e===i&&s<0?1-r:1):(l=this.options.dist*(2*e+r*n),h=1-u*(2*e+r*n)),!this.noWrap||this.center+e<this.count){o=this.images[this._wrap(this.center+e)];let t=`${a} translateX(${this.options.shift+(this.dim*e-s)/2}px) translateZ(${l}px)`;this._updateItemStyle(o,h,-e,t)}if(this.options.fullWidth?(l=this.options.dist,h=e===i&&s>0?1-r:1):(l=this.options.dist*(2*e-r*n),h=1-u*(2*e-r*n)),!this.noWrap||this.center-e>=0){o=this.images[this._wrap(this.center-e)];let t=`${a} translateX(${-this.options.shift+(-this.dim*e-s)/2}px) translateZ(${l}px)`;this._updateItemStyle(o,h,-e,t)}}if(!this.noWrap||this.center>=0&&this.center<this.count){o=this.images[this._wrap(this.center)];let t=`${a} translateX(${-s/2}px) translateX(${n*this.options.shift*r}px) translateZ(${this.options.dist*r}px)`;this._updateItemStyle(o,c,0,t)}const p=this.el.querySelectorAll(".carousel-item")[this._wrap(this.center)];d!==this.center&&"function"==typeof this.options.onCycleTo&&this.options.onCycleTo.call(this,p,this.dragged),"function"==typeof this.oneTimeCallback&&(this.oneTimeCallback.call(this,p,this.dragged),this.oneTimeCallback=null)}_updateItemStyle(t,e,i,s){t.style[this.xform]=s,t.style.zIndex=i.toString(),t.style.opacity=e.toString(),t.style.visibility="visible"}_cycleTo(t,e=null){let i=this.center%this.count-t;this.noWrap||(i<0?Math.abs(i+this.count)<Math.abs(i)&&(i+=this.count):i>0&&Math.abs(i-this.count)<i&&(i-=this.count)),this.target=this.dim*Math.round(this.offset/this.dim),i<0?this.target+=this.dim*Math.abs(i):i>0&&(this.target-=this.dim*i),"function"==typeof e&&(this.oneTimeCallback=e),this.offset!==this.target&&(this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this._autoScroll))}next(t=1){(void 0===t||isNaN(t))&&(t=1);let e=this.center+t;if(e>=this.count||e<0){if(this.noWrap)return;e=this._wrap(e)}this._cycleTo(e)}prev(t=1){(void 0===t||isNaN(t))&&(t=1);let e=this.center-t;if(e>=this.count||e<0){if(this.noWrap)return;e=this._wrap(e)}this._cycleTo(e)}set(t,e){if((void 0===t||isNaN(t))&&(t=0),t>this.count||t<0){if(this.noWrap)return;t=this._wrap(t)}this._cycleTo(t,e)}}let p={data:[],placeholder:"",secondaryPlaceholder:"",closeIconClass:"material-icons",autocompleteOptions:{},autocompleteOnly:!1,limit:1/0,onChipAdd:null,onChipSelect:null,onChipDelete:null};function m(t){return[...t.parentNode.children].indexOf(t)}class f extends n{chipsData;hasAutocomplete;autocomplete;_input;_label;_chips;static _keydown;_selectedChip;constructor(t,e){super(t,e,f),this.el.M_Chips=this,this.options={...f.defaults,...e},this.el.classList.add("chips","input-field"),this.chipsData=[],this._chips=[],this._setupInput(),this.hasAutocomplete=Object.keys(this.options.autocompleteOptions).length>0,this._input.getAttribute("id")||this._input.setAttribute("id",s.guid()),this.options.data.length&&(this.chipsData=this.options.data,this._renderChips()),this.hasAutocomplete&&this._setupAutocomplete(),this._setPlaceholder(),this._setupLabel(),this._setupEventHandlers()}static get defaults(){return p}static init(t,e={}){return super.init(t,e,f)}static getInstance(t){return t.M_Chips}getData(){return this.chipsData}destroy(){this._removeEventHandlers(),this._chips.forEach((t=>t.remove())),this._chips=[],this.el.M_Chips=void 0}_setupEventHandlers(){this.el.addEventListener("click",this._handleChipClick),document.addEventListener("keydown",f._handleChipsKeydown),document.addEventListener("keyup",f._handleChipsKeyup),this.el.addEventListener("blur",f._handleChipsBlur,!0),this._input.addEventListener("focus",this._handleInputFocus),this._input.addEventListener("blur",this._handleInputBlur),this._input.addEventListener("keydown",this._handleInputKeydown)}_removeEventHandlers(){this.el.removeEventListener("click",this._handleChipClick),document.removeEventListener("keydown",f._handleChipsKeydown),document.removeEventListener("keyup",f._handleChipsKeyup),this.el.removeEventListener("blur",f._handleChipsBlur,!0),this._input.removeEventListener("focus",this._handleInputFocus),this._input.removeEventListener("blur",this._handleInputBlur),this._input.removeEventListener("keydown",this._handleInputKeydown)}_handleChipClick=t=>{const e=t.target.closest(".chip"),i=t.target.classList.contains("close");if(e){const t=[...e.parentNode.children].indexOf(e);i?(this.deleteChip(t),this._input.focus()):this.selectChip(t)}else this._input.focus()};static _handleChipsKeydown(t){f._keydown=!0;const e=t.target.closest(".chips"),i=t.target&&e,n=t.target.tagName;if("INPUT"===n||"TEXTAREA"===n||!i)return;const r=e.M_Chips;if(s.keys.BACKSPACE.includes(t.key)||s.keys.DELETE.includes(t.key)){t.preventDefault();let e=r.chipsData.length;if(r._selectedChip){const t=m(r._selectedChip);r.deleteChip(t),r._selectedChip=null,e=Math.max(t-1,0)}r.chipsData.length?r.selectChip(e):r._input.focus()}else if(s.keys.ARROW_LEFT.includes(t.key)){if(r._selectedChip){const t=m(r._selectedChip)-1;if(t<0)return;r.selectChip(t)}}else if(s.keys.ARROW_RIGHT.includes(t.key)&&r._selectedChip){const t=m(r._selectedChip)+1;t>=r.chipsData.length?r._input.focus():r.selectChip(t)}}static _handleChipsKeyup(t){f._keydown=!1}static _handleChipsBlur(t){!f._keydown&&document.hidden&&(t.target.closest(".chips").M_Chips._selectedChip=null)}_handleInputFocus=()=>{this.el.classList.add("focus")};_handleInputBlur=()=>{this.el.classList.remove("focus")};_handleInputKeydown=t=>{if(f._keydown=!0,s.keys.ENTER.includes(t.key)){if(this.hasAutocomplete&&this.autocomplete&&this.autocomplete.isOpen)return;t.preventDefault(),(!this.hasAutocomplete||this.hasAutocomplete&&!this.options.autocompleteOnly)&&this.addChip({id:this._input.value}),this._input.value=""}else(s.keys.BACKSPACE.includes(t.key)||s.keys.ARROW_LEFT.includes(t.key))&&""===this._input.value&&this.chipsData.length&&(t.preventDefault(),this.selectChip(this.chipsData.length-1))};_renderChip(t){if(!t.id)return;const e=document.createElement("div");e.classList.add("chip"),e.innerText=t.text||t.id,e.setAttribute("tabindex","0");const i=document.createElement("i");if(i.classList.add(this.options.closeIconClass,"close"),i.innerText="close",t.image){const i=document.createElement("img");i.setAttribute("src",t.image),e.insertBefore(i,e.firstChild)}return e.appendChild(i),e}_renderChips(){this._chips=[];for(let t=0;t<this.chipsData.length;t++){const e=this._renderChip(this.chipsData[t]);this.el.appendChild(e),this._chips.push(e)}this.el.append(this._input)}_setupAutocomplete(){this.options.autocompleteOptions.onAutocomplete=t=>{t.length>0&&this.addChip({id:t[0].id,text:t[0].text,image:t[0].image}),this._input.value="",this._input.focus()},this.autocomplete=l.init(this._input,this.options.autocompleteOptions)}_setupInput(){this._input=this.el.querySelector("input"),this._input||(this._input=document.createElement("input"),this.el.append(this._input)),this._input.classList.add("input")}_setupLabel(){this._label=this.el.querySelector("label"),this._label&&this._label.setAttribute("for",this._input.getAttribute("id"))}_setPlaceholder(){void 0!==this.chipsData&&!this.chipsData.length&&this.options.placeholder?this._input.placeholder=this.options.placeholder:(void 0===this.chipsData||this.chipsData.length)&&this.options.secondaryPlaceholder&&(this._input.placeholder=this.options.secondaryPlaceholder)}_isValidAndNotExist(t){const e=!!t.id,i=!this.chipsData.some((e=>e.id==t.id));return e&&i}addChip(t){if(!this._isValidAndNotExist(t)||this.chipsData.length>=this.options.limit)return;const e=this._renderChip(t);this._chips.push(e),this.chipsData.push(t),this._input.before(e),this._setPlaceholder(),"function"==typeof this.options.onChipAdd&&this.options.onChipAdd(this.el,e)}deleteChip(t){const e=this._chips[t];this._chips[t].remove(),this._chips.splice(t,1),this.chipsData.splice(t,1),this._setPlaceholder(),"function"==typeof this.options.onChipDelete&&this.options.onChipDelete(this.el,e)}selectChip(t){const e=this._chips[t];this._selectedChip=e,e.focus(),"function"==typeof this.options.onChipSelect&&this.options.onChipSelect(this.el,e)}static Init(){"undefined"!=typeof document&&document.addEventListener("DOMContentLoaded",(()=>{document.body.addEventListener("click",(t=>{if(t.target.closest(".chip .close")){const e=t.target.closest(".chips");if(e&&null==e.M_Chips)return;t.target.closest(".chip").remove()}}))}))}static{f._keydown=!1}}const g={opacity:.5,inDuration:250,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,preventScrolling:!0,dismissible:!0,startingTop:"4%",endingTop:"10%"};class y extends n{static _modalsOpen;static _count;id;isOpen;_openingTrigger;_overlay;_nthModalOpened;constructor(t,e){super(t,e,y),this.el.M_Modal=this,this.options={...y.defaults,...e},this.isOpen=!1,this.id=this.el.id,this._openingTrigger=void 0,this._overlay=document.createElement("div"),this._overlay.classList.add("modal-overlay"),this.el.tabIndex=0,this._nthModalOpened=0,y._count++,this._setupEventHandlers()}static get defaults(){return g}static init(t,e={}){return super.init(t,e,y)}static getInstance(t){return t.M_Modal}destroy(){y._count--,this._removeEventHandlers(),this.el.removeAttribute("style"),this._overlay.remove(),this.el.M_Modal=void 0}_setupEventHandlers(){1===y._count&&document.body.addEventListener("click",this._handleTriggerClick),this._overlay.addEventListener("click",this._handleOverlayClick),this.el.addEventListener("click",this._handleModalCloseClick)}_removeEventHandlers(){0===y._count&&document.body.removeEventListener("click",this._handleTriggerClick),this._overlay.removeEventListener("click",this._handleOverlayClick),this.el.removeEventListener("click",this._handleModalCloseClick)}_handleTriggerClick=t=>{const e=t.target.closest(".modal-trigger");if(!e)return;const i=s.getIdFromTrigger(e),n=document.getElementById(i).M_Modal;n&&n.open(e),t.preventDefault()};_handleOverlayClick=()=>{this.options.dismissible&&this.close()};_handleModalCloseClick=t=>{t.target.closest(".modal-close")&&this.close()};_handleKeydown=t=>{s.keys.ESC.includes(t.key)&&this.options.dismissible&&this.close()};_handleFocus=t=>{this.el.contains(t.target)||this._nthModalOpened!==y._modalsOpen||this.el.focus()};_animateIn(){this._overlay.style.display="block",this._overlay.style.opacity="0",this.el.style.display="block",this.el.style.opacity="0";const t=this.options.inDuration,e=this.el.classList.contains("bottom-sheet");e||(this.el.style.top=this.options.startingTop,this.el.style.transform="scaleX(0.9) scaleY(0.9)"),this._overlay.style.transition=`opacity ${t}ms ease-out`,this.el.style.transition=`\n      top ${t}ms ease-out,\n      bottom ${t}ms ease-out,\n      opacity ${t}ms ease-out,\n      transform ${t}ms ease-out\n    `,setTimeout((()=>{this._overlay.style.opacity=this.options.opacity.toString(),this.el.style.opacity="1",e?this.el.style.bottom="0":(this.el.style.top=this.options.endingTop,this.el.style.transform="scaleX(1) scaleY(1)"),setTimeout((()=>{"function"==typeof this.options.onOpenEnd&&this.options.onOpenEnd.call(this,this.el,this._openingTrigger)}),t)}),1)}_animateOut(){const t=this.options.outDuration,e=this.el.classList.contains("bottom-sheet");e||(this.el.style.top=this.options.endingTop),this._overlay.style.transition=`opacity ${t}ms ease-out`,this.el.style.transition=`\n      top ${t}ms ease-out,\n      bottom ${t}ms ease-out,\n      opacity ${t}ms ease-out,\n      transform ${t}ms ease-out\n    `,setTimeout((()=>{this._overlay.style.opacity="0",this.el.style.opacity="0",e?this.el.style.bottom="-100%":(this.el.style.top=this.options.startingTop,this.el.style.transform="scaleX(0.9) scaleY(0.9)"),setTimeout((()=>{this.el.style.display="none",this._overlay.remove(),"function"==typeof this.options.onCloseEnd&&this.options.onCloseEnd.call(this,this.el)}),t)}),1)}open=t=>{if(!this.isOpen){if(this.isOpen=!0,y._modalsOpen++,this._nthModalOpened=y._modalsOpen,this._overlay.style.zIndex=(1e3+2*y._modalsOpen).toString(),this.el.style.zIndex=(1e3+2*y._modalsOpen+1).toString(),this._openingTrigger=t||void 0,"function"==typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el,this._openingTrigger),this.options.preventScrolling&&document.documentElement.scrollHeight>document.documentElement.clientHeight){const t=document.documentElement.scrollTop;document.documentElement.style.top="-"+t+"px",document.documentElement.classList.add("noscroll")}return this.el.classList.add("open"),this.el.insertAdjacentElement("afterend",this._overlay),this.options.dismissible&&(document.addEventListener("keydown",this._handleKeydown),document.addEventListener("focus",this._handleFocus,!0)),this._animateIn(),this.el.focus(),this}};close=()=>{if(this.isOpen){if(this.isOpen=!1,y._modalsOpen--,this._nthModalOpened=0,"function"==typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),this.el.classList.remove("open"),0===y._modalsOpen){const t=-parseInt(document.documentElement.style.top);document.documentElement.style.removeProperty("top"),document.documentElement.classList.remove("noscroll"),document.documentElement.scrollTop=t}return this.options.dismissible&&(document.removeEventListener("keydown",this._handleKeydown),document.removeEventListener("focus",this._handleFocus,!0)),this._animateOut(),this}};static create(t=""){return`<dialog id="modal1" class="modal">\n      <div class="modal-content">\n        <h4>${t}</h4>\n        <p>A bunch of text</p>\n      </div>\n      <div class="modal-footer">\n        <a href="#!" class="modal-close waves-effect btn-flat">Agree</a>\n      </div>\n    </dialog>`}static{y._modalsOpen=0,y._count=0}}let _={classes:"",dropdownOptions:{}};class v extends n{isMultiple;labelEl;dropdownOptions;input;dropdown;wrapper;selectOptions;_values;constructor(t,e){super(t,e,v),this.el.classList.contains("browser-default")||(this.el.M_FormSelect=this,this.options={...v.defaults,...e},this.isMultiple=this.el.multiple,this.el.tabIndex=-1,this._values=[],this._setupDropdown(),this._setupEventHandlers())}static get defaults(){return _}static init(t,e={}){return super.init(t,e,v)}static getInstance(t){return t.M_FormSelect}destroy(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_FormSelect=void 0}_setupEventHandlers(){this.dropdownOptions.querySelectorAll("li:not(.optgroup)").forEach((t=>{t.addEventListener("click",this._handleOptionClick),t.addEventListener("keydown",(t=>{" "!==t.key&&"Enter"!==t.key||this._handleOptionClick(t)}))})),this.el.addEventListener("change",this._handleSelectChange),this.input.addEventListener("click",this._handleInputClick)}_removeEventHandlers(){this.dropdownOptions.querySelectorAll("li:not(.optgroup)").forEach((t=>{t.removeEventListener("click",this._handleOptionClick)})),this.el.removeEventListener("change",this._handleSelectChange),this.input.removeEventListener("click",this._handleInputClick)}_handleSelectChange=()=>{this._setValueToInput()};_handleOptionClick=t=>{t.preventDefault();const e=t.target.closest("li");this._selectOptionElement(e),t.stopPropagation()};_arraysEqual(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}_selectOptionElement(t){if(!t.classList.contains("disabled")&&!t.classList.contains("optgroup")){const e=this._values.find((e=>e.optionEl===t)),i=this.getSelectedValues();this.isMultiple?this._toggleEntryFromArray(e):(this._deselectAll(),this._selectValue(e)),this._setValueToInput();const s=this.getSelectedValues();!this._arraysEqual(i,s)&&this.el.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0,composed:!0}))}this.isMultiple||this.dropdown.close()}_handleInputClick=()=>{this.dropdown&&this.dropdown.isOpen&&(this._setValueToInput(),this._setSelectedStates())};_setupDropdown(){this.labelEl=document.querySelector('[for="'+this.el.id+'"]'),this.labelEl&&(this.labelEl.style.display="none"),this.wrapper=document.createElement("div"),this.wrapper.classList.add("select-wrapper","input-field"),this.options.classes.length>0&&this.wrapper.classList.add(...this.options.classes.split(" ")),this.el.before(this.wrapper);const t=document.createElement("div");t.classList.add("hide-select"),this.wrapper.append(t),t.appendChild(this.el),this.el.disabled&&this.wrapper.classList.add("disabled"),this.selectOptions=Array.from(this.el.children).filter((t=>["OPTION","OPTGROUP"].includes(t.tagName))),this.dropdownOptions=document.createElement("ul"),this.dropdownOptions.id=`select-options-${s.guid()}`,this.dropdownOptions.classList.add("dropdown-content","select-dropdown"),this.dropdownOptions.setAttribute("role","listbox"),this.dropdownOptions.ariaMultiSelectable=this.isMultiple.toString(),this.isMultiple&&this.dropdownOptions.classList.add("multiple-select-dropdown"),this.selectOptions.length>0&&this.selectOptions.forEach((t=>{if("OPTION"===t.tagName){const e=this._createAndAppendOptionWithIcon(t,this.isMultiple?"multiple":void 0);this._addOptionToValues(t,e)}else if("OPTGROUP"===t.tagName){const e="opt-group-"+s.guid(),i=document.createElement("li");i.classList.add("optgroup"),i.tabIndex=-1,i.setAttribute("role","group"),i.setAttribute("aria-labelledby",e),i.innerHTML=`<span id="${e}" role="presentation">${t.getAttribute("label")}</span>`,this.dropdownOptions.append(i);const n=[];Array.from(t.children).filter((t=>"OPTION"===t.tagName)).forEach((t=>{const e=this._createAndAppendOptionWithIcon(t,"optgroup-option"),i="opt-child-"+s.guid();e.id=i,n.push(i),this._addOptionToValues(t,e)})),i.setAttribute("aria-owns",n.join(" "))}})),this.wrapper.append(this.dropdownOptions),this.input=document.createElement("input"),this.input.id="m_select-input-"+s.guid(),this.input.classList.add("select-dropdown","dropdown-trigger"),this.input.type="text",this.input.readOnly=!0,this.input.setAttribute("data-target",this.dropdownOptions.id),this.input.ariaReadOnly="true",this.input.ariaRequired=this.el.hasAttribute("required").toString(),this.el.disabled&&(this.input.disabled=!0);const e=this.el.attributes;for(let t=0;t<e.length;++t){const i=e[t];i.name.startsWith("aria-")&&this.input.setAttribute(i.name,i.value)}this.input.setAttribute("role","combobox"),this.input.ariaExpanded="false",this.input.setAttribute("aria-owns",this.dropdownOptions.id),this.input.setAttribute("aria-controls",this.dropdownOptions.id),this.input.placeholder=" ",this.wrapper.prepend(this.input),this._setValueToInput();const i=document.createElementNS("http://www.w3.org/2000/svg","svg");if(i.classList.add("caret"),i.setAttribute("height","24"),i.setAttribute("width","24"),i.setAttribute("viewBox","0 0 24 24"),i.ariaHidden="true",i.innerHTML='<path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/>',this.wrapper.prepend(i),!this.el.disabled){const t={...this.options.dropdownOptions};t.coverTrigger=!1;const e=t.onOpenEnd,i=t.onCloseEnd;t.onOpenEnd=t=>{const i=this.dropdownOptions.querySelector(".selected");if(i&&(s.keyDown=!0,this.dropdown.focusedIndex=[...i.parentNode.children].indexOf(i),this.dropdown._focusFocusedItem(),s.keyDown=!1,this.dropdown.isScrollable)){let t=i.getBoundingClientRect().top-this.dropdownOptions.getBoundingClientRect().top;t-=this.dropdownOptions.clientHeight/2,this.dropdownOptions.scrollTop=t}this.input.ariaExpanded="true",e&&"function"==typeof e&&e.call(this.dropdown,this.el)},t.onCloseEnd=t=>{this.input.ariaExpanded="false",i&&"function"==typeof i&&i.call(this.dropdown,this.el)},t.closeOnClick=!1,this.dropdown=o.init(this.input,t)}if(this._setSelectedStates(),this.labelEl){const t=document.createElement("label");t.htmlFor=this.input.id,t.innerText=this.labelEl.innerText,this.input.after(t)}}_addOptionToValues(t,e){this._values.push({el:t,optionEl:e})}_removeDropdown(){this.wrapper.querySelector(".caret").remove(),this.input.remove(),this.dropdownOptions.remove(),this.wrapper.before(this.el),this.wrapper.remove()}_createAndAppendOptionWithIcon(t,e){const i=document.createElement("li");i.setAttribute("role","option"),t.disabled&&(i.classList.add("disabled"),i.ariaDisabled="true"),"optgroup-option"===e&&i.classList.add(e);const s=document.createElement("span");s.innerHTML=t.innerHTML,this.isMultiple&&!t.disabled&&(s.innerHTML=`<label><input type="checkbox"><span>${t.innerHTML}</span></label>`),i.appendChild(s);const n=t.getAttribute("data-icon"),r=t.getAttribute("class")?.split(" ");if(n){const t=document.createElement("img");r&&t.classList.add(...r),t.src=n,t.ariaHidden="true",i.prepend(t)}return this.dropdownOptions.append(i),i}_selectValue(t){t.el.selected=!0,t.optionEl.classList.add("selected"),t.optionEl.ariaSelected="true";const e=t.optionEl.querySelector('input[type="checkbox"]');e&&(e.checked=!0)}_deselectValue(t){t.el.selected=!1,t.optionEl.classList.remove("selected"),t.optionEl.ariaSelected="false";const e=t.optionEl.querySelector('input[type="checkbox"]');e&&(e.checked=!1)}_deselectAll(){this._values.forEach((t=>this._deselectValue(t)))}_isValueSelected(t){return this.getSelectedValues().some((e=>e===t.el.value))}_toggleEntryFromArray(t){this._isValueSelected(t)?this._deselectValue(t):this._selectValue(t)}_getSelectedOptions(){return Array.prototype.filter.call(this.el.selectedOptions,(t=>t))}_setValueToInput(){const t=this._getSelectedOptions(),e=this._values.filter((e=>t.indexOf(e.el)>=0)).filter((t=>!t.el.disabled)).map((t=>t.optionEl.querySelector("span").innerText.trim()));if(0===e.length){const t=this.el.querySelector("option:disabled");if(t&&""===t.value)return void(this.input.value=t.innerText)}this.input.value=e.join(", ")}_setSelectedStates(){this._values.forEach((t=>{const e=t.el.selected,i=t.optionEl.querySelector('input[type="checkbox"]');i&&(i.checked=e),e?this._activateOption(this.dropdownOptions,t.optionEl):(t.optionEl.classList.remove("selected"),t.optionEl.ariaSelected="false")}))}_activateOption(t,e){e&&(this.isMultiple||t.querySelectorAll("li.selected").forEach((t=>t.classList.remove("selected"))),e.classList.add("selected"),e.ariaSelected="true")}getSelectedValues(){return this._getSelectedOptions().map((t=>t.value))}}let w={autoClose:!1,format:"mmm dd, yyyy",parse:null,defaultDate:null,setDefaultDate:!1,disableWeekends:!1,disableDayFn:null,firstDay:0,minDate:null,maxDate:null,yearRange:10,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearRangeReverse:!1,showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,container:null,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok",previousMonth:"",nextMonth:"",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysAbbrev:["S","M","T","W","T","F","S"]},events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null};class b extends n{id;isOpen;modal;calendarEl;clearBtn;doneBtn;cancelBtn;modalEl;yearTextEl;dateTextEl;date;formats;calendars;_y;_m;static _template;constructor(t,e){super(t,e,b),this.el.M_Datepicker=this,this.options={...b.defaults,...e},e&&e.hasOwnProperty("i18n")&&"object"==typeof e.i18n&&(this.options.i18n={...b.defaults.i18n,...e.i18n}),this.options.minDate&&this.options.minDate.setHours(0,0,0,0),this.options.maxDate&&this.options.maxDate.setHours(0,0,0,0),this.id=s.guid(),this._setupVariables(),this._insertHTMLIntoDOM(),this._setupModal(),this._setupEventHandlers(),this.options.defaultDate||(this.options.defaultDate=new Date(Date.parse(this.el.value)));let i=this.options.defaultDate;b._isDate(i)?this.options.setDefaultDate?(this.setDate(i,!0),this.setInputValue()):this.gotoDate(i):this.gotoDate(new Date),this.isOpen=!1}static get defaults(){return w}static init(t,e={}){return super.init(t,e,b)}static _isDate(t){return/Date/.test(Object.prototype.toString.call(t))&&!isNaN(t.getTime())}static _isWeekend(t){let e=t.getDay();return 0===e||6===e}static _setToStartOfDay(t){b._isDate(t)&&t.setHours(0,0,0,0)}static _getDaysInMonth(t,e){return[31,b._isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]}static _isLeapYear(t){return t%4==0&&t%100!=0||t%400==0}static _compareDates(t,e){return t.getTime()===e.getTime()}static getInstance(t){return t.M_Datepicker}destroy(){this._removeEventHandlers(),this.modal.destroy(),this.modalEl.remove(),this.destroySelects(),this.el.M_Datepicker=void 0}destroySelects(){let t=this.calendarEl.querySelector(".orig-select-year");t&&v.getInstance(t).destroy();let e=this.calendarEl.querySelector(".orig-select-month");e&&v.getInstance(e).destroy()}_insertHTMLIntoDOM(){if(this.options.showClearBtn&&(this.clearBtn.style.visibility="",this.clearBtn.innerText=this.options.i18n.clear),this.doneBtn.innerText=this.options.i18n.done,this.cancelBtn.innerText=this.options.i18n.cancel,this.options.container){const t=this.options.container;this.options.container=t instanceof HTMLElement?t:document.querySelector(t),this.options.container.append(this.modalEl)}else this.el.parentElement.appendChild(this.modalEl)}_setupModal(){this.modalEl.id="modal-"+this.id,this.modal=y.init(this.modalEl,{onCloseEnd:()=>{this.isOpen=!1}})}toString(t=null){return"function"==typeof(t=t||this.options.format)?t(this.date):b._isDate(this.date)?t.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g).map((t=>this.formats[t]?this.formats[t]():t)).join(""):""}setDate(t=null,e=!1){if(!t)return this.date=null,this._renderDateDisplay(),this.draw();if("string"==typeof t&&(t=new Date(Date.parse(t))),!b._isDate(t))return;let i=this.options.minDate,s=this.options.maxDate;b._isDate(i)&&t<i?t=i:b._isDate(s)&&t>s&&(t=s),this.date=new Date(t.getTime()),this._renderDateDisplay(),b._setToStartOfDay(this.date),this.gotoDate(this.date),e||"function"!=typeof this.options.onSelect||this.options.onSelect.call(this,this.date)}setInputValue(){this.el.value=this.toString(),this.el.dispatchEvent(new CustomEvent("change",{bubbles:!0,cancelable:!0,composed:!0,detail:{firedBy:this}}))}_renderDateDisplay(){let t=b._isDate(this.date)?this.date:new Date,e=this.options.i18n,i=e.weekdaysShort[t.getDay()],s=e.monthsShort[t.getMonth()],n=t.getDate();this.yearTextEl.innerHTML=t.getFullYear().toString(),this.dateTextEl.innerHTML=`${i}, ${s} ${n}`}gotoDate(t){let e=!0;if(b._isDate(t)){if(this.calendars){let i=new Date(this.calendars[0].year,this.calendars[0].month,1),s=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),n=t.getTime();s.setMonth(s.getMonth()+1),s.setDate(s.getDate()-1),e=n<i.getTime()||s.getTime()<n}e&&(this.calendars=[{month:t.getMonth(),year:t.getFullYear()}]),this.adjustCalendars()}}adjustCalendars(){this.calendars[0]=this.adjustCalendar(this.calendars[0]),this.draw()}adjustCalendar(t){return t.month<0&&(t.year-=Math.ceil(Math.abs(t.month)/12),t.month+=12),t.month>11&&(t.year+=Math.floor(Math.abs(t.month)/12),t.month-=12),t}nextMonth(){this.calendars[0].month++,this.adjustCalendars()}prevMonth(){this.calendars[0].month--,this.adjustCalendars()}render(t,e,i){let s=this.options,n=new Date,r=b._getDaysInMonth(t,e),o=new Date(t,e,1).getDay(),a=[],l=[];b._setToStartOfDay(n),s.firstDay>0&&(o-=s.firstDay,o<0&&(o+=7));let h=0===e?11:e-1,c=11===e?0:e+1,d=0===e?t-1:t,u=11===e?t+1:t,p=b._getDaysInMonth(d,h),m=r+o,f=m;for(;f>7;)f-=7;m+=7-f;let g=!1;for(let i=0,f=0;i<m;i++){let m=new Date(t,e,i-o+1),y=!!b._isDate(this.date)&&b._compareDates(m,this.date),_=b._compareDates(m,n),v=-1!==s.events.indexOf(m.toDateString()),w=i<o||i>=r+o,x=i-o+1,E=e,k=t,C=s.startRange&&b._compareDates(s.startRange,m),L=s.endRange&&b._compareDates(s.endRange,m),T=s.startRange&&s.endRange&&s.startRange<m&&m<s.endRange;w&&(i<o?(x=p+x,E=h,k=d):(x-=r,E=c,k=u));let S={day:x,month:E,year:k,hasEvent:v,isSelected:y,isToday:_,isDisabled:s.minDate&&m<s.minDate||s.maxDate&&m>s.maxDate||s.disableWeekends&&b._isWeekend(m)||s.disableDayFn&&s.disableDayFn(m),isEmpty:w,isStartRange:C,isEndRange:L,isInRange:T,showDaysInNextAndPreviousMonths:s.showDaysInNextAndPreviousMonths};l.push(this.renderDay(S)),7==++f&&(a.push(this.renderRow(l,s.isRTL,g)),l=[],f=0,g=!1)}return this.renderTable(s,a,i)}renderDay(t){let e=[],i="false";if(t.isEmpty){if(!t.showDaysInNextAndPreviousMonths)return'<td class="is-empty"></td>';e.push("is-outside-current-month"),e.push("is-selection-disabled")}return t.isDisabled&&e.push("is-disabled"),t.isToday&&e.push("is-today"),t.isSelected&&(e.push("is-selected"),i="true"),t.hasEvent&&e.push("has-event"),t.isInRange&&e.push("is-inrange"),t.isStartRange&&e.push("is-startrange"),t.isEndRange&&e.push("is-endrange"),`<td data-day="${t.day}" class="${e.join(" ")}" aria-selected="${i}"><button class="datepicker-day-button" type="button" data-year="${t.year}" data-month="${t.month}" data-day="${t.day}">${t.day}</button></td>`}renderRow(t,e,i){return'<tr class="datepicker-row'+(i?" is-selected":"")+'">'+(e?t.reverse():t).join("")+"</tr>"}renderTable(t,e,i){return'<div class="datepicker-table-wrapper"><table cellpadding="0" cellspacing="0" class="datepicker-table" role="grid" aria-labelledby="'+i+'">'+this.renderHead(t)+this.renderBody(e)+"</table></div>"}renderHead(t){let e,i=[];for(e=0;e<7;e++)i.push(`<th scope="col"><abbr title="${this.renderDayName(t,e)}">${this.renderDayName(t,e,!0)}</abbr></th>`);return"<thead><tr>"+(t.isRTL?i.reverse():i).join("")+"</tr></thead>"}renderBody(t){return"<tbody>"+t.join("")+"</tbody>"}renderTitle(t,e,i,s,n,r){let o,a,l,h,c,d=this.options,u=i===d.minYear,p=i===d.maxYear,m='<div id="'+r+'" class="datepicker-controls" role="heading" aria-live="assertive">',f=!0,g=!0;for(l=[],o=0;o<12;o++)l.push('<option value="'+(i===n?o-e:12+o-e)+'"'+(o===s?' selected="selected"':"")+(u&&o<d.minMonth||p&&o>d.maxMonth?'disabled="disabled"':"")+">"+d.i18n.months[o]+"</option>");for(h='<select class="datepicker-select orig-select-month" tabindex="-1">'+l.join("")+"</select>",Array.isArray(d.yearRange)?(o=d.yearRange[0],a=d.yearRange[1]+1):(o=i-d.yearRange,a=1+i+d.yearRange),l=[];o<a&&o<=d.maxYear;o++)o>=d.minYear&&l.push(`<option value="${o}" ${o===i?'selected="selected"':""}>${o}</option>`);return d.yearRangeReverse&&l.reverse(),c=`<select class="datepicker-select orig-select-year" tabindex="-1">${l.join("")}</select>`,m+=`<button class="month-prev${f?"":" is-disabled"} btn-flat" type="button"><svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"/><path d="M0-.5h24v24H0z" fill="none"/></svg></button>`,m+='<div class="selects-container">',d.showMonthAfterYear?m+=c+h:m+=h+c,m+="</div>",u&&(0===s||d.minMonth>=s)&&(f=!1),p&&(11===s||d.maxMonth<=s)&&(g=!1),m+=`<button class="month-next${g?"":" is-disabled"} btn-flat" type="button"><svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"/><path d="M0-.25h24v24H0z" fill="none"/></svg></button>`,m+"</div>"}draw(t=!1){if(!this.isOpen&&!t)return;let e,i=this.options,s=i.minYear,n=i.maxYear,r=i.minMonth,o=i.maxMonth,a="";this._y<=s&&(this._y=s,!isNaN(r)&&this._m<r&&(this._m=r)),this._y>=n&&(this._y=n,!isNaN(o)&&this._m>o&&(this._m=o)),e="datepicker-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2);for(let t=0;t<1;t++)this._renderDateDisplay(),a+=this.renderTitle(this,t,this.calendars[t].year,this.calendars[t].month,this.calendars[0].year,e)+this.render(this.calendars[t].year,this.calendars[t].month,e);this.destroySelects(),this.calendarEl.innerHTML=a;let l=this.calendarEl.querySelector(".orig-select-year"),h=this.calendarEl.querySelector(".orig-select-month");v.init(l,{classes:"select-year",dropdownOptions:{container:document.body,constrainWidth:!1}}),v.init(h,{classes:"select-month",dropdownOptions:{container:document.body,constrainWidth:!1}}),l.addEventListener("change",this._handleYearChange),h.addEventListener("change",this._handleMonthChange),"function"==typeof this.options.onDraw&&this.options.onDraw.call(this)}_setupEventHandlers(){this.el.addEventListener("click",this._handleInputClick),this.el.addEventListener("keydown",this._handleInputKeydown),this.el.addEventListener("change",this._handleInputChange),this.calendarEl.addEventListener("click",this._handleCalendarClick),this.doneBtn.addEventListener("click",this._finishSelection),this.cancelBtn.addEventListener("click",this.close),this.options.showClearBtn&&this.clearBtn.addEventListener("click",this._handleClearClick)}_setupVariables(){const t=document.createElement("template");t.innerHTML=b._template.trim(),this.modalEl=t.content.firstChild,this.calendarEl=this.modalEl.querySelector(".datepicker-calendar"),this.yearTextEl=this.modalEl.querySelector(".year-text"),this.dateTextEl=this.modalEl.querySelector(".date-text"),this.options.showClearBtn&&(this.clearBtn=this.modalEl.querySelector(".datepicker-clear")),this.doneBtn=this.modalEl.querySelector(".datepicker-done"),this.cancelBtn=this.modalEl.querySelector(".datepicker-cancel"),this.formats={d:()=>this.date.getDate(),dd:()=>{let t=this.date.getDate();return(t<10?"0":"")+t},ddd:()=>this.options.i18n.weekdaysShort[this.date.getDay()],dddd:()=>this.options.i18n.weekdays[this.date.getDay()],m:()=>this.date.getMonth()+1,mm:()=>{let t=this.date.getMonth()+1;return(t<10?"0":"")+t},mmm:()=>this.options.i18n.monthsShort[this.date.getMonth()],mmmm:()=>this.options.i18n.months[this.date.getMonth()],yy:()=>(""+this.date.getFullYear()).slice(2),yyyy:()=>this.date.getFullYear()}}_removeEventHandlers(){this.el.removeEventListener("click",this._handleInputClick),this.el.removeEventListener("keydown",this._handleInputKeydown),this.el.removeEventListener("change",this._handleInputChange),this.calendarEl.removeEventListener("click",this._handleCalendarClick)}_handleInputClick=()=>{this.open()};_handleInputKeydown=t=>{s.keys.ENTER.includes(t.key)&&(t.preventDefault(),this.open())};_handleCalendarClick=t=>{if(!this.isOpen)return;const e=t.target;e.classList.contains("is-disabled")||(!e.classList.contains("datepicker-day-button")||e.classList.contains("is-empty")||e.parentElement.classList.contains("is-disabled")?e.closest(".month-prev")?this.prevMonth():e.closest(".month-next")&&this.nextMonth():(this.setDate(new Date(t.target.getAttribute("data-year"),t.target.getAttribute("data-month"),t.target.getAttribute("data-day"))),this.options.autoClose&&this._finishSelection()))};_handleClearClick=()=>{this.date=null,this.setInputValue(),this.close()};_handleMonthChange=t=>{this.gotoMonth(t.target.value)};_handleYearChange=t=>{this.gotoYear(t.target.value)};gotoMonth(t){isNaN(t)||(this.calendars[0].month=parseInt(t,10),this.adjustCalendars())}gotoYear(t){isNaN(t)||(this.calendars[0].year=parseInt(t,10),this.adjustCalendars())}_handleInputChange=t=>{let e;t.detail?.firedBy!==this&&(e=this.options.parse?this.options.parse(this.el.value,"function"==typeof this.options.format?this.options.format(new Date(this.el.value)):this.options.format):new Date(Date.parse(this.el.value)),b._isDate(e)&&this.setDate(e))};renderDayName(t,e,i=!1){for(e+=t.firstDay;e>=7;)e-=7;return i?t.i18n.weekdaysAbbrev[e]:t.i18n.weekdays[e]}_finishSelection=()=>{this.setInputValue(),this.close()};open=()=>{if(!this.isOpen)return this.isOpen=!0,"function"==typeof this.options.onOpen&&this.options.onOpen.call(this),this.draw(),this.modal.open(void 0),this};close=()=>{if(this.isOpen)return this.isOpen=!1,"function"==typeof this.options.onClose&&this.options.onClose.call(this),this.modal.close(),this};static{b._template='\n      <div class="modal datepicker-modal">\n        <div class="modal-content datepicker-container">\n          <div class="datepicker-date-display">\n            <span class="year-text"></span>\n            <span class="date-text"></span>\n          </div>\n          <div class="datepicker-calendar-container">\n            <div class="datepicker-calendar"></div>\n            <div class="datepicker-footer">\n              <button class="btn-flat datepicker-clear waves-effect" style="visibility: hidden;" type="button"></button>\n              <div class="confirmation-btns">\n                <button class="btn-flat datepicker-cancel waves-effect" type="button"></button>\n                <button class="btn-flat datepicker-done waves-effect" type="button"></button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>'}}class x{static textareaAutoResize(t){if(!t)return void console.error("No textarea element found");let e=document.querySelector(".hiddendiv");e||(e=document.createElement("div"),e.classList.add("hiddendiv","common"),document.body.append(e));const i=getComputedStyle(t),s=i.fontFamily,n=i.fontSize,r=i.lineHeight,o=i.paddingTop,a=i.paddingRight,l=i.paddingBottom,h=i.paddingLeft;n&&(e.style.fontSize=n),s&&(e.style.fontFamily=s),r&&(e.style.lineHeight=r),o&&(e.style.paddingTop=o),a&&(e.style.paddingRight=a),l&&(e.style.paddingBottom=l),h&&(e.style.paddingLeft=h),t.hasAttribute("original-height")||t.setAttribute("original-height",t.getBoundingClientRect().height.toString()),"off"===t.getAttribute("wrap")&&(e.style.overflowWrap="normal",e.style.whiteSpace="pre"),e.innerText=t.value+"\n";const c=e.innerHTML.replace(/\n/g,"<br>");e.innerHTML=c,t.offsetWidth>0&&t.offsetHeight>0?e.style.width=t.getBoundingClientRect().width+"px":e.style.width=window.innerWidth/2+"px";const d=parseInt(t.getAttribute("original-height")),u=parseInt(t.getAttribute("previous-length"));isNaN(d)||(d<=e.clientHeight?t.style.height=e.clientHeight+"px":t.value.length<u&&(t.style.height=d+"px"),t.setAttribute("previous-length",t.value.length.toString()))}static Init(){"undefined"!=typeof document&&document?.addEventListener("DOMContentLoaded",(()=>{document.addEventListener("keyup",(t=>{const e=t.target;e instanceof HTMLInputElement&&["radio","checkbox"].includes(e.type)&&s.keys.TAB.includes(t.key)&&(e.classList.add("tabbed"),e.addEventListener("blur",(t=>e.classList.remove("tabbed")),{once:!0}))})),document.querySelectorAll(".materialize-textarea").forEach((t=>{x.InitTextarea(t)})),document.querySelectorAll('.file-field input[type="file"]').forEach((t=>{x.InitFileInputPath(t)}))}))}static InitTextarea(t){t.setAttribute("original-height",t.getBoundingClientRect().height.toString()),t.setAttribute("previous-length",t.value.length.toString()),x.textareaAutoResize(t),t.addEventListener("keyup",(e=>x.textareaAutoResize(t))),t.addEventListener("keydown",(e=>x.textareaAutoResize(t)))}static InitFileInputPath(t){t.addEventListener("change",(e=>{const i=t.closest(".file-field").querySelector("input.file-path"),s=t.files,n=[];for(let t=0;t<s.length;t++)n.push(s[t].name);i.value=n.join(", "),i.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0,composed:!0}))}))}}let E={top:0,bottom:1/0,offset:0,onPositionChange:null};class k extends n{static _pushpins;originalOffset;constructor(t,e){super(t,e,k),this.el.M_Pushpin=this,this.options={...k.defaults,...e},this.originalOffset=this.el.offsetTop,k._pushpins.push(this),this._setupEventHandlers(),this._updatePosition()}static get defaults(){return E}static init(t,e={}){return super.init(t,e,k)}static getInstance(t){return t.M_Pushpin}destroy(){this.el.style.top=null,this._removePinClasses();let t=k._pushpins.indexOf(this);k._pushpins.splice(t,1),0===k._pushpins.length&&this._removeEventHandlers(),this.el.M_Pushpin=void 0}static _updateElements(){for(let t in k._pushpins)k._pushpins[t]._updatePosition()}_setupEventHandlers(){document.addEventListener("scroll",k._updateElements)}_removeEventHandlers(){document.removeEventListener("scroll",k._updateElements)}_updatePosition(){let t=s.getDocumentScrollTop()+this.options.offset;this.options.top<=t&&this.options.bottom>=t&&!this.el.classList.contains("pinned")&&(this._removePinClasses(),this.el.style.top=`${this.options.offset}px`,this.el.classList.add("pinned"),"function"==typeof this.options.onPositionChange&&this.options.onPositionChange.call(this,"pinned")),t<this.options.top&&!this.el.classList.contains("pin-top")&&(this._removePinClasses(),this.el.style.top="0",this.el.classList.add("pin-top"),"function"==typeof this.options.onPositionChange&&this.options.onPositionChange.call(this,"pin-top")),t>this.options.bottom&&!this.el.classList.contains("pin-bottom")&&(this._removePinClasses(),this.el.classList.add("pin-bottom"),this.el.style.top=this.options.bottom-this.originalOffset+"px","function"==typeof this.options.onPositionChange&&this.options.onPositionChange.call(this,"pin-bottom"))}_removePinClasses(){this.el.classList.remove("pin-top"),this.el.classList.remove("pinned"),this.el.classList.remove("pin-bottom")}static{k._pushpins=[]}}let C={throttle:100,scrollOffset:200,activeClass:"active",getActiveElement:t=>'a[href="#'+t+'"]'};class L extends n{static _elements;static _count;static _increment;tickId;id;static _elementsInView;static _visibleElements;static _ticks;constructor(t,e){super(t,e,L),this.el.M_ScrollSpy=this,this.options={...L.defaults,...e},L._elements.push(this),L._count++,L._increment++,this.tickId=-1,this.id=L._increment,this._setupEventHandlers(),this._handleWindowScroll()}static get defaults(){return C}static init(t,e={}){return super.init(t,e,L)}static getInstance(t){return t.M_ScrollSpy}destroy(){L._elements.splice(L._elements.indexOf(this),1),L._elementsInView.splice(L._elementsInView.indexOf(this),1),L._visibleElements.splice(L._visibleElements.indexOf(this.el),1),L._count--,this._removeEventHandlers(),document.querySelector(this.options.getActiveElement(this.el.id)).classList.remove(this.options.activeClass),this.el.M_ScrollSpy=void 0}_setupEventHandlers(){1===L._count&&(window.addEventListener("scroll",this._handleWindowScroll),window.addEventListener("resize",this._handleThrottledResize),document.body.addEventListener("click",this._handleTriggerClick))}_removeEventHandlers(){0===L._count&&(window.removeEventListener("scroll",this._handleWindowScroll),window.removeEventListener("resize",this._handleThrottledResize),document.body.removeEventListener("click",this._handleTriggerClick))}_handleThrottledResize=s.throttle((function(){this._handleWindowScroll()}),200).bind(this);_handleTriggerClick=t=>{const e=t.target;for(let i=L._elements.length-1;i>=0;i--){const s=L._elements[i];if(e===document.querySelector('a[href="#'+s.el.id+'"]')){t.preventDefault(),s.el.scrollIntoView({behavior:"smooth"});break}}};_handleWindowScroll=()=>{L._ticks++;let t=s.getDocumentScrollTop(),e=s.getDocumentScrollLeft(),i=e+window.innerWidth,n=t+window.innerHeight,r=L._findElements(t,i,n,e);for(let t=0;t<r.length;t++){let e=r[t];e.tickId<0&&e._enter(),e.tickId=L._ticks}for(let t=0;t<L._elementsInView.length;t++){let e=L._elementsInView[t],i=e.tickId;i>=0&&i!==L._ticks&&(e._exit(),e.tickId=-1)}L._elementsInView=r};static _offset(t){const e=t.getBoundingClientRect(),i=document.documentElement;return{top:e.top+window.pageYOffset-i.clientTop,left:e.left+window.pageXOffset-i.clientLeft}}static _findElements(t,e,i,s){let n=[];for(let r=0;r<L._elements.length;r++){let o=L._elements[r],a=t+o.options.scrollOffset||200;if(o.el.getBoundingClientRect().height>0){let t=L._offset(o.el).top,r=L._offset(o.el).left,l=r+o.el.getBoundingClientRect().width,h=t+o.el.getBoundingClientRect().height;!(r>e||l<s||t>i||h<a)&&n.push(o)}}return n}_enter(){if(L._visibleElements=L._visibleElements.filter((t=>0!==t.getBoundingClientRect().height)),L._visibleElements[0]){const t=document.querySelector(this.options.getActiveElement(L._visibleElements[0].id));t?.classList.remove(this.options.activeClass),L._visibleElements[0].M_ScrollSpy&&this.id<L._visibleElements[0].M_ScrollSpy.id?L._visibleElements.unshift(this.el):L._visibleElements.push(this.el)}else L._visibleElements.push(this.el);const t=this.options.getActiveElement(L._visibleElements[0].id);document.querySelector(t)?.classList.add(this.options.activeClass)}_exit(){if(L._visibleElements=L._visibleElements.filter((t=>0!==t.getBoundingClientRect().height)),L._visibleElements[0]){const t=document.querySelector(this.options.getActiveElement(L._visibleElements[0].id));if(t?.classList.remove(this.options.activeClass),L._visibleElements=L._visibleElements.filter((t=>t.id!=this.el.id)),L._visibleElements[0]){const t=this.options.getActiveElement(L._visibleElements[0].id);document.querySelector(t)?.classList.add(this.options.activeClass)}}}static{L._elements=[],L._elementsInView=[],L._visibleElements=[],L._count=0,L._increment=0,L._ticks=0}}const T={edge:"left",draggable:!0,dragTargetWidth:"10px",inDuration:250,outDuration:200,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,preventScrolling:!0};class S extends n{id;isOpen;isFixed;isDragged;lastWindowWidth;lastWindowHeight;static _sidenavs;_overlay;dragTarget;_startingXpos;_xPos;_time;_width;_initialScrollTop;_verticallyScrolling;deltaX;velocityX;percentOpen;constructor(t,e){super(t,e,S),this.el.M_Sidenav=this,this.options={...S.defaults,...e},this.id=this.el.id,this.isOpen=!1,this.isFixed=this.el.classList.contains("sidenav-fixed"),this.isDragged=!1,this.lastWindowWidth=window.innerWidth,this.lastWindowHeight=window.innerHeight,this._createOverlay(),this._createDragTarget(),this._setupEventHandlers(),this._setupClasses(),this._setupFixed(),S._sidenavs.push(this)}static get defaults(){return T}static init(t,e={}){return super.init(t,e,S)}static getInstance(t){return t.M_Sidenav}destroy(){this._removeEventHandlers(),this._enableBodyScrolling(),this._overlay.parentNode.removeChild(this._overlay),this.dragTarget.parentNode.removeChild(this.dragTarget),this.el.M_Sidenav=void 0,this.el.style.transform="";const t=S._sidenavs.indexOf(this);t>=0&&S._sidenavs.splice(t,1)}_createOverlay(){this._overlay=document.createElement("div"),this._overlay.classList.add("sidenav-overlay"),this._overlay.addEventListener("click",this.close),document.body.appendChild(this._overlay)}_setupEventHandlers(){0===S._sidenavs.length&&document.body.addEventListener("click",this._handleTriggerClick);var t=null;this.dragTarget.addEventListener("touchmove",this._handleDragTargetDrag,t),this.dragTarget.addEventListener("touchend",this._handleDragTargetRelease),this._overlay.addEventListener("touchmove",this._handleCloseDrag,t),this._overlay.addEventListener("touchend",this._handleCloseRelease),this.el.addEventListener("touchmove",this._handleCloseDrag,t),this.el.addEventListener("touchend",this._handleCloseRelease),this.el.addEventListener("click",this._handleCloseTriggerClick),this.isFixed&&window.addEventListener("resize",this._handleWindowResize)}_removeEventHandlers(){1===S._sidenavs.length&&document.body.removeEventListener("click",this._handleTriggerClick),this.dragTarget.removeEventListener("touchmove",this._handleDragTargetDrag),this.dragTarget.removeEventListener("touchend",this._handleDragTargetRelease),this._overlay.removeEventListener("touchmove",this._handleCloseDrag),this._overlay.removeEventListener("touchend",this._handleCloseRelease),this.el.removeEventListener("touchmove",this._handleCloseDrag),this.el.removeEventListener("touchend",this._handleCloseRelease),this.el.removeEventListener("click",this._handleCloseTriggerClick),this.isFixed&&window.removeEventListener("resize",this._handleWindowResize)}_handleTriggerClick(t){const e=t.target.closest(".sidenav-trigger");if(t.target&&e){const i=s.getIdFromTrigger(e),n=document.getElementById(i).M_Sidenav;n&&n.open(e),t.preventDefault()}}_startDrag(t){const e=t.targetTouches[0].clientX;this.isDragged=!0,this._startingXpos=e,this._xPos=this._startingXpos,this._time=Date.now(),this._width=this.el.getBoundingClientRect().width,this._overlay.style.display="block",this._initialScrollTop=this.isOpen?this.el.scrollTop:s.getDocumentScrollTop(),this._verticallyScrolling=!1}_dragMoveUpdate(t){const e=t.targetTouches[0].clientX,i=this.isOpen?this.el.scrollTop:s.getDocumentScrollTop();this.deltaX=Math.abs(this._xPos-e),this._xPos=e,this.velocityX=this.deltaX/(Date.now()-this._time),this._time=Date.now(),this._initialScrollTop!==i&&(this._verticallyScrolling=!0)}_handleDragTargetDrag=t=>{if(!this.options.draggable||this._isCurrentlyFixed()||this._verticallyScrolling)return;this.isDragged||this._startDrag(t),this._dragMoveUpdate(t);let e=this._xPos-this._startingXpos;const i=e>0?"right":"left";e=Math.min(this._width,Math.abs(e)),this.options.edge===i&&(e=0);let s=e,n="translateX(-100%)";"right"===this.options.edge&&(n="translateX(100%)",s=-s),this.percentOpen=Math.min(1,e/this._width),this.el.style.transform=`${n} translateX(${s}px)`,this._overlay.style.opacity=this.percentOpen.toString()};_handleDragTargetRelease=()=>{this.isDragged&&(this.percentOpen>.2?this.open():this._animateOut(),this.isDragged=!1,this._verticallyScrolling=!1)};_handleCloseDrag=t=>{if(this.isOpen){if(!this.options.draggable||this._isCurrentlyFixed()||this._verticallyScrolling)return;this.isDragged||this._startDrag(t),this._dragMoveUpdate(t);let e=this._xPos-this._startingXpos,i=e>0?"right":"left";e=Math.min(this._width,Math.abs(e)),this.options.edge!==i&&(e=0);let s=-e;"right"===this.options.edge&&(s=-s),this.percentOpen=Math.min(1,1-e/this._width),this.el.style.transform=`translateX(${s}px)`,this._overlay.style.opacity=this.percentOpen.toString()}};_handleCloseRelease=()=>{this.isOpen&&this.isDragged&&(this.percentOpen>.8?this._animateIn():this.close(),this.isDragged=!1,this._verticallyScrolling=!1)};_handleCloseTriggerClick=t=>{t.target.closest(".sidenav-close")&&!this._isCurrentlyFixed()&&this.close()};_handleWindowResize=()=>{this.lastWindowWidth!==window.innerWidth&&(window.innerWidth>992?this.open():this.close()),this.lastWindowWidth=window.innerWidth,this.lastWindowHeight=window.innerHeight};_setupClasses(){"right"===this.options.edge&&(this.el.classList.add("right-aligned"),this.dragTarget.classList.add("right-aligned"))}_removeClasses(){this.el.classList.remove("right-aligned"),this.dragTarget.classList.remove("right-aligned")}_setupFixed(){this._isCurrentlyFixed()&&this.open()}_isCurrentlyFixed(){return this.isFixed&&window.innerWidth>992}_createDragTarget(){const t=document.createElement("div");t.classList.add("drag-target"),t.style.width=this.options.dragTargetWidth,document.body.appendChild(t),this.dragTarget=t}_preventBodyScrolling(){document.body.style.overflow="hidden"}_enableBodyScrolling(){document.body.style.overflow=""}open=()=>{!0!==this.isOpen&&(this.isOpen=!0,"function"==typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el),this._isCurrentlyFixed()?(this.el.style.transform="translateX(0)",this._enableBodyScrolling(),this._overlay.style.display="none"):(this.options.preventScrolling&&this._preventBodyScrolling(),this.isDragged&&1==this.percentOpen||this._animateIn()))};close=()=>{if(!1!==this.isOpen)if(this.isOpen=!1,"function"==typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),this._isCurrentlyFixed()){const t="left"===this.options.edge?"-105%":"105%";this.el.style.transform=`translateX(${t})`}else this._enableBodyScrolling(),this.isDragged&&0==this.percentOpen?this._overlay.style.display="none":this._animateOut()};_animateIn(){this._animateSidenavIn(),this._animateOverlayIn()}_animateOut(){this._animateSidenavOut(),this._animateOverlayOut()}_animateSidenavIn(){let t="left"===this.options.edge?-1:1;this.isDragged&&(t="left"===this.options.edge?t+this.percentOpen:t-this.percentOpen);const e=this.options.inDuration;this.el.style.transition="none",this.el.style.transform="translateX("+100*t+"%)",setTimeout((()=>{this.el.style.transition=`transform ${e}ms ease`,this.el.style.transform="translateX(0)"}),1),setTimeout((()=>{"function"==typeof this.options.onOpenEnd&&this.options.onOpenEnd.call(this,this.el)}),e)}_animateSidenavOut(){const t="left"===this.options.edge?-1:1;this.isDragged&&(this.options.edge,this.percentOpen);const e=this.options.outDuration;this.el.style.transition=`transform ${e}ms ease`,this.el.style.transform="translateX("+100*t+"%)",setTimeout((()=>{"function"==typeof this.options.onCloseEnd&&this.options.onCloseEnd.call(this,this.el)}),e)}_animateOverlayIn(){let t=0;this.isDragged?t=this.percentOpen:this._overlay.style.display="block";const e=this.options.inDuration;this._overlay.style.transition="none",this._overlay.style.opacity=t.toString(),setTimeout((()=>{this._overlay.style.transition=`opacity ${e}ms ease`,this._overlay.style.opacity="1"}),1)}_animateOverlayOut(){const t=this.options.outDuration;this._overlay.style.transition=`opacity ${t}ms ease`,this._overlay.style.opacity="0",setTimeout((()=>{this._overlay.style.display="none"}),t)}static{S._sidenavs=[]}}let O={duration:300,onShow:null,swipeable:!1,responsiveThreshold:1/0};class M extends n{_tabLinks;_index;_indicator;_tabWidth;_tabsWidth;_tabsCarousel;_activeTabLink;_content;constructor(t,e){super(t,e,M),this.el.M_Tabs=this,this.options={...M.defaults,...e},this._tabLinks=this.el.querySelectorAll("li.tab > a"),this._index=0,this._setupActiveTabLink(),this.options.swipeable?this._setupSwipeableTabs():this._setupNormalTabs(),this._setTabsAndTabWidth(),this._createIndicator(),this._setupEventHandlers()}static get defaults(){return O}static init(t,e={}){return super.init(t,e,M)}static getInstance(t){return t.M_Tabs}destroy(){this._removeEventHandlers(),this._indicator.parentNode.removeChild(this._indicator),this.options.swipeable?this._teardownSwipeableTabs():this._teardownNormalTabs(),this.el.M_Tabs=void 0}get index(){return this._index}_setupEventHandlers(){window.addEventListener("resize",this._handleWindowResize),this.el.addEventListener("click",this._handleTabClick)}_removeEventHandlers(){window.removeEventListener("resize",this._handleWindowResize),this.el.removeEventListener("click",this._handleTabClick)}_handleWindowResize=()=>{this._setTabsAndTabWidth(),0!==this._tabWidth&&0!==this._tabsWidth&&(this._indicator.style.left=this._calcLeftPos(this._activeTabLink)+"px",this._indicator.style.right=this._calcRightPos(this._activeTabLink)+"px")};_handleTabClick=t=>{const e=t.target,i=e.parentElement;if(!e||!i.classList.contains("tab"))return;if(i.classList.contains("disabled"))return void t.preventDefault();if(e.hasAttribute("target"))return;this._activeTabLink.classList.remove("active");const s=this._content;this._activeTabLink=e,e.hash&&(this._content=document.querySelector(e.hash)),this._tabLinks=this.el.querySelectorAll("li.tab > a"),this._activeTabLink.classList.add("active");const n=this._index;this._index=Math.max(Array.from(this._tabLinks).indexOf(e),0),this.options.swipeable?this._tabsCarousel&&this._tabsCarousel.set(this._index,(()=>{"function"==typeof this.options.onShow&&this.options.onShow.call(this,this._content)})):this._content&&(this._content.style.display="block",this._content.classList.add("active"),"function"==typeof this.options.onShow&&this.options.onShow.call(this,this._content),s&&s!==this._content&&(s.style.display="none",s.classList.remove("active"))),this._setTabsAndTabWidth(),this._animateIndicator(n),t.preventDefault()};_createIndicator(){const t=document.createElement("li");t.classList.add("indicator"),this.el.appendChild(t),this._indicator=t,this._indicator.style.left=this._calcLeftPos(this._activeTabLink)+"px",this._indicator.style.right=this._calcRightPos(this._activeTabLink)+"px"}_setupActiveTabLink(){this._activeTabLink=Array.from(this._tabLinks).find((t=>t.getAttribute("href")===location.hash)),this._activeTabLink||(this._activeTabLink=this.el.querySelector("li.tab a.active")),0===this._activeTabLink.length&&(this._activeTabLink=this.el.querySelector("li.tab a")),Array.from(this._tabLinks).forEach((t=>t.classList.remove("active"))),this._activeTabLink.classList.add("active"),this._index=Math.max(Array.from(this._tabLinks).indexOf(this._activeTabLink),0),this._activeTabLink&&this._activeTabLink.hash&&(this._content=document.querySelector(this._activeTabLink.hash),this._content&&this._content.classList.add("active"))}_setupSwipeableTabs(){window.innerWidth>this.options.responsiveThreshold&&(this.options.swipeable=!1);const t=[];this._tabLinks.forEach((e=>{if(e.hash){const i=document.querySelector(e.hash);i.classList.add("carousel-item"),t.push(i)}}));const e=document.createElement("div");e.classList.add("tabs-content","carousel","carousel-slider"),t[0].parentElement.insertBefore(e,t[0]),t.forEach((t=>{e.appendChild(t),t.style.display=""}));const i=this._activeTabLink.parentElement,s=Array.from(i.parentNode.children).indexOf(i);this._tabsCarousel=u.init(e,{fullWidth:!0,noWrap:!0,onCycleTo:t=>{const e=this._index;this._index=Array.from(t.parentNode.children).indexOf(t),this._activeTabLink.classList.remove("active"),this._activeTabLink=Array.from(this._tabLinks)[this._index],this._activeTabLink.classList.add("active"),this._animateIndicator(e),"function"==typeof this.options.onShow&&this.options.onShow.call(this,this._content)}}),this._tabsCarousel.set(s)}_teardownSwipeableTabs(){const t=this._tabsCarousel.el;this._tabsCarousel.destroy(),t.after(t.children),t.remove()}_setupNormalTabs(){Array.from(this._tabLinks).forEach((t=>{if(t!==this._activeTabLink&&t.hash){const e=document.querySelector(t.hash);e&&(e.style.display="none")}}))}_teardownNormalTabs(){this._tabLinks.forEach((t=>{if(t.hash){const e=document.querySelector(t.hash);e&&(e.style.display="")}}))}_setTabsAndTabWidth(){this._tabsWidth=this.el.getBoundingClientRect().width,this._tabWidth=Math.max(this._tabsWidth,this.el.scrollWidth)/this._tabLinks.length}_calcRightPos(t){return Math.ceil(this._tabsWidth-t.offsetLeft-t.getBoundingClientRect().width)}_calcLeftPos(t){return Math.floor(t.offsetLeft)}updateTabIndicator(){this._setTabsAndTabWidth(),this._animateIndicator(this._index)}_animateIndicator(t){let e=0,i=0;this._index-t>=0?e=90:i=90,this._indicator.style.transition=`\n      left ${this.options.duration}ms ease-out ${e}ms,\n      right ${this.options.duration}ms ease-out ${i}ms`,this._indicator.style.left=this._calcLeftPos(this._activeTabLink)+"px",this._indicator.style.right=this._calcRightPos(this._activeTabLink)+"px"}select(t){const e=Array.from(this._tabLinks).find((e=>e.getAttribute("href")==="#"+t));e&&e.click()}}let D={dialRadius:135,outerRadius:105,innerRadius:70,tickRadius:20,duration:350,container:null,defaultTime:"now",fromNow:0,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok"},autoClose:!1,twelveHour:!0,vibrate:!0,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,onSelect:null};class A extends n{id;modal;modalEl;plate;digitalClock;inputHours;inputMinutes;x0;y0;moved;dx;dy;currentView;hand;minutesView;hours;minutes;time;amOrPm;static _template;isOpen;vibrate;_canvas;hoursView;spanAmPm;footer;_amBtn;_pmBtn;bg;bearing;g;toggleViewTimer;canvas;vibrateTimer;constructor(t,e){super(t,e,A),this.el.M_Timepicker=this,this.options={...A.defaults,...e},this.id=s.guid(),this._insertHTMLIntoDOM(),this._setupModal(),this._setupVariables(),this._setupEventHandlers(),this._clockSetup(),this._pickerSetup()}static get defaults(){return D}static init(t,e={}){return super.init(t,e,A)}static _addLeadingZero(t){return(t<10?"0":"")+t}static _createSVGEl(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}static _Pos(t){return t.type.startsWith("touch")&&t.targetTouches.length>=1?{x:t.targetTouches[0].clientX,y:t.targetTouches[0].clientY}:{x:t.clientX,y:t.clientY}}static getInstance(t){return t.M_Timepicker}destroy(){this._removeEventHandlers(),this.modal.destroy(),this.modalEl.remove(),this.el.M_Timepicker=void 0}_setupEventHandlers(){this.el.addEventListener("click",this._handleInputClick),this.el.addEventListener("keydown",this._handleInputKeydown),this.plate.addEventListener("mousedown",this._handleClockClickStart),this.plate.addEventListener("touchstart",this._handleClockClickStart),this.digitalClock.addEventListener("keyup",this._inputFromTextField),this.inputHours.addEventListener("click",(()=>this.showView("hours"))),this.inputMinutes.addEventListener("click",(()=>this.showView("minutes")))}_removeEventHandlers(){this.el.removeEventListener("click",this._handleInputClick),this.el.removeEventListener("keydown",this._handleInputKeydown)}_handleInputClick=()=>{this.open()};_handleInputKeydown=t=>{s.keys.ENTER.includes(t.key)&&(t.preventDefault(),this.open())};_handleTimeInputEnterKey=t=>{s.keys.ENTER.includes(t.key)&&(t.preventDefault(),this._inputFromTextField())};_handleClockClickStart=t=>{t.preventDefault();let e=this.plate.getBoundingClientRect(),i=e.left,s=e.top;this.x0=i+this.options.dialRadius,this.y0=s+this.options.dialRadius,this.moved=!1;let n=A._Pos(t);this.dx=n.x-this.x0,this.dy=n.y-this.y0,this.setHand(this.dx,this.dy,!1),document.addEventListener("mousemove",this._handleDocumentClickMove),document.addEventListener("touchmove",this._handleDocumentClickMove),document.addEventListener("mouseup",this._handleDocumentClickEnd),document.addEventListener("touchend",this._handleDocumentClickEnd)};_handleDocumentClickMove=t=>{t.preventDefault();let e=A._Pos(t),i=e.x-this.x0,s=e.y-this.y0;this.moved=!0,this.setHand(i,s,!1)};_handleDocumentClickEnd=t=>{t.preventDefault(),document.removeEventListener("mouseup",this._handleDocumentClickEnd),document.removeEventListener("touchend",this._handleDocumentClickEnd);let e=A._Pos(t),i=e.x-this.x0,s=e.y-this.y0;this.moved&&i===this.dx&&s===this.dy&&this.setHand(i,s),"hours"===this.currentView?this.showView("minutes",this.options.duration/2):this.options.autoClose&&(this.minutesView.classList.add("timepicker-dial-out"),setTimeout((()=>{this.done()}),this.options.duration/2)),"function"==typeof this.options.onSelect&&this.options.onSelect.call(this,this.hours,this.minutes),document.removeEventListener("mousemove",this._handleDocumentClickMove),document.removeEventListener("touchmove",this._handleDocumentClickMove)};_insertHTMLIntoDOM(){const t=document.createElement("template");t.innerHTML=A._template.trim(),this.modalEl=t.content.firstChild,this.modalEl.id="modal-"+this.id;const e=this.options.container,i=e instanceof HTMLElement?e:document.querySelector(e);this.options.container&&i?i.append(this.modalEl):this.el.parentElement.appendChild(this.modalEl)}_setupModal(){this.modal=y.init(this.modalEl,{onOpenStart:this.options.onOpenStart,onOpenEnd:this.options.onOpenEnd,onCloseStart:this.options.onCloseStart,onCloseEnd:()=>{"function"==typeof this.options.onCloseEnd&&this.options.onCloseEnd.call(this),this.isOpen=!1}})}_setupVariables(){this.currentView="hours",this.vibrate=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null,this._canvas=this.modalEl.querySelector(".timepicker-canvas"),this.plate=this.modalEl.querySelector(".timepicker-plate"),this.digitalClock=this.modalEl.querySelector(".timepicker-display-column"),this.hoursView=this.modalEl.querySelector(".timepicker-hours"),this.minutesView=this.modalEl.querySelector(".timepicker-minutes"),this.inputHours=this.modalEl.querySelector(".timepicker-input-hours"),this.inputMinutes=this.modalEl.querySelector(".timepicker-input-minutes"),this.spanAmPm=this.modalEl.querySelector(".timepicker-span-am-pm"),this.footer=this.modalEl.querySelector(".timepicker-footer"),this.amOrPm="PM"}_createButton(t,e){const i=document.createElement("button");return i.classList.add("btn-flat","waves-effect"),i.style.visibility=e,i.type="button",i.tabIndex=this.options.twelveHour?3:1,i.innerText=t,i}_pickerSetup(){const t=this._createButton(this.options.i18n.clear,this.options.showClearBtn?"":"hidden");t.classList.add("timepicker-clear"),t.addEventListener("click",this.clear),this.footer.appendChild(t);const e=document.createElement("div");e.classList.add("confirmation-btns"),this.footer.append(e);const i=this._createButton(this.options.i18n.cancel,"");i.classList.add("timepicker-close"),i.addEventListener("click",this.close),e.appendChild(i);const s=this._createButton(this.options.i18n.done,"");s.classList.add("timepicker-close"),s.addEventListener("click",this.done),e.appendChild(s)}_clockSetup(){this.options.twelveHour&&(this._amBtn=document.createElement("div"),this._amBtn.classList.add("am-btn"),this._amBtn.innerText="AM",this._amBtn.addEventListener("click",this._handleAmPmClick),this.spanAmPm.appendChild(this._amBtn),this._pmBtn=document.createElement("div"),this._pmBtn.classList.add("pm-btn"),this._pmBtn.innerText="PM",this._pmBtn.addEventListener("click",this._handleAmPmClick),this.spanAmPm.appendChild(this._pmBtn)),this._buildHoursView(),this._buildMinutesView(),this._buildSVGClock()}_buildSVGClock(){let t=this.options.dialRadius,e=this.options.tickRadius,i=2*t,s=A._createSVGEl("svg");s.setAttribute("class","timepicker-svg"),s.setAttribute("width",i.toString()),s.setAttribute("height",i.toString());let n=A._createSVGEl("g");n.setAttribute("transform","translate("+t+","+t+")");let r=A._createSVGEl("circle");r.setAttribute("class","timepicker-canvas-bearing"),r.setAttribute("cx","0"),r.setAttribute("cy","0"),r.setAttribute("r","4");let o=A._createSVGEl("line");o.setAttribute("x1","0"),o.setAttribute("y1","0");let a=A._createSVGEl("circle");a.setAttribute("class","timepicker-canvas-bg"),a.setAttribute("r",e.toString()),n.appendChild(o),n.appendChild(a),n.appendChild(r),s.appendChild(n),this._canvas.appendChild(s),this.hand=o,this.bg=a,this.bearing=r,this.g=n}_buildHoursView(){const t=document.createElement("div");if(t.classList.add("timepicker-tick"),this.options.twelveHour)for(let e=1;e<13;e+=1){const i=t.cloneNode(!0),s=e/6*Math.PI,n=this.options.outerRadius;i.style.left=this.options.dialRadius+Math.sin(s)*n-this.options.tickRadius+"px",i.style.top=this.options.dialRadius-Math.cos(s)*n-this.options.tickRadius+"px",i.innerHTML=0===e?"00":e.toString(),this.hoursView.appendChild(i)}else for(let e=0;e<24;e+=1){const i=t.cloneNode(!0),s=e/6*Math.PI,n=e>0&&e<13?this.options.innerRadius:this.options.outerRadius;i.style.left=this.options.dialRadius+Math.sin(s)*n-this.options.tickRadius+"px",i.style.top=this.options.dialRadius-Math.cos(s)*n-this.options.tickRadius+"px",i.innerHTML=0===e?"00":e.toString(),this.hoursView.appendChild(i)}}_buildMinutesView(){const t=document.createElement("div");t.classList.add("timepicker-tick");for(let e=0;e<60;e+=5){const i=t.cloneNode(!0),s=e/30*Math.PI;i.style.left=this.options.dialRadius+Math.sin(s)*this.options.outerRadius-this.options.tickRadius+"px",i.style.top=this.options.dialRadius-Math.cos(s)*this.options.outerRadius-this.options.tickRadius+"px",i.innerHTML=A._addLeadingZero(e),this.minutesView.appendChild(i)}}_handleAmPmClick=t=>{const e=t.target;this.amOrPm=e.classList.contains("am-btn")?"AM":"PM",this._updateAmPmView()};_updateAmPmView(){this.options.twelveHour&&("PM"===this.amOrPm?(this._amBtn.classList.remove("text-primary"),this._pmBtn.classList.add("text-primary")):"AM"===this.amOrPm&&(this._amBtn.classList.add("text-primary"),this._pmBtn.classList.remove("text-primary")))}_updateTimeFromInput(){let t=((this.el.value||this.options.defaultTime||"")+"").split(":");if(this.options.twelveHour&&void 0!==t[1]&&(t[1].toUpperCase().indexOf("AM")>0?this.amOrPm="AM":this.amOrPm="PM",t[1]=t[1].replace("AM","").replace("PM","")),"now"===t[0]){let e=new Date(+new Date+this.options.fromNow);t=[e.getHours().toString(),e.getMinutes().toString()],this.options.twelveHour&&(this.amOrPm=parseInt(t[0])>=12&&parseInt(t[0])<24?"PM":"AM")}this.hours=+t[0]||0,this.minutes=+t[1]||0,this.inputHours.value=this.hours,this.inputMinutes.value=A._addLeadingZero(this.minutes),this._updateAmPmView()}showView=(t,e=null)=>{"minutes"===t&&getComputedStyle(this.hoursView).visibility;let i="hours"===t,s=i?this.hoursView:this.minutesView,n=i?this.minutesView:this.hoursView;this.currentView=t,i?(this.inputHours.classList.add("text-primary"),this.inputMinutes.classList.remove("text-primary")):(this.inputHours.classList.remove("text-primary"),this.inputMinutes.classList.add("text-primary")),n.classList.add("timepicker-dial-out"),s.style.visibility="visible",s.classList.remove("timepicker-dial-out"),this.resetClock(e),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout((()=>{n.style.visibility="hidden"}),this.options.duration)};resetClock(t){let e=this.currentView,i=this[e],s="hours"===e,n=i*(Math.PI/(s?6:30)),r=s&&i>0&&i<13?this.options.innerRadius:this.options.outerRadius,o=Math.sin(n)*r,a=-Math.cos(n)*r,l=this;t?(this.canvas?.classList.add("timepicker-canvas-out"),setTimeout((()=>{l.canvas?.classList.remove("timepicker-canvas-out"),l.setHand(o,a)}),t)):this.setHand(o,a)}_inputFromTextField=()=>{const t="hours"===this.currentView;if(t){const e=parseInt(this.inputHours.value);if(e>0&&e<13)this.drawClockFromTimeInput(e,t),this.showView("minutes",this.options.duration/2),this.hours=e,this.inputMinutes.focus();else{const t=(new Date).getHours();this.inputHours.value=(t%12).toString()}}else{const e=parseInt(this.inputMinutes.value);if(e>=0&&e<60)this.inputMinutes.value=A._addLeadingZero(e),this.drawClockFromTimeInput(e,t),this.minutes=e,this.modalEl.querySelector(".confirmation-btns :nth-child(2)").focus();else{const t=(new Date).getMinutes();this.inputMinutes.value=A._addLeadingZero(t)}}};drawClockFromTimeInput(t,e){const i=t*(Math.PI/(e?6:30));let s;this.options.twelveHour&&(s=this.options.outerRadius);let n=Math.sin(i)*(s-this.options.tickRadius),r=-Math.cos(i)*(s-this.options.tickRadius),o=Math.sin(i)*s,a=-Math.cos(i)*s;this.hand.setAttribute("x2",n.toString()),this.hand.setAttribute("y2",r.toString()),this.bg.setAttribute("cx",o.toString()),this.bg.setAttribute("cy",a.toString())}setHand(t,e,i=!1){let s=Math.atan2(t,-e),n="hours"===this.currentView,r=Math.PI/(n||i?6:30),o=Math.sqrt(t*t+e*e),a=n&&o<(this.options.outerRadius+this.options.innerRadius)/2,l=a?this.options.innerRadius:this.options.outerRadius;this.options.twelveHour&&(l=this.options.outerRadius),s<0&&(s=2*Math.PI+s);let h=Math.round(s/r);s=h*r,this.options.twelveHour?n?0===h&&(h=12):(i&&(h*=5),60===h&&(h=0)):n?(12===h&&(h=0),h=a?0===h?12:h:0===h?0:h+12):(i&&(h*=5),60===h&&(h=0)),this[this.currentView]!==h&&this.vibrate&&this.options.vibrate&&(this.vibrateTimer||(navigator[this.vibrate](10),this.vibrateTimer=setTimeout((()=>{this.vibrateTimer=null}),100))),this[this.currentView]=h,n?this.inputHours.value=h.toString():this.inputMinutes.value=A._addLeadingZero(h);let c=Math.sin(s)*(l-this.options.tickRadius),d=-Math.cos(s)*(l-this.options.tickRadius),u=Math.sin(s)*l,p=-Math.cos(s)*l;this.hand.setAttribute("x2",c.toString()),this.hand.setAttribute("y2",d.toString()),this.bg.setAttribute("cx",u.toString()),this.bg.setAttribute("cy",p.toString())}open=()=>{this.isOpen||(this.isOpen=!0,this._updateTimeFromInput(),this.showView("hours"),this.modal.open(void 0))};close=()=>{this.isOpen&&(this.isOpen=!1,this.modal.close())};done=(t=null,e=null)=>{let i=this.el.value,s=e?"":A._addLeadingZero(this.hours)+":"+A._addLeadingZero(this.minutes);this.time=s,!e&&this.options.twelveHour&&(s=`${s} ${this.amOrPm}`),this.el.value=s,s!==i&&this.el.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0,composed:!0})),this.close(),this.el.focus()};clear=()=>{this.done(null,!0)};static{A._template='\n      <div class="modal timepicker-modal">\n        <div class="modal-content timepicker-container">\n          <div class="timepicker-digital-display">\n            <div class="timepicker-text-container">\n              <div class="timepicker-display-column">\n                <input type="text" maxlength="2" autofocus class="timepicker-input-hours text-primary" />\n                :\n                <input type="text" maxlength="2" class="timepicker-input-minutes" />\n              </div>\n              <div class="timepicker-display-column timepicker-display-am-pm">\n                <div class="timepicker-span-am-pm"></div>\n              </div>\n            </div>\n          </div>\n          <div class="timepicker-analog-display">\n            <div class="timepicker-plate">\n              <div class="timepicker-canvas"></div>\n              <div class="timepicker-dial timepicker-hours"></div>\n              <div class="timepicker-dial timepicker-minutes timepicker-dial-out"></div>\n            </div>\n            <div class="timepicker-footer"></div>\n          </div>\n        </div>\n      </div'}}class I{static _offset(t){const e=t.getBoundingClientRect(),i=document.documentElement;return{top:e.top+window.pageYOffset-i.clientTop,left:e.left+window.pageXOffset-i.clientLeft}}static renderWaveEffect(t,e=null,i=null){const s=null===e;let n,r;const o=function(a){r||(r=a);const l=a-r;if(l<500){const r=l/500*(2-l/500),a=s?"circle at 50% 50%":`circle at ${e.x}px ${e.y}px`,h=`rgba(${i?.r||0}, ${i?.g||0}, ${i?.b||0}, ${.3*(1-r)})`,c=90*r+"%";t.style.backgroundImage="radial-gradient("+a+", "+h+" "+c+", transparent "+c+")",n=window.requestAnimationFrame(o)}else t.style.backgroundImage="none",window.cancelAnimationFrame(n)};n=window.requestAnimationFrame(o)}static Init(){"undefined"!=typeof document&&document?.addEventListener("DOMContentLoaded",(()=>{document.body.addEventListener("click",(t=>{const e=t.target,i=e.closest(".waves-effect");if(i&&i.contains(e)){const e=i.classList.contains("waves-circle"),s=t.pageX-I._offset(i).left,n=t.pageY-I._offset(i).top;let r=null;i.classList.contains("waves-light")&&(r={r:255,g:255,b:255}),I.renderWaveEffect(i,e?null:{x:s,y:n},r)}}))}))}}const R={};class P extends n{_mousedown;value;thumb;constructor(t,e){super(t,e,P),this.el.M_Range=this,this.options={...P.defaults,...e},this._mousedown=!1,this._setupThumb(),this._setupEventHandlers()}static get defaults(){return R}static init(t,e={}){return super.init(t,e,P)}static getInstance(t){return t.M_Range}destroy(){this._removeEventHandlers(),this._removeThumb(),this.el.M_Range=void 0}_setupEventHandlers(){this.el.addEventListener("change",this._handleRangeChange),this.el.addEventListener("mousedown",this._handleRangeMousedownTouchstart),this.el.addEventListener("touchstart",this._handleRangeMousedownTouchstart),this.el.addEventListener("input",this._handleRangeInputMousemoveTouchmove),this.el.addEventListener("mousemove",this._handleRangeInputMousemoveTouchmove),this.el.addEventListener("touchmove",this._handleRangeInputMousemoveTouchmove),this.el.addEventListener("mouseup",this._handleRangeMouseupTouchend),this.el.addEventListener("touchend",this._handleRangeMouseupTouchend),this.el.addEventListener("blur",this._handleRangeBlurMouseoutTouchleave),this.el.addEventListener("mouseout",this._handleRangeBlurMouseoutTouchleave),this.el.addEventListener("touchleave",this._handleRangeBlurMouseoutTouchleave)}_removeEventHandlers(){this.el.removeEventListener("change",this._handleRangeChange),this.el.removeEventListener("mousedown",this._handleRangeMousedownTouchstart),this.el.removeEventListener("touchstart",this._handleRangeMousedownTouchstart),this.el.removeEventListener("input",this._handleRangeInputMousemoveTouchmove),this.el.removeEventListener("mousemove",this._handleRangeInputMousemoveTouchmove),this.el.removeEventListener("touchmove",this._handleRangeInputMousemoveTouchmove),this.el.removeEventListener("mouseup",this._handleRangeMouseupTouchend),this.el.removeEventListener("touchend",this._handleRangeMouseupTouchend),this.el.removeEventListener("blur",this._handleRangeBlurMouseoutTouchleave),this.el.removeEventListener("mouseout",this._handleRangeBlurMouseoutTouchleave),this.el.removeEventListener("touchleave",this._handleRangeBlurMouseoutTouchleave)}_handleRangeChange=()=>{this.value.innerHTML=this.el.value,this.thumb.classList.contains("active")||this._showRangeBubble();const t=this._calcRangeOffset();this.thumb.classList.add("active"),this.thumb.style.left=t+"px"};_handleRangeMousedownTouchstart=t=>{if(this.value.innerHTML=this.el.value,this._mousedown=!0,this.el.classList.add("active"),this.thumb.classList.contains("active")||this._showRangeBubble(),"input"!==t.type){const t=this._calcRangeOffset();this.thumb.classList.add("active"),this.thumb.style.left=t+"px"}};_handleRangeInputMousemoveTouchmove=()=>{if(this._mousedown){this.thumb.classList.contains("active")||this._showRangeBubble();const t=this._calcRangeOffset();this.thumb.classList.add("active"),this.thumb.style.left=t+"px",this.value.innerHTML=this.el.value}};_handleRangeMouseupTouchend=()=>{this._mousedown=!1,this.el.classList.remove("active")};_handleRangeBlurMouseoutTouchleave=()=>{if(!this._mousedown){const t=7+parseInt(getComputedStyle(this.el).paddingLeft)+"px";if(this.thumb.classList.contains("active")){const e=100;this.thumb.style.transition="none",setTimeout((()=>{this.thumb.style.transition=`\n            height ${e}ms ease,\n            width ${e}ms ease,\n            top ${e}ms ease,\n            margin ${e}ms ease\n          `,this.thumb.style.height="0",this.thumb.style.width="0",this.thumb.style.top="0",this.thumb.style.marginLeft=t}),1)}this.thumb.classList.remove("active")}};_setupThumb(){this.thumb=document.createElement("span"),this.value=document.createElement("span"),this.thumb.classList.add("thumb"),this.value.classList.add("value"),this.thumb.append(this.value),this.el.after(this.thumb)}_removeThumb(){this.thumb.remove()}_showRangeBubble(){const t=-7+parseInt(getComputedStyle(this.thumb.parentElement).paddingLeft)+"px";this.thumb.style.transition="\n      height 300ms ease,\n      width 300ms ease,\n      top 300ms ease,\n      margin 300ms ease\n    ",this.thumb.style.height="30px",this.thumb.style.width="30px",this.thumb.style.top="-30px",this.thumb.style.marginLeft=t}_calcRangeOffset(){const t=this.el.getBoundingClientRect().width-15,e=parseFloat(this.el.getAttribute("max"))||100,i=parseFloat(this.el.getAttribute("min"))||0;return(parseFloat(this.el.value)-i)/(e-i)*t}static Init(){"undefined"!=typeof document&&P.init(document?.querySelectorAll("input[type=range]"),{})}}Object.freeze({});let B={text:"",displayLength:4e3,inDuration:300,outDuration:375,classes:"",completeCallback:null,activationPercent:.8};class H{el;timeRemaining;panning;options;message;counterInterval;wasSwiped;startingXPos;xPos;time;deltaX;velocityX;static _toasts;static _container;static _draggedToast;constructor(t){this.options={...H.defaults,...t},this.message=this.options.text,this.panning=!1,this.timeRemaining=this.options.displayLength,0===H._toasts.length&&H._createContainer(),H._toasts.push(this);let e=this._createToast();e.M_Toast=this,this.el=e,this._animateIn(),this._setTimer()}static get defaults(){return B}static getInstance(t){return t.M_Toast}static _createContainer(){const t=document.createElement("div");t.setAttribute("id","toast-container"),t.addEventListener("touchstart",H._onDragStart),t.addEventListener("touchmove",H._onDragMove),t.addEventListener("touchend",H._onDragEnd),t.addEventListener("mousedown",H._onDragStart),document.addEventListener("mousemove",H._onDragMove),document.addEventListener("mouseup",H._onDragEnd),document.body.appendChild(t),H._container=t}static _removeContainer(){document.removeEventListener("mousemove",H._onDragMove),document.removeEventListener("mouseup",H._onDragEnd),H._container.remove(),H._container=null}static _onDragStart(t){if(t.target&&t.target.closest(".toast")){const e=t.target.closest(".toast").M_Toast;e.panning=!0,H._draggedToast=e,e.el.classList.add("panning"),e.el.style.transition="",e.startingXPos=H._xPos(t),e.time=Date.now(),e.xPos=H._xPos(t)}}static _onDragMove(t){if(H._draggedToast){t.preventDefault();const e=H._draggedToast;e.deltaX=Math.abs(e.xPos-H._xPos(t)),e.xPos=H._xPos(t),e.velocityX=e.deltaX/(Date.now()-e.time),e.time=Date.now();const i=e.xPos-e.startingXPos,s=e.el.offsetWidth*e.options.activationPercent;e.el.style.transform=`translateX(${i}px)`,e.el.style.opacity=(1-Math.abs(i/s)).toString()}}static _onDragEnd(){if(H._draggedToast){let t=H._draggedToast;t.panning=!1,t.el.classList.remove("panning");let e=t.xPos-t.startingXPos,i=t.el.offsetWidth*t.options.activationPercent;Math.abs(e)>i||t.velocityX>1?(t.wasSwiped=!0,t.dismiss()):(t.el.style.transition="transform .2s, opacity .2s",t.el.style.transform="",t.el.style.opacity=""),H._draggedToast=null}}static _xPos(t){return t.type.startsWith("touch")&&t.targetTouches.length>=1?t.targetTouches[0].clientX:t.clientX}static dismissAll(){for(let t in H._toasts)H._toasts[t].dismiss()}_createToast(){let t=this.options.toastId?document.getElementById(this.options.toastId):document.createElement("div");if(t instanceof HTMLTemplateElement){const e=t.content.cloneNode(!0);t=e.firstElementChild}return t.classList.add("toast"),t.setAttribute("role","alert"),t.setAttribute("aria-live","assertive"),t.setAttribute("aria-atomic","true"),this.options.classes.length>0&&t.classList.add(...this.options.classes.split(" ")),this.message&&(t.innerText=this.message),H._container.appendChild(t),t}_animateIn(){this.el.style.display="",this.el.style.opacity="0",this.el.style.transition=`\n      top ${this.options.inDuration}ms ease,\n      opacity ${this.options.inDuration}ms ease\n    `,setTimeout((()=>{this.el.style.top="0",this.el.style.opacity="1"}),1)}_setTimer(){this.timeRemaining!==1/0&&(this.counterInterval=setInterval((()=>{this.panning||(this.timeRemaining-=20),this.timeRemaining<=0&&this.dismiss()}),20))}dismiss(){window.clearInterval(this.counterInterval);let t=this.el.offsetWidth*this.options.activationPercent;this.wasSwiped&&(this.el.style.transition="transform .05s, opacity .05s",this.el.style.transform=`translateX(${t}px)`,this.el.style.opacity="0"),this.el.style.transition=`\n      margin ${this.options.outDuration}ms ease,\n      opacity ${this.options.outDuration}ms ease`,setTimeout((()=>{this.el.style.opacity="0",this.el.style.marginTop="-40px"}),1),setTimeout((()=>{"function"==typeof this.options.completeCallback&&this.options.completeCallback(),this.el.id!=this.options.toastId&&(this.el.remove(),H._toasts.splice(H._toasts.indexOf(this),1),0===H._toasts.length&&H._removeContainer())}),this.options.outDuration)}static{H._toasts=[],H._container=null,H._draggedToast=null}}"undefined"!=typeof document&&(document.addEventListener("keydown",s.docHandleKeydown,!0),document.addEventListener("keyup",s.docHandleKeyup,!0),document.addEventListener("focus",s.docHandleFocus,!0),document.addEventListener("blur",s.docHandleBlur,!0)),class{static Init(){"undefined"!=typeof document&&document.addEventListener("DOMContentLoaded",(()=>{document.body.addEventListener("click",(t=>{const e=t.target,i=e.closest(".card");if(!i)return;const s=Array.from(i.children).find((t=>t.classList.contains("card-reveal")));if(!s)return;const n=getComputedStyle(i).overflow,r=s.querySelector(".card-reveal .card-title");if(e===r||r.contains(e)){const t=225;s.style.transition=`transform ${t}ms ease`,s.style.transform="translateY(0)",setTimeout((()=>{s.style.display="none",i.style.overflow=n}),t)}i.querySelectorAll(".activator").forEach((t=>{(e===t||t.contains(e))&&(i.style.overflow="hidden",s.style.display="block",setTimeout((()=>{s.style.transition="transform 300ms ease",s.style.transform="translateY(-100%)"}),1))}))}))}))}}.Init(),x.Init(),f.Init(),I.Init(),P.Init();const N={},F=[];function W(t,e){if(Array.isArray(t))for(const i of t)W(i,e);else if("object"!=typeof t)q(Object.getOwnPropertyNames(e)),N[t]=Object.assign(N[t]||{},e);else for(const e in t)W(e,t[e])}function $(t){return N[t]||{}}function q(t){F.push(...t)}function z(t,e){let i;const s=t.length,n=[];for(i=0;i<s;i++)n.push(e(t[i]));return n}function j(t,e){let i;const s=t.length,n=[];for(i=0;i<s;i++)e(t[i])&&n.push(t[i]);return n}function V(t){return t%360*Math.PI/180}function X(t){return t.toLowerCase().replace(/-(.)/g,(function(t,e){return e.toUpperCase()}))}function Y(t){return t.replace(/([A-Z])/g,(function(t,e){return"-"+e.toLowerCase()}))}function U(t){return t.charAt(0).toUpperCase()+t.slice(1)}function G(t,e,i,s){return null!=e&&null!=i||(s=s||t.bbox(),null==e?e=s.width/s.height*i:null==i&&(i=s.height/s.width*e)),{width:e,height:i}}function K(t,e){const i=t.origin;let s=null!=t.ox?t.ox:null!=t.originX?t.originX:"center",n=null!=t.oy?t.oy:null!=t.originY?t.originY:"center";null!=i&&([s,n]=Array.isArray(i)?i:"object"==typeof i?[i.x,i.y]:[i,i]);const r="string"==typeof s,o="string"==typeof n;if(r||o){const{height:t,width:i,x:a,y:l}=e.bbox();r&&(s=s.includes("left")?a:s.includes("right")?a+i:a+i/2),o&&(n=n.includes("top")?l:n.includes("bottom")?l+t:l+t/2)}return[s,n]}var J={__proto__:null,map:z,filter:j,radians:V,degrees:function(t){return 180*t/Math.PI%360},camelCase:X,unCamelCase:Y,capitalize:U,proportionalSize:G,getOrigin:K};const Q="http://www.w3.org/2000/svg",Z="http://www.w3.org/1999/xhtml",tt="http://www.w3.org/2000/xmlns/",et="http://www.w3.org/1999/xlink",it="http://svgjs.dev/svgjs";var st={__proto__:null,svg:Q,html:Z,xmlns:tt,xlink:et,svgjs:it};const nt={window:"undefined"==typeof window?null:window,document:"undefined"==typeof document?null:document};function rt(t=null,e=null){nt.window=t,nt.document=e}const ot={};function at(){ot.window=nt.window,ot.document=nt.document}function lt(){nt.window=ot.window,nt.document=ot.document}function ht(t,e){at(),rt(t,t.document),e(t,t.document),lt()}function ct(){return nt.window}class dt{}const ut={},pt="___SYMBOL2___ROOT___";function mt(t,e=Q){return nt.document.createElementNS(e,t)}function ft(t,e=!1){if(t instanceof dt)return t;if("object"==typeof t)return _t(t);if(null==t)return new ut[pt];if("string"==typeof t&&"<"!==t.charAt(0))return _t(nt.document.querySelector(t));const i=e?nt.document.createElement("div"):mt("svg");return i.innerHTML=t,t=_t(i.firstChild),i.removeChild(i.firstChild),t}function gt(t,e){return e&&e.ownerDocument&&e instanceof e.ownerDocument.defaultView.Node?e:mt(t)}function yt(t){if(!t)return null;if(t.instance instanceof dt)return t.instance;if("#document-fragment"===t.nodeName)return new ut.Fragment(t);let e=U(t.nodeName||"Dom");return"LinearGradient"===e||"RadialGradient"===e?e="Gradient":ut[e]||(e="Dom"),new ut[e](t)}let _t=yt;function vt(t=yt){_t=t}function wt(t,e=t.name,i=!1){return ut[e]=t,i&&(ut[pt]=t),q(Object.getOwnPropertyNames(t.prototype)),t}function bt(t){return ut[t]}let xt=1e3;function Et(t){return"Svgjs"+U(t)+xt++}function kt(t){for(let e=t.children.length-1;e>=0;e--)kt(t.children[e]);return t.id?(t.id=Et(t.nodeName),t):t}function Ct(t,e){let i,s;for(s=(t=Array.isArray(t)?t:[t]).length-1;s>=0;s--)for(i in e)t[s].prototype[i]=e[i]}function Lt(t){return function(...e){const i=e[e.length-1];return!i||i.constructor!==Object||i instanceof Array?t.apply(this,e):t.apply(this,e.slice(0,-1)).attr(i)}}W("Dom",{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},prev:function(){return this.siblings()[this.position()-1]},forward:function(){const t=this.position();return this.parent().add(this.remove(),t+1),this},backward:function(){const t=this.position();return this.parent().add(this.remove(),t?t-1:0),this},front:function(){return this.parent().add(this.remove()),this},back:function(){return this.parent().add(this.remove(),0),this},before:function(t){(t=ft(t)).remove();const e=this.position();return this.parent().add(t,e),this},after:function(t){(t=ft(t)).remove();const e=this.position();return this.parent().add(t,e+1),this},insertBefore:function(t){return(t=ft(t)).before(this),this},insertAfter:function(t){return(t=ft(t)).after(this),this}});const Tt=/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,St=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Ot=/rgb\((\d+),(\d+),(\d+)\)/,Mt=/(#[a-z_][a-z0-9\-_]*)/i,Dt=/\)\s*,?\s*/,At=/\s/g,It=/^#[a-f0-9]{3}$|^#[a-f0-9]{6}$/i,Rt=/^rgb\(/,Pt=/^(\s+)?$/,Bt=/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ht=/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,Nt=/[\s,]+/,Ft=/[MLHVCSQTAZ]/i;var Wt={__proto__:null,numberAndUnit:Tt,hex:St,rgb:Ot,reference:Mt,transforms:Dt,whitespace:At,isHex:It,isRgb:Rt,isBlank:Pt,isNumber:Bt,isImage:Ht,delimiter:Nt,isPathLetter:Ft};function $t(t){const e=Math.round(t),i=Math.max(0,Math.min(255,e)).toString(16);return 1===i.length?"0"+i:i}function qt(t,e){for(let i=e.length;i--;)if(null==t[e[i]])return!1;return!0}function zt(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}W("Dom",{classes:function(){const t=this.attr("class");return null==t?[]:t.trim().split(Nt)},hasClass:function(t){return-1!==this.classes().indexOf(t)},addClass:function(t){if(!this.hasClass(t)){const e=this.classes();e.push(t),this.attr("class",e.join(" "))}return this},removeClass:function(t){return this.hasClass(t)&&this.attr("class",this.classes().filter((function(e){return e!==t})).join(" ")),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)}}),W("Dom",{css:function(t,e){const i={};if(0===arguments.length)return this.node.style.cssText.split(/\s*;\s*/).filter((function(t){return!!t.length})).forEach((function(t){const e=t.split(/\s*:\s*/);i[e[0]]=e[1]})),i;if(arguments.length<2){if(Array.isArray(t)){for(const e of t){const t=X(e);i[e]=this.node.style[t]}return i}if("string"==typeof t)return this.node.style[X(t)];if("object"==typeof t)for(const e in t)this.node.style[X(e)]=null==t[e]||Pt.test(t[e])?"":t[e]}return 2===arguments.length&&(this.node.style[X(t)]=null==e||Pt.test(e)?"":e),this},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},visible:function(){return"none"!==this.css("display")}}),W("Dom",{data:function(t,e,i){if(null==t)return this.data(z(j(this.node.attributes,(t=>0===t.nodeName.indexOf("data-"))),(t=>t.nodeName.slice(5))));if(t instanceof Array){const e={};for(const i of t)e[i]=this.data(i);return e}if("object"==typeof t)for(e in t)this.data(e,t[e]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+t))}catch(e){return this.attr("data-"+t)}else this.attr("data-"+t,null===e?null:!0===i||"string"==typeof e||"number"==typeof e?e:JSON.stringify(e));return this}}),W("Dom",{remember:function(t,e){if("object"==typeof arguments[0])for(const e in t)this.remember(e,t[e]);else{if(1===arguments.length)return this.memory()[t];this.memory()[t]=e}return this},forget:function(){if(0===arguments.length)this._memory={};else for(let t=arguments.length-1;t>=0;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory=this._memory||{}}});class jt{constructor(...t){this.init(...t)}static isColor(t){return t&&(t instanceof jt||this.isRgb(t)||this.test(t))}static isRgb(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b}static random(t="vibrant",e,i){const{random:s,round:n,sin:r,PI:o}=Math;if("vibrant"===t){const t=24*s()+57,e=38*s()+45,i=360*s();return new jt(t,e,i,"lch")}if("sine"===t){const t=n(80*r(2*o*(e=null==e?s():e)/.5+.01)+150),i=n(50*r(2*o*e/.5+4.6)+200),a=n(100*r(2*o*e/.5+2.3)+150);return new jt(t,i,a)}if("pastel"===t){const t=8*s()+86,e=17*s()+9,i=360*s();return new jt(t,e,i,"lch")}if("dark"===t){const t=10+10*s(),e=50*s()+86,i=360*s();return new jt(t,e,i,"lch")}if("rgb"===t){const t=255*s(),e=255*s(),i=255*s();return new jt(t,e,i)}if("lab"===t){const t=100*s(),e=256*s()-128,i=256*s()-128;return new jt(t,e,i,"lab")}if("grey"===t){const t=255*s();return new jt(t,t,t)}throw new Error("Unsupported random color mode")}static test(t){return"string"==typeof t&&(It.test(t)||Rt.test(t))}cmyk(){const{_a:t,_b:e,_c:i}=this.rgb(),[s,n,r]=[t,e,i].map((t=>t/255)),o=Math.min(1-s,1-n,1-r);return 1===o?new jt(0,0,0,1,"cmyk"):new jt((1-s-o)/(1-o),(1-n-o)/(1-o),(1-r-o)/(1-o),o,"cmyk")}hsl(){const{_a:t,_b:e,_c:i}=this.rgb(),[s,n,r]=[t,e,i].map((t=>t/255)),o=Math.max(s,n,r),a=Math.min(s,n,r),l=(o+a)/2,h=o===a,c=o-a;return new jt(360*(h?0:o===s?((n-r)/c+(n<r?6:0))/6:o===n?((r-s)/c+2)/6:o===r?((s-n)/c+4)/6:0),100*(h?0:l>.5?c/(2-o-a):c/(o+a)),100*l,"hsl")}init(t=0,e=0,i=0,s=0,n="rgb"){if(t=t||0,this.space)for(const t in this.space)delete this[this.space[t]];if("number"==typeof t)n="string"==typeof s?s:n,s="string"==typeof s?0:s,Object.assign(this,{_a:t,_b:e,_c:i,_d:s,space:n});else if(t instanceof Array)this.space=e||("string"==typeof t[3]?t[3]:t[4])||"rgb",Object.assign(this,{_a:t[0],_b:t[1],_c:t[2],_d:t[3]||0});else if(t instanceof Object){const i=function(t,e){const i=qt(t,"rgb")?{_a:t.r,_b:t.g,_c:t.b,_d:0,space:"rgb"}:qt(t,"xyz")?{_a:t.x,_b:t.y,_c:t.z,_d:0,space:"xyz"}:qt(t,"hsl")?{_a:t.h,_b:t.s,_c:t.l,_d:0,space:"hsl"}:qt(t,"lab")?{_a:t.l,_b:t.a,_c:t.b,_d:0,space:"lab"}:qt(t,"lch")?{_a:t.l,_b:t.c,_c:t.h,_d:0,space:"lch"}:qt(t,"cmyk")?{_a:t.c,_b:t.m,_c:t.y,_d:t.k,space:"cmyk"}:{_a:0,_b:0,_c:0,space:"rgb"};return i.space=e||i.space,i}(t,e);Object.assign(this,i)}else if("string"==typeof t)if(Rt.test(t)){const e=t.replace(At,""),[i,s,n]=Ot.exec(e).slice(1,4).map((t=>parseInt(t)));Object.assign(this,{_a:i,_b:s,_c:n,_d:0,space:"rgb"})}else{if(!It.test(t))throw Error("Unsupported string format, can't construct Color");{const e=t=>parseInt(t,16),[,i,s,n]=St.exec(function(t){return 4===t.length?["#",t.substring(1,2),t.substring(1,2),t.substring(2,3),t.substring(2,3),t.substring(3,4),t.substring(3,4)].join(""):t}(t)).map(e);Object.assign(this,{_a:i,_b:s,_c:n,_d:0,space:"rgb"})}}const{_a:r,_b:o,_c:a,_d:l}=this,h="rgb"===this.space?{r,g:o,b:a}:"xyz"===this.space?{x:r,y:o,z:a}:"hsl"===this.space?{h:r,s:o,l:a}:"lab"===this.space?{l:r,a:o,b:a}:"lch"===this.space?{l:r,c:o,h:a}:"cmyk"===this.space?{c:r,m:o,y:a,k:l}:{};Object.assign(this,h)}lab(){const{x:t,y:e,z:i}=this.xyz();return new jt(116*e-16,500*(t-e),200*(e-i),"lab")}lch(){const{l:t,a:e,b:i}=this.lab(),s=Math.sqrt(e**2+i**2);let n=180*Math.atan2(i,e)/Math.PI;return n<0&&(n*=-1,n=360-n),new jt(t,s,n,"lch")}rgb(){if("rgb"===this.space)return this;if("lab"===(t=this.space)||"xyz"===t||"lch"===t){let{x:t,y:e,z:i}=this;if("lab"===this.space||"lch"===this.space){let{l:s,a:n,b:r}=this;if("lch"===this.space){const{c:t,h:e}=this,i=Math.PI/180;n=t*Math.cos(i*e),r=t*Math.sin(i*e)}const o=(s+16)/116,a=n/500+o,l=o-r/200,h=16/116,c=.008856,d=7.787;t=.95047*(a**3>c?a**3:(a-h)/d),e=1*(o**3>c?o**3:(o-h)/d),i=1.08883*(l**3>c?l**3:(l-h)/d)}const s=3.2406*t+-1.5372*e+-.4986*i,n=-.9689*t+1.8758*e+.0415*i,r=.0557*t+-.204*e+1.057*i,o=Math.pow,a=.0031308,l=s>a?1.055*o(s,1/2.4)-.055:12.92*s,h=n>a?1.055*o(n,1/2.4)-.055:12.92*n,c=r>a?1.055*o(r,1/2.4)-.055:12.92*r;return new jt(255*l,255*h,255*c)}if("hsl"===this.space){let{h:t,s:e,l:i}=this;if(t/=360,e/=100,i/=100,0===e)return i*=255,new jt(i,i,i);const s=i<.5?i*(1+e):i+e-i*e,n=2*i-s,r=255*zt(n,s,t+1/3),o=255*zt(n,s,t),a=255*zt(n,s,t-1/3);return new jt(r,o,a)}if("cmyk"===this.space){const{c:t,m:e,y:i,k:s}=this,n=255*(1-Math.min(1,t*(1-s)+s)),r=255*(1-Math.min(1,e*(1-s)+s)),o=255*(1-Math.min(1,i*(1-s)+s));return new jt(n,r,o)}return this;var t}toArray(){const{_a:t,_b:e,_c:i,_d:s,space:n}=this;return[t,e,i,s,n]}toHex(){const[t,e,i]=this._clamped().map($t);return`#${t}${e}${i}`}toRgb(){const[t,e,i]=this._clamped();return`rgb(${t},${e},${i})`}toString(){return this.toHex()}xyz(){const{_a:t,_b:e,_c:i}=this.rgb(),[s,n,r]=[t,e,i].map((t=>t/255)),o=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92,a=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,l=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,h=(.4124*o+.3576*a+.1805*l)/.95047,c=(.2126*o+.7152*a+.0722*l)/1,d=(.0193*o+.1192*a+.9505*l)/1.08883,u=h>.008856?Math.pow(h,1/3):7.787*h+16/116,p=c>.008856?Math.pow(c,1/3):7.787*c+16/116,m=d>.008856?Math.pow(d,1/3):7.787*d+16/116;return new jt(u,p,m,"xyz")}_clamped(){const{_a:t,_b:e,_c:i}=this.rgb(),{max:s,min:n,round:r}=Math;return[t,e,i].map((t=>s(0,n(r(t),255))))}}class Vt{constructor(...t){this.init(...t)}clone(){return new Vt(this)}init(t,e){const i=Array.isArray(t)?{x:t[0],y:t[1]}:"object"==typeof t?{x:t.x,y:t.y}:{x:t,y:e};return this.x=null==i.x?0:i.x,this.y=null==i.y?0:i.y,this}toArray(){return[this.x,this.y]}transform(t){return this.clone().transformO(t)}transformO(t){Yt.isMatrixLike(t)||(t=new Yt(t));const{x:e,y:i}=this;return this.x=t.a*e+t.c*i+t.e,this.y=t.b*e+t.d*i+t.f,this}}function Xt(t,e,i){return Math.abs(e-t)<(i||1e-6)}class Yt{constructor(...t){this.init(...t)}static formatTransforms(t){const e="both"===t.flip||!0===t.flip,i=t.flip&&(e||"x"===t.flip)?-1:1,s=t.flip&&(e||"y"===t.flip)?-1:1,n=t.skew&&t.skew.length?t.skew[0]:isFinite(t.skew)?t.skew:isFinite(t.skewX)?t.skewX:0,r=t.skew&&t.skew.length?t.skew[1]:isFinite(t.skew)?t.skew:isFinite(t.skewY)?t.skewY:0,o=t.scale&&t.scale.length?t.scale[0]*i:isFinite(t.scale)?t.scale*i:isFinite(t.scaleX)?t.scaleX*i:i,a=t.scale&&t.scale.length?t.scale[1]*s:isFinite(t.scale)?t.scale*s:isFinite(t.scaleY)?t.scaleY*s:s,l=t.shear||0,h=t.rotate||t.theta||0,c=new Vt(t.origin||t.around||t.ox||t.originX,t.oy||t.originY),d=c.x,u=c.y,p=new Vt(t.position||t.px||t.positionX||NaN,t.py||t.positionY||NaN),m=p.x,f=p.y,g=new Vt(t.translate||t.tx||t.translateX,t.ty||t.translateY),y=g.x,_=g.y,v=new Vt(t.relative||t.rx||t.relativeX,t.ry||t.relativeY);return{scaleX:o,scaleY:a,skewX:n,skewY:r,shear:l,theta:h,rx:v.x,ry:v.y,tx:y,ty:_,ox:d,oy:u,px:m,py:f}}static fromArray(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}static isMatrixLike(t){return null!=t.a||null!=t.b||null!=t.c||null!=t.d||null!=t.e||null!=t.f}static matrixMultiply(t,e,i){const s=t.a*e.a+t.c*e.b,n=t.b*e.a+t.d*e.b,r=t.a*e.c+t.c*e.d,o=t.b*e.c+t.d*e.d,a=t.e+t.a*e.e+t.c*e.f,l=t.f+t.b*e.e+t.d*e.f;return i.a=s,i.b=n,i.c=r,i.d=o,i.e=a,i.f=l,i}around(t,e,i){return this.clone().aroundO(t,e,i)}aroundO(t,e,i){const s=t||0,n=e||0;return this.translateO(-s,-n).lmultiplyO(i).translateO(s,n)}clone(){return new Yt(this)}decompose(t=0,e=0){const i=this.a,s=this.b,n=this.c,r=this.d,o=this.e,a=this.f,l=i*r-s*n,h=l>0?1:-1,c=h*Math.sqrt(i*i+s*s),d=Math.atan2(h*s,h*i),u=180/Math.PI*d,p=Math.cos(d),m=Math.sin(d),f=(i*n+s*r)/l,g=n*c/(f*i-s)||r*c/(f*s+i);return{scaleX:c,scaleY:g,shear:f,rotate:u,translateX:o-t+t*p*c+e*(f*p*c-m*g),translateY:a-e+t*m*c+e*(f*m*c+p*g),originX:t,originY:e,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}equals(t){if(t===this)return!0;const e=new Yt(t);return Xt(this.a,e.a)&&Xt(this.b,e.b)&&Xt(this.c,e.c)&&Xt(this.d,e.d)&&Xt(this.e,e.e)&&Xt(this.f,e.f)}flip(t,e){return this.clone().flipO(t,e)}flipO(t,e){return"x"===t?this.scaleO(-1,1,e,0):"y"===t?this.scaleO(1,-1,0,e):this.scaleO(-1,-1,t,e||t)}init(t){const e=Yt.fromArray([1,0,0,1,0,0]);return t=t instanceof _e?t.matrixify():"string"==typeof t?Yt.fromArray(t.split(Nt).map(parseFloat)):Array.isArray(t)?Yt.fromArray(t):"object"==typeof t&&Yt.isMatrixLike(t)?t:"object"==typeof t?(new Yt).transform(t):6===arguments.length?Yt.fromArray([].slice.call(arguments)):e,this.a=null!=t.a?t.a:e.a,this.b=null!=t.b?t.b:e.b,this.c=null!=t.c?t.c:e.c,this.d=null!=t.d?t.d:e.d,this.e=null!=t.e?t.e:e.e,this.f=null!=t.f?t.f:e.f,this}inverse(){return this.clone().inverseO()}inverseO(){const t=this.a,e=this.b,i=this.c,s=this.d,n=this.e,r=this.f,o=t*s-e*i;if(!o)throw new Error("Cannot invert "+this);const a=s/o,l=-e/o,h=-i/o,c=t/o,d=-(a*n+h*r),u=-(l*n+c*r);return this.a=a,this.b=l,this.c=h,this.d=c,this.e=d,this.f=u,this}lmultiply(t){return this.clone().lmultiplyO(t)}lmultiplyO(t){const e=t instanceof Yt?t:new Yt(t);return Yt.matrixMultiply(e,this,this)}multiply(t){return this.clone().multiplyO(t)}multiplyO(t){const e=t instanceof Yt?t:new Yt(t);return Yt.matrixMultiply(this,e,this)}rotate(t,e,i){return this.clone().rotateO(t,e,i)}rotateO(t,e=0,i=0){t=V(t);const s=Math.cos(t),n=Math.sin(t),{a:r,b:o,c:a,d:l,e:h,f:c}=this;return this.a=r*s-o*n,this.b=o*s+r*n,this.c=a*s-l*n,this.d=l*s+a*n,this.e=h*s-c*n+i*n-e*s+e,this.f=c*s+h*n-e*n-i*s+i,this}scale(t,e,i,s){return this.clone().scaleO(...arguments)}scaleO(t,e=t,i=0,s=0){3===arguments.length&&(s=i,i=e,e=t);const{a:n,b:r,c:o,d:a,e:l,f:h}=this;return this.a=n*t,this.b=r*e,this.c=o*t,this.d=a*e,this.e=l*t-i*t+i,this.f=h*e-s*e+s,this}shear(t,e,i){return this.clone().shearO(t,e,i)}shearO(t,e=0,i=0){const{a:s,b:n,c:r,d:o,e:a,f:l}=this;return this.a=s+n*t,this.c=r+o*t,this.e=a+l*t-i*t,this}skew(t,e,i,s){return this.clone().skewO(...arguments)}skewO(t,e=t,i=0,s=0){3===arguments.length&&(s=i,i=e,e=t),t=V(t),e=V(e);const n=Math.tan(t),r=Math.tan(e),{a:o,b:a,c:l,d:h,e:c,f:d}=this;return this.a=o+a*n,this.b=a+o*r,this.c=l+h*n,this.d=h+l*r,this.e=c+d*n-s*n,this.f=d+c*r-i*r,this}skewX(t,e,i){return this.skew(t,0,e,i)}skewY(t,e,i){return this.skew(0,t,e,i)}toArray(){return[this.a,this.b,this.c,this.d,this.e,this.f]}toString(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}transform(t){if(Yt.isMatrixLike(t))return new Yt(t).multiplyO(this);const e=Yt.formatTransforms(t),{x:i,y:s}=new Vt(e.ox,e.oy).transform(this),n=(new Yt).translateO(e.rx,e.ry).lmultiplyO(this).translateO(-i,-s).scaleO(e.scaleX,e.scaleY).skewO(e.skewX,e.skewY).shearO(e.shear).rotateO(e.theta).translateO(i,s);if(isFinite(e.px)||isFinite(e.py)){const t=new Vt(i,s).transform(n),r=isFinite(e.px)?e.px-t.x:0,o=isFinite(e.py)?e.py-t.y:0;n.translateO(r,o)}return n.translateO(e.tx,e.ty),n}translate(t,e){return this.clone().translateO(t,e)}translateO(t,e){return this.e+=t||0,this.f+=e||0,this}valueOf(){return{a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}}function Ut(){if(!Ut.nodes){const t=ft().size(2,0);t.node.style.cssText=["opacity: 0","position: absolute","left: -100%","top: -100%","overflow: hidden"].join(";"),t.attr("focusable","false"),t.attr("aria-hidden","true");const e=t.path().node;Ut.nodes={svg:t,path:e}}if(!Ut.nodes.svg.node.parentNode){const t=nt.document.body||nt.document.documentElement;Ut.nodes.svg.addTo(t)}return Ut.nodes}function Gt(t){return!(t.width||t.height||t.x||t.y)}wt(Yt,"Matrix");class Kt{constructor(...t){this.init(...t)}addOffset(){return this.x+=nt.window.pageXOffset,this.y+=nt.window.pageYOffset,new Kt(this)}init(t){return t="string"==typeof t?t.split(Nt).map(parseFloat):Array.isArray(t)?t:"object"==typeof t?[null!=t.left?t.left:t.x,null!=t.top?t.top:t.y,t.width,t.height]:4===arguments.length?[].slice.call(arguments):[0,0,0,0],this.x=t[0]||0,this.y=t[1]||0,this.width=this.w=t[2]||0,this.height=this.h=t[3]||0,this.x2=this.x+this.w,this.y2=this.y+this.h,this.cx=this.x+this.w/2,this.cy=this.y+this.h/2,this}isNulled(){return Gt(this)}merge(t){const e=Math.min(this.x,t.x),i=Math.min(this.y,t.y),s=Math.max(this.x+this.width,t.x+t.width)-e,n=Math.max(this.y+this.height,t.y+t.height)-i;return new Kt(e,i,s,n)}toArray(){return[this.x,this.y,this.width,this.height]}toString(){return this.x+" "+this.y+" "+this.width+" "+this.height}transform(t){t instanceof Yt||(t=new Yt(t));let e=1/0,i=-1/0,s=1/0,n=-1/0;return[new Vt(this.x,this.y),new Vt(this.x2,this.y),new Vt(this.x,this.y2),new Vt(this.x2,this.y2)].forEach((function(r){r=r.transform(t),e=Math.min(e,r.x),i=Math.max(i,r.x),s=Math.min(s,r.y),n=Math.max(n,r.y)})),new Kt(e,s,i-e,n-s)}}function Jt(t,e,i){let s;try{if(s=e(t.node),Gt(s)&&(n=t.node)!==nt.document&&!(nt.document.documentElement.contains||function(t){for(;t.parentNode;)t=t.parentNode;return t===nt.document}).call(nt.document.documentElement,n))throw new Error("Element not in the dom")}catch(e){s=i(t)}var n;return s}W({viewbox:{viewbox(t,e,i,s){return null==t?new Kt(this.attr("viewBox")):this.attr("viewBox",new Kt(t,e,i,s))},zoom(t,e){let{width:i,height:s}=this.attr(["width","height"]);if((i||s)&&"string"!=typeof i&&"string"!=typeof s||(i=this.node.clientWidth,s=this.node.clientHeight),!i||!s)throw new Error("Impossible to get absolute width and height. Please provide an absolute width and height attribute on the zooming element");const n=this.viewbox(),r=i/n.width,o=s/n.height,a=Math.min(r,o);if(null==t)return a;let l=a/t;l===1/0&&(l=Number.MAX_SAFE_INTEGER/100),e=e||new Vt(i/2/r+n.x,s/2/o+n.y);const h=new Kt(n).transform(new Yt({scale:l,origin:e}));return this.viewbox(h)}}}),wt(Kt,"Box");class Qt extends Array{constructor(t=[],...e){if(super(t,...e),"number"==typeof t)return this;this.length=0,this.push(...t)}}Ct([Qt],{each(t,...e){return"function"==typeof t?this.map(((e,i,s)=>t.call(e,e,i,s))):this.map((i=>i[t](...e)))},toArray(){return Array.prototype.concat.apply([],this)}});const Zt=["toArray","constructor","each"];function te(t,e){return new Qt(z((e||nt.document).querySelectorAll(t),(function(t){return yt(t)})))}Qt.extend=function(t){t=t.reduce(((t,e)=>(Zt.includes(e)||"_"===e[0]||(t[e]=function(...t){return this.each(e,...t)}),t)),{}),Ct([Qt],t)};let ee=0;const ie={};function se(t){let e=t.getEventHolder();return e===nt.window&&(e=ie),e.events||(e.events={}),e.events}function ne(t){return t.getEventTarget()}function re(t){let e=t.getEventHolder();e===nt.window&&(e=ie),e.events&&(e.events={})}function oe(t,e,i,s,n){const r=i.bind(s||t),o=ft(t),a=se(o),l=ne(o);e=Array.isArray(e)?e:e.split(Nt),i._svgjsListenerId||(i._svgjsListenerId=++ee),e.forEach((function(t){const e=t.split(".")[0],s=t.split(".")[1]||"*";a[e]=a[e]||{},a[e][s]=a[e][s]||{},a[e][s][i._svgjsListenerId]=r,l.addEventListener(e,r,n||!1)}))}function ae(t,e,i,s){const n=ft(t),r=se(n),o=ne(n);("function"!=typeof i||(i=i._svgjsListenerId))&&(e=Array.isArray(e)?e:(e||"").split(Nt)).forEach((function(t){const e=t&&t.split(".")[0],a=t&&t.split(".")[1];let l,h;if(i)r[e]&&r[e][a||"*"]&&(o.removeEventListener(e,r[e][a||"*"][i],s||!1),delete r[e][a||"*"][i]);else if(e&&a){if(r[e]&&r[e][a]){for(h in r[e][a])ae(o,[e,a].join("."),h);delete r[e][a]}}else if(a)for(t in r)for(l in r[t])a===l&&ae(o,[t,a].join("."));else if(e){if(r[e]){for(l in r[e])ae(o,[e,l].join("."));delete r[e]}}else{for(t in r)ae(o,t);re(n)}}))}function le(t,e,i,s){const n=ne(t);return e instanceof nt.window.Event||(e=new nt.window.CustomEvent(e,{detail:i,cancelable:!0,...s})),n.dispatchEvent(e),e}class he extends dt{addEventListener(){}dispatch(t,e,i){return le(this,t,e,i)}dispatchEvent(t){const e=this.getEventHolder().events;if(!e)return!0;const i=e[t.type];for(const e in i)for(const s in i[e])i[e][s](t);return!t.defaultPrevented}fire(t,e,i){return this.dispatch(t,e,i),this}getEventHolder(){return this}getEventTarget(){return this}off(t,e,i){return ae(this,t,e,i),this}on(t,e,i,s){return oe(this,t,e,i,s),this}removeEventListener(){}}function ce(){}wt(he,"EventTarget");const de={duration:400,ease:">",delay:0},ue={"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","text-anchor":"start"};var pe={__proto__:null,noop:ce,timeline:de,attrs:ue};class me extends Array{constructor(...t){super(...t),this.init(...t)}clone(){return new this.constructor(this)}init(t){return"number"==typeof t||(this.length=0,this.push(...this.parse(t))),this}parse(t=[]){return t instanceof Array?t:t.trim().split(Nt).map(parseFloat)}toArray(){return Array.prototype.concat.apply([],this)}toSet(){return new Set(this)}toString(){return this.join(" ")}valueOf(){const t=[];return t.push(...this),t}}class fe{constructor(...t){this.init(...t)}convert(t){return new fe(this.value,t)}divide(t){return t=new fe(t),new fe(this/t,this.unit||t.unit)}init(t,e){return e=Array.isArray(t)?t[1]:e,t=Array.isArray(t)?t[0]:t,this.value=0,this.unit=e||"","number"==typeof t?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-34e37:34e37:"string"==typeof t?(e=t.match(Tt))&&(this.value=parseFloat(e[1]),"%"===e[5]?this.value/=100:"s"===e[5]&&(this.value*=1e3),this.unit=e[5]):t instanceof fe&&(this.value=t.valueOf(),this.unit=t.unit),this}minus(t){return t=new fe(t),new fe(this-t,this.unit||t.unit)}plus(t){return t=new fe(t),new fe(this+t,this.unit||t.unit)}times(t){return t=new fe(t),new fe(this*t,this.unit||t.unit)}toArray(){return[this.value,this.unit]}toJSON(){return this.toString()}toString(){return("%"===this.unit?~~(1e8*this.value)/1e6:"s"===this.unit?this.value/1e3:this.value)+this.unit}valueOf(){return this.value}}const ge=[];class ye extends he{constructor(t,e){super(),this.node=t,this.type=t.nodeName,e&&t!==e&&this.attr(e)}add(t,e){return(t=ft(t)).removeNamespace&&this.node instanceof nt.window.SVGElement&&t.removeNamespace(),null==e?this.node.appendChild(t.node):t.node!==this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this}addTo(t,e){return ft(t).put(this,e)}children(){return new Qt(z(this.node.children,(function(t){return yt(t)})))}clear(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this}clone(t=!0){return this.writeDataToDom(),new this.constructor(kt(this.node.cloneNode(t)))}each(t,e){const i=this.children();let s,n;for(s=0,n=i.length;s<n;s++)t.apply(i[s],[s,i]),e&&i[s].each(t,e);return this}element(t,e){return this.put(new ye(mt(t),e))}first(){return yt(this.node.firstChild)}get(t){return yt(this.node.childNodes[t])}getEventHolder(){return this.node}getEventTarget(){return this.node}has(t){return this.index(t)>=0}html(t,e){return this.xml(t,e,Z)}id(t){return void 0!==t||this.node.id||(this.node.id=Et(this.type)),this.attr("id",t)}index(t){return[].slice.call(this.node.childNodes).indexOf(t.node)}last(){return yt(this.node.lastChild)}matches(t){const e=this.node,i=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector||null;return i&&i.call(e,t)}parent(t){let e=this;if(!e.node.parentNode)return null;if(e=yt(e.node.parentNode),!t)return e;do{if("string"==typeof t?e.matches(t):e instanceof t)return e}while(e=yt(e.node.parentNode));return e}put(t,e){return t=ft(t),this.add(t,e),t}putIn(t,e){return ft(t).add(this,e)}remove(){return this.parent()&&this.parent().removeElement(this),this}removeElement(t){return this.node.removeChild(t.node),this}replace(t){return t=ft(t),this.node.parentNode&&this.node.parentNode.replaceChild(t.node,this.node),t}round(t=2,e=null){const i=10**t,s=this.attr(e);for(const t in s)"number"==typeof s[t]&&(s[t]=Math.round(s[t]*i)/i);return this.attr(s),this}svg(t,e){return this.xml(t,e,Q)}toString(){return this.id()}words(t){return this.node.textContent=t,this}wrap(t){const e=this.parent();if(!e)return this.addTo(t);const i=e.index(this);return e.put(t,i).put(this)}writeDataToDom(){return this.each((function(){this.writeDataToDom()})),this}xml(t,e,i){if("boolean"==typeof t&&(i=e,e=t,t=null),null==t||"function"==typeof t){e=null==e||e,this.writeDataToDom();let i=this;if(null!=t){if(i=yt(i.node.cloneNode(!0)),e){const e=t(i);if(i=e||i,!1===e)return""}i.each((function(){const e=t(this),i=e||this;!1===e?this.remove():e&&this!==i&&this.replace(i)}),!0)}return e?i.node.outerHTML:i.node.innerHTML}e=null!=e&&e;const s=mt("wrapper",i),n=nt.document.createDocumentFragment();s.innerHTML=t;for(let t=s.children.length;t--;)n.appendChild(s.firstElementChild);const r=this.parent();return e?this.replace(n)&&r:this.add(n)}}Ct(ye,{attr:function(t,e,i){if(null==t){t={},e=this.node.attributes;for(const i of e)t[i.nodeName]=Bt.test(i.nodeValue)?parseFloat(i.nodeValue):i.nodeValue;return t}if(t instanceof Array)return t.reduce(((t,e)=>(t[e]=this.attr(e),t)),{});if("object"==typeof t&&t.constructor===Object)for(e in t)this.attr(e,t[e]);else if(null===e)this.node.removeAttribute(t);else{if(null==e)return null==(e=this.node.getAttribute(t))?ue[t]:Bt.test(e)?parseFloat(e):e;"number"==typeof(e=ge.reduce(((e,i)=>i(t,e,this)),e))?e=new fe(e):jt.isColor(e)?e=new jt(e):e.constructor===Array&&(e=new me(e)),"leading"===t?this.leading&&this.leading(e):"string"==typeof i?this.node.setAttributeNS(i,t,e.toString()):this.node.setAttribute(t,e.toString()),!this.rebuild||"font-size"!==t&&"x"!==t||this.rebuild()}return this},find:function(t){return te(t,this.node)},findOne:function(t){return yt(this.node.querySelector(t))}}),wt(ye,"Dom");class _e extends ye{constructor(t,e){super(t,e),this.dom={},this.node.instance=this,t.hasAttribute("svgjs:data")&&this.setData(JSON.parse(t.getAttribute("svgjs:data"))||{})}center(t,e){return this.cx(t).cy(e)}cx(t){return null==t?this.x()+this.width()/2:this.x(t-this.width()/2)}cy(t){return null==t?this.y()+this.height()/2:this.y(t-this.height()/2)}defs(){const t=this.root();return t&&t.defs()}dmove(t,e){return this.dx(t).dy(e)}dx(t=0){return this.x(new fe(t).plus(this.x()))}dy(t=0){return this.y(new fe(t).plus(this.y()))}getEventHolder(){return this}height(t){return this.attr("height",t)}move(t,e){return this.x(t).y(e)}parents(t=this.root()){const e="string"==typeof t;e||(t=ft(t));const i=new Qt;let s=this;for(;(s=s.parent())&&s.node!==nt.document&&"#document-fragment"!==s.nodeName&&(i.push(s),e||s.node!==t.node)&&(!e||!s.matches(t));)if(s.node===this.root().node)return null;return i}reference(t){if(!(t=this.attr(t)))return null;const e=(t+"").match(Mt);return e?ft(e[1]):null}root(){const t=this.parent(bt(pt));return t&&t.root()}setData(t){return this.dom=t,this}size(t,e){const i=G(this,t,e);return this.width(new fe(i.width)).height(new fe(i.height))}width(t){return this.attr("width",t)}writeDataToDom(){return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),super.writeDataToDom()}x(t){return this.attr("x",t)}y(t){return this.attr("y",t)}}Ct(_e,{bbox:function(){const t=Jt(this,(t=>t.getBBox()),(t=>{try{const e=t.clone().addTo(Ut().svg).show(),i=e.node.getBBox();return e.remove(),i}catch(e){throw new Error(`Getting bbox of element "${t.node.nodeName}" is not possible: ${e.toString()}`)}}));return new Kt(t)},rbox:function(t){const e=Jt(this,(t=>t.getBoundingClientRect()),(t=>{throw new Error(`Getting rbox of element "${t.node.nodeName}" is not possible`)})),i=new Kt(e);return t?i.transform(t.screenCTM().inverseO()):i.addOffset()},inside:function(t,e){const i=this.bbox();return t>i.x&&e>i.y&&t<i.x+i.width&&e<i.y+i.height},point:function(t,e){return new Vt(t,e).transform(this.screenCTM().inverse())},ctm:function(){return new Yt(this.node.getCTM())},screenCTM:function(){if("function"==typeof this.isRoot&&!this.isRoot()){const t=this.rect(1,1),e=t.node.getScreenCTM();return t.remove(),new Yt(e)}return new Yt(this.node.getScreenCTM())}}),wt(_e,"Element");const ve={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,e){return"color"===e?t:t+"-"+e}};["fill","stroke"].forEach((function(t){const e={};let i;e[t]=function(e){if(void 0===e)return this.attr(t);if("string"==typeof e||e instanceof jt||jt.isRgb(e)||e instanceof _e)this.attr(t,e);else for(i=ve[t].length-1;i>=0;i--)null!=e[ve[t][i]]&&this.attr(ve.prefix(t,ve[t][i]),e[ve[t][i]]);return this},W(["Element","Runner"],e)})),W(["Element","Runner"],{matrix:function(t,e,i,s,n,r){return null==t?new Yt(this):this.attr("transform",new Yt(t,e,i,s,n,r))},rotate:function(t,e,i){return this.transform({rotate:t,ox:e,oy:i},!0)},skew:function(t,e,i,s){return 1===arguments.length||3===arguments.length?this.transform({skew:t,ox:e,oy:i},!0):this.transform({skew:[t,e],ox:i,oy:s},!0)},shear:function(t,e,i){return this.transform({shear:t,ox:e,oy:i},!0)},scale:function(t,e,i,s){return 1===arguments.length||3===arguments.length?this.transform({scale:t,ox:e,oy:i},!0):this.transform({scale:[t,e],ox:i,oy:s},!0)},translate:function(t,e){return this.transform({translate:[t,e]},!0)},relative:function(t,e){return this.transform({relative:[t,e]},!0)},flip:function(t="both",e="center"){return-1==="xybothtrue".indexOf(t)&&(e=t,t="both"),this.transform({flip:t,origin:e},!0)},opacity:function(t){return this.attr("opacity",t)}}),W("radius",{radius:function(t,e=t){return"radialGradient"===(this._element||this).type?this.attr("r",new fe(t)):this.rx(t).ry(e)}}),W("Path",{length:function(){return this.node.getTotalLength()},pointAt:function(t){return new Vt(this.node.getPointAtLength(t))}}),W(["Element","Runner"],{font:function(t,e){if("object"==typeof t){for(e in t)this.font(e,t[e]);return this}return"leading"===t?this.leading(e):"anchor"===t?this.attr("text-anchor",e):"size"===t||"family"===t||"weight"===t||"stretch"===t||"variant"===t||"style"===t?this.attr("font-"+t,e):this.attr(t,e)}}),W("Element",["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].reduce((function(t,e){return t[e]=function(t){return null===t?this.off(e):this.on(e,t),this},t}),{})),W("Element",{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(Dt).slice(0,-1).map((function(t){const e=t.trim().split("(");return[e[0],e[1].split(Nt).map((function(t){return parseFloat(t)}))]})).reverse().reduce((function(t,e){return"matrix"===e[0]?t.lmultiply(Yt.fromArray(e[1])):t[e[0]].apply(t,e[1])}),new Yt)},toParent:function(t,e){if(this===t)return this;const i=this.screenCTM(),s=t.screenCTM().inverse();return this.addTo(t,e).untransform().transform(s.multiply(i)),this},toRoot:function(t){return this.toParent(this.root(),t)},transform:function(t,e){if(null==t||"string"==typeof t){const e=new Yt(this).decompose();return null==t?e:e[t]}Yt.isMatrixLike(t)||(t={...t,origin:K(t,this)});const i=new Yt(!0===e?this:e||!1).transform(t);return this.attr("transform",i)}});class we extends _e{flatten(t=this,e){return this.each((function(){if(this instanceof we)return this.flatten().ungroup()})),this}ungroup(t=this.parent(),e=t.index(this)){return e=-1===e?t.children().length:e,this.each((function(i,s){return s[s.length-i-1].toParent(t,e)})),this.remove()}}wt(we,"Container");class be extends we{constructor(t,e=t){super(gt("defs",t),e)}flatten(){return this}ungroup(){return this}}wt(be,"Defs");class xe extends _e{}function Ee(t){return this.attr("rx",t)}function ke(t){return this.attr("ry",t)}function Ce(t){return null==t?this.cx()-this.rx():this.cx(t+this.rx())}function Le(t){return null==t?this.cy()-this.ry():this.cy(t+this.ry())}function Te(t){return this.attr("cx",t)}function Se(t){return this.attr("cy",t)}function Oe(t){return null==t?2*this.rx():this.rx(new fe(t).divide(2))}function Me(t){return null==t?2*this.ry():this.ry(new fe(t).divide(2))}wt(xe,"Shape");var De={__proto__:null,rx:Ee,ry:ke,x:Ce,y:Le,cx:Te,cy:Se,width:Oe,height:Me};class Ae extends xe{constructor(t,e=t){super(gt("ellipse",t),e)}size(t,e){const i=G(this,t,e);return this.rx(new fe(i.width).divide(2)).ry(new fe(i.height).divide(2))}}Ct(Ae,De),W("Container",{ellipse:Lt((function(t=0,e=t){return this.put(new Ae).size(t,e).move(0,0)}))}),wt(Ae,"Ellipse");class Ie extends ye{constructor(t=nt.document.createDocumentFragment()){super(t)}xml(t,e,i){if("boolean"==typeof t&&(i=e,e=t,t=null),null==t||"function"==typeof t){const t=new ye(mt("wrapper",i));return t.add(this.node.cloneNode(!0)),t.xml(!1,i)}return super.xml(t,!1,i)}}function Re(t,e){return"radialGradient"===(this._element||this).type?this.attr({fx:new fe(t),fy:new fe(e)}):this.attr({x1:new fe(t),y1:new fe(e)})}function Pe(t,e){return"radialGradient"===(this._element||this).type?this.attr({cx:new fe(t),cy:new fe(e)}):this.attr({x2:new fe(t),y2:new fe(e)})}wt(Ie,"Fragment");var Be,He={__proto__:null,from:Re,to:Pe};class Ne extends we{constructor(t,e){super(gt(t+"Gradient","string"==typeof t?null:t),e)}attr(t,e,i){return"transform"===t&&(t="gradientTransform"),super.attr(t,e,i)}bbox(){return new Kt}targets(){return te('svg [fill*="'+this.id()+'"]')}toString(){return this.url()}update(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}url(){return'url("#'+this.id()+'")'}}Ct(Ne,He),W({Container:{gradient(...t){return this.defs().gradient(...t)}},Defs:{gradient:Lt((function(t,e){return this.put(new Ne(t)).update(e)}))}}),wt(Ne,"Gradient");class Fe extends we{constructor(t,e=t){super(gt("pattern",t),e)}attr(t,e,i){return"transform"===t&&(t="patternTransform"),super.attr(t,e,i)}bbox(){return new Kt}targets(){return te('svg [fill*="'+this.id()+'"]')}toString(){return this.url()}update(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}url(){return'url("#'+this.id()+'")'}}W({Container:{pattern(...t){return this.defs().pattern(...t)}},Defs:{pattern:Lt((function(t,e,i){return this.put(new Fe).update(i).attr({x:0,y:0,width:t,height:e,patternUnits:"userSpaceOnUse"})}))}}),wt(Fe,"Pattern");class We extends xe{constructor(t,e=t){super(gt("image",t),e)}load(t,e){if(!t)return this;const i=new nt.window.Image;return oe(i,"load",(function(t){const s=this.parent(Fe);0===this.width()&&0===this.height()&&this.size(i.width,i.height),s instanceof Fe&&0===s.width()&&0===s.height()&&s.size(this.width(),this.height()),"function"==typeof e&&e.call(this,t)}),this),oe(i,"load error",(function(){ae(i)})),this.attr("href",i.src=t,et)}}Be=function(t,e,i){return"fill"!==t&&"stroke"!==t||Ht.test(e)&&(e=i.root().defs().image(e)),e instanceof We&&(e=i.root().defs().pattern(0,0,(t=>{t.add(e)}))),e},ge.push(Be),W({Container:{image:Lt((function(t,e){return this.put(new We).size(0,0).load(t,e)}))}}),wt(We,"Image");class $e extends me{bbox(){let t=-1/0,e=-1/0,i=1/0,s=1/0;return this.forEach((function(n){t=Math.max(n[0],t),e=Math.max(n[1],e),i=Math.min(n[0],i),s=Math.min(n[1],s)})),new Kt(i,s,t-i,e-s)}move(t,e){const i=this.bbox();if(t-=i.x,e-=i.y,!isNaN(t)&&!isNaN(e))for(let i=this.length-1;i>=0;i--)this[i]=[this[i][0]+t,this[i][1]+e];return this}parse(t=[0,0]){const e=[];(t=t instanceof Array?Array.prototype.concat.apply([],t):t.trim().split(Nt).map(parseFloat)).length%2!=0&&t.pop();for(let i=0,s=t.length;i<s;i+=2)e.push([t[i],t[i+1]]);return e}size(t,e){let i;const s=this.bbox();for(i=this.length-1;i>=0;i--)s.width&&(this[i][0]=(this[i][0]-s.x)*t/s.width+s.x),s.height&&(this[i][1]=(this[i][1]-s.y)*e/s.height+s.y);return this}toLine(){return{x1:this[0][0],y1:this[0][1],x2:this[1][0],y2:this[1][1]}}toString(){const t=[];for(let e=0,i=this.length;e<i;e++)t.push(this[e].join(","));return t.join(" ")}transform(t){return this.clone().transformO(t)}transformO(t){Yt.isMatrixLike(t)||(t=new Yt(t));for(let e=this.length;e--;){const[i,s]=this[e];this[e][0]=t.a*i+t.c*s+t.e,this[e][1]=t.b*i+t.d*s+t.f}return this}}var qe={__proto__:null,MorphArray:$e,x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},width:function(t){const e=this.bbox();return null==t?e.width:this.size(t,e.height)},height:function(t){const e=this.bbox();return null==t?e.height:this.size(e.width,t)}};class ze extends xe{constructor(t,e=t){super(gt("line",t),e)}array(){return new $e([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])}move(t,e){return this.attr(this.array().move(t,e).toLine())}plot(t,e,i,s){return null==t?this.array():(t=void 0!==e?{x1:t,y1:e,x2:i,y2:s}:new $e(t).toLine(),this.attr(t))}size(t,e){const i=G(this,t,e);return this.attr(this.array().size(i.width,i.height).toLine())}}Ct(ze,qe),W({Container:{line:Lt((function(...t){return ze.prototype.plot.apply(this.put(new ze),null!=t[0]?t:[0,0,0,0])}))}}),wt(ze,"Line");class je extends we{constructor(t,e=t){super(gt("marker",t),e)}height(t){return this.attr("markerHeight",t)}orient(t){return this.attr("orient",t)}ref(t,e){return this.attr("refX",t).attr("refY",e)}toString(){return"url(#"+this.id()+")"}update(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}width(t){return this.attr("markerWidth",t)}}function Ve(t,e){return function(i){return null==i?this[t]:(this[t]=i,e&&e.call(this),this)}}W({Container:{marker(...t){return this.defs().marker(...t)}},Defs:{marker:Lt((function(t,e,i){return this.put(new je).size(t,e).ref(t/2,e/2).viewbox(0,0,t,e).attr("orient","auto").update(i)}))},marker:{marker(t,e,i,s){let n=["marker"];return"all"!==t&&n.push(t),n=n.join("-"),t=arguments[1]instanceof je?arguments[1]:this.defs().marker(e,i,s),this.attr(n,t)}}}),wt(je,"Marker");const Xe={"-":function(t){return t},"<>":function(t){return-Math.cos(t*Math.PI)/2+.5},">":function(t){return Math.sin(t*Math.PI/2)},"<":function(t){return 1-Math.cos(t*Math.PI/2)},bezier:function(t,e,i,s){return function(n){return n<0?t>0?e/t*n:i>0?s/i*n:0:n>1?i<1?(1-s)/(1-i)*n+(s-i)/(1-i):t<1?(1-e)/(1-t)*n+(e-t)/(1-t):1:3*n*(1-n)**2*e+3*n**2*(1-n)*s+n**3}},steps:function(t,e="end"){e=e.split("-").reverse()[0];let i=t;return"none"===e?--i:"both"===e&&++i,(s,n=!1)=>{let r=Math.floor(s*t);const o=s*r%1==0;return"start"!==e&&"both"!==e||++r,n&&o&&--r,s>=0&&r<0&&(r=0),s<=1&&r>i&&(r=i),r/i}}};class Ye{done(){return!1}}class Ue extends Ye{constructor(t=de.ease){super(),this.ease=Xe[t]||t}step(t,e,i){return"number"!=typeof t?i<1?t:e:t+(e-t)*this.ease(i)}}class Ge extends Ye{constructor(t){super(),this.stepper=t}done(t){return t.done}step(t,e,i,s){return this.stepper(t,e,i,s)}}function Ke(){const t=(this._duration||500)/1e3,e=this._overshoot||0,i=Math.PI,s=Math.log(e/100+1e-10),n=-s/Math.sqrt(i*i+s*s),r=3.9/(n*t);this.d=2*n*r,this.k=r*r}class Je extends Ge{constructor(t=500,e=0){super(),this.duration(t).overshoot(e)}step(t,e,i,s){if("string"==typeof t)return t;if(s.done=i===1/0,i===1/0)return e;if(0===i)return t;i>100&&(i=16),i/=1e3;const n=s.velocity||0,r=-this.d*n-this.k*(t-e),o=t+n*i+r*i*i/2;return s.velocity=n+r*i,s.done=Math.abs(e-o)+Math.abs(n)<.002,s.done?e:o}}Ct(Je,{duration:Ve("_duration",Ke),overshoot:Ve("_overshoot",Ke)});class Qe extends Ge{constructor(t=.1,e=.01,i=0,s=1e3){super(),this.p(t).i(e).d(i).windup(s)}step(t,e,i,s){if("string"==typeof t)return t;if(s.done=i===1/0,i===1/0)return e;if(0===i)return t;const n=e-t;let r=(s.integral||0)+n*i;const o=(n-(s.error||0))/i,a=this._windup;return!1!==a&&(r=Math.max(-a,Math.min(r,a))),s.error=n,s.integral=r,s.done=Math.abs(n)<.001,s.done?e:t+(this.P*n+this.I*r+this.D*o)}}Ct(Qe,{windup:Ve("_windup"),p:Ve("P"),i:Ve("I"),d:Ve("D")});const Ze={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0},ti={M:function(t,e,i){return e.x=i.x=t[0],e.y=i.y=t[1],["M",e.x,e.y]},L:function(t,e){return e.x=t[0],e.y=t[1],["L",t[0],t[1]]},H:function(t,e){return e.x=t[0],["H",t[0]]},V:function(t,e){return e.y=t[0],["V",t[0]]},C:function(t,e){return e.x=t[4],e.y=t[5],["C",t[0],t[1],t[2],t[3],t[4],t[5]]},S:function(t,e){return e.x=t[2],e.y=t[3],["S",t[0],t[1],t[2],t[3]]},Q:function(t,e){return e.x=t[2],e.y=t[3],["Q",t[0],t[1],t[2],t[3]]},T:function(t,e){return e.x=t[0],e.y=t[1],["T",t[0],t[1]]},Z:function(t,e,i){return e.x=i.x,e.y=i.y,["Z"]},A:function(t,e){return e.x=t[5],e.y=t[6],["A",t[0],t[1],t[2],t[3],t[4],t[5],t[6]]}},ei="mlhvqtcsaz".split("");for(let t=0,e=ei.length;t<e;++t)ti[ei[t]]=function(t){return function(e,i,s){if("H"===t)e[0]=e[0]+i.x;else if("V"===t)e[0]=e[0]+i.y;else if("A"===t)e[5]=e[5]+i.x,e[6]=e[6]+i.y;else for(let t=0,s=e.length;t<s;++t)e[t]=e[t]+(t%2?i.y:i.x);return ti[t](e,i,s)}}(ei[t].toUpperCase());function ii(t){return t.segment.length&&t.segment.length-1===Ze[t.segment[0].toUpperCase()]}function si(t,e){t.inNumber&&ni(t,!1);const i=Ft.test(e);if(i)t.segment=[e];else{const e=t.lastCommand,i=e.toLowerCase(),s=e===i;t.segment=["m"===i?s?"l":"L":e]}return t.inSegment=!0,t.lastCommand=t.segment[0],i}function ni(t,e){if(!t.inNumber)throw new Error("Parser Error");t.number&&t.segment.push(parseFloat(t.number)),t.inNumber=e,t.number="",t.pointSeen=!1,t.hasExponent=!1,ii(t)&&ri(t)}function ri(t){t.inSegment=!1,t.absolute&&(t.segment=function(t){const e=t.segment[0];return ti[e](t.segment.slice(1),t.p,t.p0)}(t)),t.segments.push(t.segment)}function oi(t){if(!t.segment.length)return!1;const e="A"===t.segment[0].toUpperCase(),i=t.segment.length;return e&&(4===i||5===i)}function ai(t){return"E"===t.lastToken.toUpperCase()}class li extends me{bbox(){return Ut().path.setAttribute("d",this.toString()),new Kt(Ut.nodes.path.getBBox())}move(t,e){const i=this.bbox();if(t-=i.x,e-=i.y,!isNaN(t)&&!isNaN(e))for(let i,s=this.length-1;s>=0;s--)i=this[s][0],"M"===i||"L"===i||"T"===i?(this[s][1]+=t,this[s][2]+=e):"H"===i?this[s][1]+=t:"V"===i?this[s][1]+=e:"C"===i||"S"===i||"Q"===i?(this[s][1]+=t,this[s][2]+=e,this[s][3]+=t,this[s][4]+=e,"C"===i&&(this[s][5]+=t,this[s][6]+=e)):"A"===i&&(this[s][6]+=t,this[s][7]+=e);return this}parse(t="M0 0"){return Array.isArray(t)&&(t=Array.prototype.concat.apply([],t).toString()),function(t,e=!0){let i=0,s="";const n={segment:[],inNumber:!1,number:"",lastToken:"",inSegment:!1,segments:[],pointSeen:!1,hasExponent:!1,absolute:e,p0:new Vt,p:new Vt};for(;n.lastToken=s,s=t.charAt(i++);)if(n.inSegment||!si(n,s))if("."!==s)if(isNaN(parseInt(s)))if(" "!==s&&","!==s)if("-"!==s)if("E"!==s.toUpperCase()){if(Ft.test(s)){if(n.inNumber)ni(n,!1);else{if(!ii(n))throw new Error("parser Error");ri(n)}--i}}else n.number+=s,n.hasExponent=!0;else{if(n.inNumber&&!ai(n)){ni(n,!1),--i;continue}n.number+=s,n.inNumber=!0}else n.inNumber&&ni(n,!1);else{if("0"===n.number||oi(n)){n.inNumber=!0,n.number=s,ni(n,!0);continue}n.inNumber=!0,n.number+=s}else{if(n.pointSeen||n.hasExponent){ni(n,!1),--i;continue}n.inNumber=!0,n.pointSeen=!0,n.number+=s}return n.inNumber&&ni(n,!1),n.inSegment&&ii(n)&&ri(n),n.segments}(t)}size(t,e){const i=this.bbox();let s,n;for(i.width=0===i.width?1:i.width,i.height=0===i.height?1:i.height,s=this.length-1;s>=0;s--)n=this[s][0],"M"===n||"L"===n||"T"===n?(this[s][1]=(this[s][1]-i.x)*t/i.width+i.x,this[s][2]=(this[s][2]-i.y)*e/i.height+i.y):"H"===n?this[s][1]=(this[s][1]-i.x)*t/i.width+i.x:"V"===n?this[s][1]=(this[s][1]-i.y)*e/i.height+i.y:"C"===n||"S"===n||"Q"===n?(this[s][1]=(this[s][1]-i.x)*t/i.width+i.x,this[s][2]=(this[s][2]-i.y)*e/i.height+i.y,this[s][3]=(this[s][3]-i.x)*t/i.width+i.x,this[s][4]=(this[s][4]-i.y)*e/i.height+i.y,"C"===n&&(this[s][5]=(this[s][5]-i.x)*t/i.width+i.x,this[s][6]=(this[s][6]-i.y)*e/i.height+i.y)):"A"===n&&(this[s][1]=this[s][1]*t/i.width,this[s][2]=this[s][2]*e/i.height,this[s][6]=(this[s][6]-i.x)*t/i.width+i.x,this[s][7]=(this[s][7]-i.y)*e/i.height+i.y);return this}toString(){return function(t){let e="";for(let i=0,s=t.length;i<s;i++)e+=t[i][0],null!=t[i][1]&&(e+=t[i][1],null!=t[i][2]&&(e+=" ",e+=t[i][2],null!=t[i][3]&&(e+=" ",e+=t[i][3],e+=" ",e+=t[i][4],null!=t[i][5]&&(e+=" ",e+=t[i][5],e+=" ",e+=t[i][6],null!=t[i][7]&&(e+=" ",e+=t[i][7])))));return e+" "}(this)}}const hi=t=>{const e=typeof t;return"number"===e?fe:"string"===e?jt.isColor(t)?jt:Nt.test(t)?Ft.test(t)?li:me:Tt.test(t)?fe:di:fi.indexOf(t.constructor)>-1?t.constructor:Array.isArray(t)?me:"object"===e?mi:di};class ci{constructor(t){this._stepper=t||new Ue("-"),this._from=null,this._to=null,this._type=null,this._context=null,this._morphObj=null}at(t){return this._morphObj.morph(this._from,this._to,t,this._stepper,this._context)}done(){return this._context.map(this._stepper.done).reduce((function(t,e){return t&&e}),!0)}from(t){return null==t?this._from:(this._from=this._set(t),this)}stepper(t){return null==t?this._stepper:(this._stepper=t,this)}to(t){return null==t?this._to:(this._to=this._set(t),this)}type(t){return null==t?this._type:(this._type=t,this)}_set(t){this._type||this.type(hi(t));let e=new this._type(t);return this._type===jt&&(e=this._to?e[this._to[4]]():this._from?e[this._from[4]]():e),this._type===mi&&(e=this._to?e.align(this._to):this._from?e.align(this._from):e),e=e.toConsumable(),this._morphObj=this._morphObj||new this._type,this._context=this._context||Array.apply(null,Array(e.length)).map(Object).map((function(t){return t.done=!0,t})),e}}class di{constructor(...t){this.init(...t)}init(t){return t=Array.isArray(t)?t[0]:t,this.value=t,this}toArray(){return[this.value]}valueOf(){return this.value}}class ui{constructor(...t){this.init(...t)}init(t){return Array.isArray(t)&&(t={scaleX:t[0],scaleY:t[1],shear:t[2],rotate:t[3],translateX:t[4],translateY:t[5],originX:t[6],originY:t[7]}),Object.assign(this,ui.defaults,t),this}toArray(){const t=this;return[t.scaleX,t.scaleY,t.shear,t.rotate,t.translateX,t.translateY,t.originX,t.originY]}}ui.defaults={scaleX:1,scaleY:1,shear:0,rotate:0,translateX:0,translateY:0,originX:0,originY:0};const pi=(t,e)=>t[0]<e[0]?-1:t[0]>e[0]?1:0;class mi{constructor(...t){this.init(...t)}align(t){const e=this.values;for(let i=0,s=e.length;i<s;++i){if(e[i+1]===t[i+1]){if(e[i+1]===jt&&t[i+7]!==e[i+7]){const e=t[i+7],s=new jt(this.values.splice(i+3,5))[e]().toArray();this.values.splice(i+3,0,...s)}i+=e[i+2]+2;continue}if(!t[i+1])return this;const s=(new t[i+1]).toArray(),n=e[i+2]+3;e.splice(i,n,t[i],t[i+1],t[i+2],...s),i+=e[i+2]+2}return this}init(t){if(this.values=[],Array.isArray(t))return void(this.values=t.slice());t=t||{};const e=[];for(const i in t){const s=hi(t[i]),n=new s(t[i]).toArray();e.push([i,s,n.length,...n])}return e.sort(pi),this.values=e.reduce(((t,e)=>t.concat(e)),[]),this}toArray(){return this.values}valueOf(){const t={},e=this.values;for(;e.length;){const i=e.shift(),s=e.shift(),n=e.shift(),r=e.splice(0,n);t[i]=new s(r)}return t}}const fi=[di,ui,mi];function gi(t=[]){fi.push(...[].concat(t))}function yi(){Ct(fi,{to(t){return(new ci).type(this.constructor).from(this.toArray()).to(t)},fromArray(t){return this.init(t),this},toConsumable(){return this.toArray()},morph(t,e,i,s,n){return this.fromArray(t.map((function(t,r){return s.step(t,e[r],i,n[r],n)})))}})}class _i extends xe{constructor(t,e=t){super(gt("path",t),e)}array(){return this._array||(this._array=new li(this.attr("d")))}clear(){return delete this._array,this}height(t){return null==t?this.bbox().height:this.size(this.bbox().width,t)}move(t,e){return this.attr("d",this.array().move(t,e))}plot(t){return null==t?this.array():this.clear().attr("d","string"==typeof t?t:this._array=new li(t))}size(t,e){const i=G(this,t,e);return this.attr("d",this.array().size(i.width,i.height))}width(t){return null==t?this.bbox().width:this.size(t,this.bbox().height)}x(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)}y(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)}}_i.prototype.MorphArray=li,W({Container:{path:Lt((function(t){return this.put(new _i).plot(t||new li)}))}}),wt(_i,"Path");var vi={__proto__:null,array:function(){return this._array||(this._array=new $e(this.attr("points")))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("points",this.array().move(t,e))},plot:function(t){return null==t?this.array():this.clear().attr("points","string"==typeof t?t:this._array=new $e(t))},size:function(t,e){const i=G(this,t,e);return this.attr("points",this.array().size(i.width,i.height))}};class wi extends xe{constructor(t,e=t){super(gt("polygon",t),e)}}W({Container:{polygon:Lt((function(t){return this.put(new wi).plot(t||new $e)}))}}),Ct(wi,qe),Ct(wi,vi),wt(wi,"Polygon");class bi extends xe{constructor(t,e=t){super(gt("polyline",t),e)}}W({Container:{polyline:Lt((function(t){return this.put(new bi).plot(t||new $e)}))}}),Ct(bi,qe),Ct(bi,vi),wt(bi,"Polyline");class xi extends xe{constructor(t,e=t){super(gt("rect",t),e)}}Ct(xi,{rx:Ee,ry:ke}),W({Container:{rect:Lt((function(t,e){return this.put(new xi).size(t,e)}))}}),wt(xi,"Rect");class Ei{constructor(){this._first=null,this._last=null}first(){return this._first&&this._first.value}last(){return this._last&&this._last.value}push(t){const e=void 0!==t.next?t:{value:t,next:null,prev:null};return this._last?(e.prev=this._last,this._last.next=e,this._last=e):(this._last=e,this._first=e),e}remove(t){t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t===this._last&&(this._last=t.prev),t===this._first&&(this._first=t.next),t.prev=null,t.next=null}shift(){const t=this._first;return t?(this._first=t.next,this._first&&(this._first.prev=null),this._last=this._first?this._last:null,t.value):null}}const ki={nextDraw:null,frames:new Ei,timeouts:new Ei,immediates:new Ei,timer:()=>nt.window.performance||nt.window.Date,transforms:[],frame(t){const e=ki.frames.push({run:t});return null===ki.nextDraw&&(ki.nextDraw=nt.window.requestAnimationFrame(ki._draw)),e},timeout(t,e){e=e||0;const i=ki.timer().now()+e,s=ki.timeouts.push({run:t,time:i});return null===ki.nextDraw&&(ki.nextDraw=nt.window.requestAnimationFrame(ki._draw)),s},immediate(t){const e=ki.immediates.push(t);return null===ki.nextDraw&&(ki.nextDraw=nt.window.requestAnimationFrame(ki._draw)),e},cancelFrame(t){null!=t&&ki.frames.remove(t)},clearTimeout(t){null!=t&&ki.timeouts.remove(t)},cancelImmediate(t){null!=t&&ki.immediates.remove(t)},_draw(t){let e=null;const i=ki.timeouts.last();for(;(e=ki.timeouts.shift())&&(t>=e.time?e.run():ki.timeouts.push(e),e!==i););let s=null;const n=ki.frames.last();for(;s!==n&&(s=ki.frames.shift());)s.run(t);let r=null;for(;r=ki.immediates.shift();)r();ki.nextDraw=ki.timeouts.first()||ki.frames.first()?nt.window.requestAnimationFrame(ki._draw):null}},Ci=function(t){const e=t.start,i=t.runner.duration();return{start:e,duration:i,end:e+i,runner:t.runner}},Li=function(){const t=nt.window;return(t.performance||t.Date).now()};class Ti extends he{constructor(t=Li){super(),this._timeSource=t,this._startTime=0,this._speed=1,this._persist=0,this._nextFrame=null,this._paused=!0,this._runners=[],this._runnerIds=[],this._lastRunnerId=-1,this._time=0,this._lastSourceTime=0,this._lastStepTime=0,this._step=this._stepFn.bind(this,!1),this._stepImmediate=this._stepFn.bind(this,!0)}active(){return!!this._nextFrame}finish(){return this.time(this.getEndTimeOfTimeline()+1),this.pause()}getEndTime(){const t=this.getLastRunnerInfo(),e=t?t.runner.duration():0;return(t?t.start:this._time)+e}getEndTimeOfTimeline(){const t=this._runners.map((t=>t.start+t.runner.duration()));return Math.max(0,...t)}getLastRunnerInfo(){return this.getRunnerInfoById(this._lastRunnerId)}getRunnerInfoById(t){return this._runners[this._runnerIds.indexOf(t)]||null}pause(){return this._paused=!0,this._continue()}persist(t){return null==t?this._persist:(this._persist=t,this)}play(){return this._paused=!1,this.updateTime()._continue()}reverse(t){const e=this.speed();if(null==t)return this.speed(-e);const i=Math.abs(e);return this.speed(t?-i:i)}schedule(t,e,i){if(null==t)return this._runners.map(Ci);let s=0;const n=this.getEndTime();if(e=e||0,null==i||"last"===i||"after"===i)s=n;else if("absolute"===i||"start"===i)s=e,e=0;else if("now"===i)s=this._time;else if("relative"===i){const i=this.getRunnerInfoById(t.id);i&&(s=i.start+e,e=0)}else{if("with-last"!==i)throw new Error('Invalid value for the "when" parameter');{const t=this.getLastRunnerInfo();s=t?t.start:this._time}}t.unschedule(),t.timeline(this);const r=t.persist(),o={persist:null===r?this._persist:r,start:s+e,runner:t};return this._lastRunnerId=t.id,this._runners.push(o),this._runners.sort(((t,e)=>t.start-e.start)),this._runnerIds=this._runners.map((t=>t.runner.id)),this.updateTime()._continue(),this}seek(t){return this.time(this._time+t)}source(t){return null==t?this._timeSource:(this._timeSource=t,this)}speed(t){return null==t?this._speed:(this._speed=t,this)}stop(){return this.time(0),this.pause()}time(t){return null==t?this._time:(this._time=t,this._continue(!0))}unschedule(t){const e=this._runnerIds.indexOf(t.id);return e<0||(this._runners.splice(e,1),this._runnerIds.splice(e,1),t.timeline(null)),this}updateTime(){return this.active()||(this._lastSourceTime=this._timeSource()),this}_continue(t=!1){return ki.cancelFrame(this._nextFrame),this._nextFrame=null,t?this._stepImmediate():(this._paused||(this._nextFrame=ki.frame(this._step)),this)}_stepFn(t=!1){const e=this._timeSource();let i=e-this._lastSourceTime;t&&(i=0);const s=this._speed*i+(this._time-this._lastStepTime);this._lastSourceTime=e,t||(this._time+=s,this._time=this._time<0?0:this._time),this._lastStepTime=this._time,this.fire("time",this._time);for(let t=this._runners.length;t--;){const e=this._runners[t],i=e.runner;this._time-e.start<=0&&i.reset()}let n=!1;for(let t=0,e=this._runners.length;t<e;t++){const i=this._runners[t],r=i.runner;let o=s;const a=this._time-i.start;a<=0?n=!0:(a<o&&(o=a),r.active()&&(r.step(o).done?!0!==i.persist&&r.duration()-r.time()+this._time+i.persist<this._time&&(r.unschedule(),--t,--e):n=!0))}return n&&!(this._speed<0&&0===this._time)||this._runnerIds.length&&this._speed<0&&this._time>0?this._continue():(this.pause(),this.fire("finished")),this}}W({Element:{timeline:function(t){return null==t?(this._timeline=this._timeline||new Ti,this._timeline):(this._timeline=t,this)}}});class Si extends he{constructor(t){super(),this.id=Si.id++,t="function"==typeof(t=null==t?de.duration:t)?new Ge(t):t,this._element=null,this._timeline=null,this.done=!1,this._queue=[],this._duration="number"==typeof t&&t,this._isDeclarative=t instanceof Ge,this._stepper=this._isDeclarative?t:new Ue,this._history={},this.enabled=!0,this._time=0,this._lastTime=0,this._reseted=!0,this.transforms=new Yt,this.transformId=1,this._haveReversed=!1,this._reverse=!1,this._loopsDone=0,this._swing=!1,this._wait=0,this._times=1,this._frameId=null,this._persist=!!this._isDeclarative||null}static sanitise(t,e,i){let s=1,n=!1,r=0;return e=e||de.delay,i=i||"last","object"!=typeof(t=t||de.duration)||t instanceof Ye||(e=t.delay||e,i=t.when||i,n=t.swing||n,s=t.times||s,r=t.wait||r,t=t.duration||de.duration),{duration:t,delay:e,swing:n,times:s,wait:r,when:i}}active(t){return null==t?this.enabled:(this.enabled=t,this)}addTransform(t,e){return this.transforms.lmultiplyO(t),this}after(t){return this.on("finished",t)}animate(t,e,i){const s=Si.sanitise(t,e,i),n=new Si(s.duration);return this._timeline&&n.timeline(this._timeline),this._element&&n.element(this._element),n.loop(s).schedule(s.delay,s.when)}clearTransform(){return this.transforms=new Yt,this}clearTransformsFromQueue(){this.done&&this._timeline&&this._timeline._runnerIds.includes(this.id)||(this._queue=this._queue.filter((t=>!t.isTransform)))}delay(t){return this.animate(0,t)}duration(){return this._times*(this._wait+this._duration)-this._wait}during(t){return this.queue(null,t)}ease(t){return this._stepper=new Ue(t),this}element(t){return null==t?this._element:(this._element=t,t._prepareRunner(),this)}finish(){return this.step(1/0)}loop(t,e,i){return"object"==typeof t&&(e=t.swing,i=t.wait,t=t.times),this._times=t||1/0,this._swing=e||!1,this._wait=i||0,!0===this._times&&(this._times=1/0),this}loops(t){const e=this._duration+this._wait;if(null==t){const t=Math.floor(this._time/e),i=(this._time-t*e)/this._duration;return Math.min(t+i,this._times)}const i=t%1,s=e*Math.floor(t)+this._duration*i;return this.time(s)}persist(t){return null==t?this._persist:(this._persist=t,this)}position(t){const e=this._time,i=this._duration,s=this._wait,n=this._times,r=this._swing,o=this._reverse;let a;if(null==t){const t=function(t){const e=r*Math.floor(t%(2*(s+i))/(s+i)),n=e&&!o||!e&&o,a=Math.pow(-1,n)*(t%(s+i))/i+n;return Math.max(Math.min(a,1),0)},l=n*(s+i)-s;return a=e<=0?Math.round(t(1e-5)):e<l?t(e):Math.round(t(l-1e-5)),a}const l=Math.floor(this.loops()),h=r&&l%2==0;return a=l+(h&&!o||o&&h?t:1-t),this.loops(a)}progress(t){return null==t?Math.min(1,this._time/this.duration()):this.time(t*this.duration())}queue(t,e,i,s){return this._queue.push({initialiser:t||ce,runner:e||ce,retarget:i,isTransform:s,initialised:!1,finished:!1}),this.timeline()&&this.timeline()._continue(),this}reset(){return this._reseted||(this.time(0),this._reseted=!0),this}reverse(t){return this._reverse=null==t?!this._reverse:t,this}schedule(t,e,i){if(t instanceof Ti||(i=e,e=t,t=this.timeline()),!t)throw Error("Runner cannot be scheduled without timeline");return t.schedule(this,e,i),this}step(t){if(!this.enabled)return this;t=null==t?16:t,this._time+=t;const e=this.position(),i=this._lastPosition!==e&&this._time>=0;this._lastPosition=e;const s=this.duration(),n=this._lastTime<=0&&this._time>0,r=this._lastTime<s&&this._time>=s;this._lastTime=this._time,n&&this.fire("start",this);const o=this._isDeclarative;this.done=!o&&!r&&this._time>=s,this._reseted=!1;let a=!1;return(i||o)&&(this._initialise(i),this.transforms=new Yt,a=this._run(o?t:e),this.fire("step",this)),this.done=this.done||a&&o,r&&this.fire("finished",this),this}time(t){if(null==t)return this._time;const e=t-this._time;return this.step(e),this}timeline(t){return void 0===t?this._timeline:(this._timeline=t,this)}unschedule(){const t=this.timeline();return t&&t.unschedule(this),this}_initialise(t){if(t||this._isDeclarative)for(let e=0,i=this._queue.length;e<i;++e){const i=this._queue[e],s=this._isDeclarative||!i.initialised&&t;t=!i.finished,s&&t&&(i.initialiser.call(this),i.initialised=!0)}}_rememberMorpher(t,e){if(this._history[t]={morpher:e,caller:this._queue[this._queue.length-1]},this._isDeclarative){const t=this.timeline();t&&t.play()}}_run(t){let e=!0;for(let i=0,s=this._queue.length;i<s;++i){const s=this._queue[i],n=s.runner.call(this,t);s.finished=s.finished||!0===n,e=e&&s.finished}return e}_tryRetarget(t,e,i){if(this._history[t]){if(!this._history[t].caller.initialised){const e=this._queue.indexOf(this._history[t].caller);return this._queue.splice(e,1),!1}this._history[t].caller.retarget?this._history[t].caller.retarget.call(this,e,i):this._history[t].morpher.to(e),this._history[t].caller.finished=!1;const s=this.timeline();return s&&s.play(),!0}return!1}}Si.id=0;class Oi{constructor(t=new Yt,e=-1,i=!0){this.transforms=t,this.id=e,this.done=i}clearTransformsFromQueue(){}}Ct([Si,Oi],{mergeWith(t){return new Oi(t.transforms.lmultiply(this.transforms),t.id)}});const Mi=(t,e)=>t.lmultiplyO(e),Di=t=>t.transforms;function Ai(){const t=this._transformationRunners.runners.map(Di).reduce(Mi,new Yt);this.transform(t),this._transformationRunners.merge(),1===this._transformationRunners.length()&&(this._frameId=null)}class Ii{constructor(){this.runners=[],this.ids=[]}add(t){if(this.runners.includes(t))return;const e=t.id+1;return this.runners.push(t),this.ids.push(e),this}clearBefore(t){const e=this.ids.indexOf(t+1)||1;return this.ids.splice(0,e,0),this.runners.splice(0,e,new Oi).forEach((t=>t.clearTransformsFromQueue())),this}edit(t,e){const i=this.ids.indexOf(t+1);return this.ids.splice(i,1,t+1),this.runners.splice(i,1,e),this}getByID(t){return this.runners[this.ids.indexOf(t+1)]}length(){return this.ids.length}merge(){let t=null;for(let e=0;e<this.runners.length;++e){const i=this.runners[e];if(!(t&&i.done&&t.done)||i._timeline&&i._timeline._runnerIds.includes(i.id)||t._timeline&&t._timeline._runnerIds.includes(t.id))t=i;else{this.remove(i.id);const s=i.mergeWith(t);this.edit(t.id,s),t=s,--e}}return this}remove(t){const e=this.ids.indexOf(t+1);return this.ids.splice(e,1),this.runners.splice(e,1),this}}W({Element:{animate(t,e,i){const s=Si.sanitise(t,e,i),n=this.timeline();return new Si(s.duration).loop(s).element(this).timeline(n.play()).schedule(s.delay,s.when)},delay(t,e){return this.animate(0,t,e)},_clearTransformRunnersBefore(t){this._transformationRunners.clearBefore(t.id)},_currentTransform(t){return this._transformationRunners.runners.filter((e=>e.id<=t.id)).map(Di).reduce(Mi,new Yt)},_addRunner(t){this._transformationRunners.add(t),ki.cancelImmediate(this._frameId),this._frameId=ki.immediate(Ai.bind(this))},_prepareRunner(){null==this._frameId&&(this._transformationRunners=(new Ii).add(new Oi(new Yt(this))))}}}),Ct(Si,{attr(t,e){return this.styleAttr("attr",t,e)},css(t,e){return this.styleAttr("css",t,e)},styleAttr(t,e,i){if("string"==typeof e)return this.styleAttr(t,{[e]:i});let s=e;if(this._tryRetarget(t,s))return this;let n=new ci(this._stepper).to(s),r=Object.keys(s);return this.queue((function(){n=n.from(this.element()[t](r))}),(function(e){return this.element()[t](n.at(e).valueOf()),n.done()}),(function(e){const i=Object.keys(e),o=(a=r,i.filter((t=>!a.includes(t))));var a;if(o.length){const e=this.element()[t](o),i=new mi(n.from()).valueOf();Object.assign(i,e),n.from(i)}const l=new mi(n.to()).valueOf();Object.assign(l,e),n.to(l),r=i,s=e})),this._rememberMorpher(t,n),this},zoom(t,e){if(this._tryRetarget("zoom",t,e))return this;let i=new ci(this._stepper).to(new fe(t));return this.queue((function(){i=i.from(this.element().zoom())}),(function(t){return this.element().zoom(i.at(t),e),i.done()}),(function(t,s){e=s,i.to(t)})),this._rememberMorpher("zoom",i),this},transform(t,e,i){if(e=t.relative||e,this._isDeclarative&&!e&&this._tryRetarget("transform",t))return this;const s=Yt.isMatrixLike(t);i=null!=t.affine?t.affine:null!=i?i:!s;const n=new ci(this._stepper).type(i?ui:Yt);let r,o,a,l,h;return this.queue((function(){o=o||this.element(),r=r||K(t,o),h=new Yt(e?void 0:o),o._addRunner(this),e||o._clearTransformRunnersBefore(this)}),(function(c){e||this.clearTransform();const{x:d,y:u}=new Vt(r).transform(o._currentTransform(this));let p=new Yt({...t,origin:[d,u]}),m=this._isDeclarative&&a?a:h;if(i){p=p.decompose(d,u),m=m.decompose(d,u);const t=p.rotate,e=m.rotate,i=[t-360,t,t+360],s=i.map((t=>Math.abs(t-e))),n=Math.min(...s),r=s.indexOf(n);p.rotate=i[r]}e&&(s||(p.rotate=t.rotate||0),this._isDeclarative&&l&&(m.rotate=l)),n.from(m),n.to(p);const f=n.at(c);return l=f.rotate,a=new Yt(f),this.addTransform(a),o._addRunner(this),n.done()}),(function(e){(e.origin||"center").toString()!==(t.origin||"center").toString()&&(r=K(e,o)),t={...e,origin:r}}),!0),this._isDeclarative&&this._rememberMorpher("transform",n),this},x(t,e){return this._queueNumber("x",t)},y(t){return this._queueNumber("y",t)},dx(t=0){return this._queueNumberDelta("x",t)},dy(t=0){return this._queueNumberDelta("y",t)},dmove(t,e){return this.dx(t).dy(e)},_queueNumberDelta(t,e){if(e=new fe(e),this._tryRetarget(t,e))return this;const i=new ci(this._stepper).to(e);let s=null;return this.queue((function(){s=this.element()[t](),i.from(s),i.to(s+e)}),(function(e){return this.element()[t](i.at(e)),i.done()}),(function(t){i.to(s+new fe(t))})),this._rememberMorpher(t,i),this},_queueObject(t,e){if(this._tryRetarget(t,e))return this;const i=new ci(this._stepper).to(e);return this.queue((function(){i.from(this.element()[t]())}),(function(e){return this.element()[t](i.at(e)),i.done()})),this._rememberMorpher(t,i),this},_queueNumber(t,e){return this._queueObject(t,new fe(e))},cx(t){return this._queueNumber("cx",t)},cy(t){return this._queueNumber("cy",t)},move(t,e){return this.x(t).y(e)},center(t,e){return this.cx(t).cy(e)},size(t,e){let i;return t&&e||(i=this._element.bbox()),t||(t=i.width/i.height*e),e||(e=i.height/i.width*t),this.width(t).height(e)},width(t){return this._queueNumber("width",t)},height(t){return this._queueNumber("height",t)},plot(t,e,i,s){if(4===arguments.length)return this.plot([t,e,i,s]);if(this._tryRetarget("plot",t))return this;const n=new ci(this._stepper).type(this._element.MorphArray).to(t);return this.queue((function(){n.from(this._element.array())}),(function(t){return this._element.plot(n.at(t)),n.done()})),this._rememberMorpher("plot",n),this},leading(t){return this._queueNumber("leading",t)},viewbox(t,e,i,s){return this._queueObject("viewbox",new Kt(t,e,i,s))},update(t){return"object"!=typeof t?this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]}):(null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",t.offset),this)}}),Ct(Si,{rx:Ee,ry:ke,from:Re,to:Pe}),wt(Si,"Runner");class Ri extends we{constructor(t,e=t){super(gt("svg",t),e),this.namespace()}defs(){return this.isRoot()?yt(this.node.querySelector("defs"))||this.put(new be):this.root().defs()}isRoot(){return!this.node.parentNode||!(this.node.parentNode instanceof nt.window.SVGElement)&&"#document-fragment"!==this.node.parentNode.nodeName}namespace(){return this.isRoot()?this.attr({xmlns:Q,version:"1.1"}).attr("xmlns:xlink",et,tt).attr("xmlns:svgjs",it,tt):this.root().namespace()}removeNamespace(){return this.attr({xmlns:null,version:null}).attr("xmlns:xlink",null,tt).attr("xmlns:svgjs",null,tt)}root(){return this.isRoot()?this:super.root()}}W({Container:{nested:Lt((function(){return this.put(new Ri)}))}}),wt(Ri,"Svg",!0);class Pi extends we{constructor(t,e=t){super(gt("symbol2",t),e)}}W({Container:{symbol2:Lt((function(){return this.put(new Pi)}))}}),wt(Pi,"Symbol2");var Bi={__proto__:null,plain:function(t){return!1===this._build&&this.clear(),this.node.appendChild(nt.document.createTextNode(t)),this},length:function(){return this.node.getComputedTextLength()},x:function(t,e=this.bbox()){return null==t?e.x:this.attr("x",this.attr("x")+t-e.x)},y:function(t,e=this.bbox()){return null==t?e.y:this.attr("y",this.attr("y")+t-e.y)},move:function(t,e,i=this.bbox()){return this.x(t,i).y(e,i)},cx:function(t,e=this.bbox()){return null==t?e.cx:this.attr("x",this.attr("x")+t-e.cx)},cy:function(t,e=this.bbox()){return null==t?e.cy:this.attr("y",this.attr("y")+t-e.cy)},center:function(t,e,i=this.bbox()){return this.cx(t,i).cy(e,i)},ax:function(t){return this.attr("x",t)},ay:function(t){return this.attr("y",t)},amove:function(t,e){return this.ax(t).ay(e)},build:function(t){return this._build=!!t,this}};class Hi extends xe{constructor(t,e=t){super(gt("text",t),e),this.dom.leading=new fe(1.3),this._rebuild=!0,this._build=!1}leading(t){return null==t?this.dom.leading:(this.dom.leading=new fe(t),this.rebuild())}rebuild(t){if("boolean"==typeof t&&(this._rebuild=t),this._rebuild){const t=this;let e=0;const i=this.dom.leading;this.each((function(s){const n=nt.window.getComputedStyle(this.node).getPropertyValue("font-size"),r=i*new fe(n);this.dom.newLined&&(this.attr("x",t.attr("x")),"\n"===this.text()?e+=r:(this.attr("dy",s?r+e:0),e=0))})),this.fire("rebuild")}return this}setData(t){return this.dom=t,this.dom.leading=new fe(t.leading||1.3),this}text(t){if(void 0===t){const e=this.node.childNodes;let i=0;t="";for(let s=0,n=e.length;s<n;++s)"textPath"!==e[s].nodeName?(s!==i&&3!==e[s].nodeType&&!0===yt(e[s]).dom.newLined&&(t+="\n"),t+=e[s].textContent):0===s&&(i=1);return t}if(this.clear().build(!0),"function"==typeof t)t.call(this,this);else for(let e=0,i=(t=(t+"").split("\n")).length;e<i;e++)this.newLine(t[e]);return this.build(!1).rebuild()}}Ct(Hi,Bi),W({Container:{text:Lt((function(t=""){return this.put(new Hi).text(t)})),plain:Lt((function(t=""){return this.put(new Hi).plain(t)}))}}),wt(Hi,"Text");class Ni extends xe{constructor(t,e=t){super(gt("tspan",t),e),this._build=!1}dx(t){return this.attr("dx",t)}dy(t){return this.attr("dy",t)}newLine(){this.dom.newLined=!0;const t=this.parent();if(!(t instanceof Hi))return this;const e=t.index(this),i=nt.window.getComputedStyle(this.node).getPropertyValue("font-size"),s=t.dom.leading*new fe(i);return this.dy(e?s:0).attr("x",t.x())}text(t){return null==t?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof t?(this.clear().build(!0),t.call(this,this),this.build(!1)):this.plain(t),this)}}Ct(Ni,Bi),W({Tspan:{tspan:Lt((function(t=""){const e=new Ni;return this._build||this.clear(),this.put(e).text(t)}))},Text:{newLine:function(t=""){return this.tspan(t).newLine()}}}),wt(Ni,"Tspan");class Fi extends xe{constructor(t,e=t){super(gt("circle",t),e)}radius(t){return this.attr("r",t)}rx(t){return this.attr("r",t)}ry(t){return this.rx(t)}size(t){return this.radius(new fe(t).divide(2))}}Ct(Fi,{x:Ce,y:Le,cx:Te,cy:Se,width:Oe,height:Me}),W({Container:{circle:Lt((function(t=0){return this.put(new Fi).size(t).move(0,0)}))}}),wt(Fi,"Circle");class Wi extends we{constructor(t,e=t){super(gt("clipPath",t),e)}remove(){return this.targets().forEach((function(t){t.unclip()})),super.remove()}targets(){return te('svg [clip-path*="'+this.id()+'"]')}}W({Container:{clip:Lt((function(){return this.defs().put(new Wi)}))},Element:{clipper(){return this.reference("clip-path")},clipWith(t){const e=t instanceof Wi?t:this.parent().clip().add(t);return this.attr("clip-path",'url("#'+e.id()+'")')},unclip(){return this.attr("clip-path",null)}}}),wt(Wi,"ClipPath");class $i extends _e{constructor(t,e=t){super(gt("foreignObject",t),e)}}W({Container:{foreignObject:Lt((function(t,e){return this.put(new $i).size(t,e)}))}}),wt($i,"ForeignObject");var qi={__proto__:null,dmove:function(t,e){return this.children().forEach(((i,s)=>{let n;try{n=i.bbox()}catch(t){return}const r=new Yt(i),o=r.translate(t,e).transform(r.inverse()),a=new Vt(n.x,n.y).transform(o);i.move(a.x,a.y)})),this},dx:function(t){return this.dmove(t,0)},dy:function(t){return this.dmove(0,t)},height:function(t,e=this.bbox()){return null==t?e.height:this.size(e.width,t,e)},move:function(t=0,e=0,i=this.bbox()){const s=t-i.x,n=e-i.y;return this.dmove(s,n)},size:function(t,e,i=this.bbox()){const s=G(this,t,e,i),n=s.width/i.width,r=s.height/i.height;return this.children().forEach(((t,e)=>{const s=new Vt(i).transform(new Yt(t).inverse());t.scale(n,r,s.x,s.y)})),this},width:function(t,e=this.bbox()){return null==t?e.width:this.size(t,e.height,e)},x:function(t,e=this.bbox()){return null==t?e.x:this.move(t,e.y,e)},y:function(t,e=this.bbox()){return null==t?e.y:this.move(e.x,t,e)}};class zi extends we{constructor(t,e=t){super(gt("g",t),e)}}Ct(zi,qi),W({Container:{group:Lt((function(){return this.put(new zi)}))}}),wt(zi,"G");class ji extends we{constructor(t,e=t){super(gt("a",t),e)}target(t){return this.attr("target",t)}to(t){return this.attr("href",t,et)}}Ct(ji,qi),W({Container:{link:Lt((function(t){return this.put(new ji).to(t)}))},Element:{unlink(){const t=this.linker();if(!t)return this;const e=t.parent();if(!e)return this.remove();const i=e.index(t);return e.add(this,i),t.remove(),this},linkTo(t){let e=this.linker();return e||(e=new ji,this.wrap(e)),"function"==typeof t?t.call(e,e):e.to(t),this},linker(){const t=this.parent();return t&&"a"===t.node.nodeName.toLowerCase()?t:null}}}),wt(ji,"A");class Vi extends we{constructor(t,e=t){super(gt("mask",t),e)}remove(){return this.targets().forEach((function(t){t.unmask()})),super.remove()}targets(){return te('svg [mask*="'+this.id()+'"]')}}W({Container:{mask:Lt((function(){return this.defs().put(new Vi)}))},Element:{masker(){return this.reference("mask")},maskWith(t){const e=t instanceof Vi?t:this.parent().mask().add(t);return this.attr("mask",'url("#'+e.id()+'")')},unmask(){return this.attr("mask",null)}}}),wt(Vi,"Mask");class Xi extends _e{constructor(t,e=t){super(gt("stop",t),e)}update(t){return("number"==typeof t||t instanceof fe)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new fe(t.offset)),this}}W({Gradient:{stop:function(t,e,i){return this.put(new Xi).update(t,e,i)}}}),wt(Xi,"Stop");class Yi extends _e{constructor(t,e=t){super(gt("style",t),e)}addText(t=""){return this.node.textContent+=t,this}font(t,e,i={}){return this.rule("@font-face",{fontFamily:t,src:e,...i})}rule(t,e){return this.addText(function(t,e){if(!t)return"";if(!e)return t;let i=t+"{";for(const t in e)i+=Y(t)+":"+e[t]+";";return i+="}",i}(t,e))}}W("Dom",{style(t,e){return this.put(new Yi).rule(t,e)},fontface(t,e,i){return this.put(new Yi).font(t,e,i)}}),wt(Yi,"Style");class Ui extends Hi{constructor(t,e=t){super(gt("textPath",t),e)}array(){const t=this.track();return t?t.array():null}plot(t){const e=this.track();let i=null;return e&&(i=e.plot(t)),null==t?i:this}track(){return this.reference("href")}}W({Container:{textPath:Lt((function(t,e){return t instanceof Hi||(t=this.text(t)),t.path(e)}))},Text:{path:Lt((function(t,e=!0){const i=new Ui;let s;if(t instanceof _i||(t=this.defs().path(t)),i.attr("href","#"+t,et),e)for(;s=this.node.firstChild;)i.node.appendChild(s);return this.put(i)})),textPath(){return this.findOne("textPath")}},Path:{text:Lt((function(t){return t instanceof Hi||(t=(new Hi).addTo(this.parent()).text(t)),t.path(this)})),targets(){return te("svg textPath").filter((t=>(t.attr("href")||"").includes(this.id())))}}}),Ui.prototype.MorphArray=li,wt(Ui,"TextPath");class Gi extends xe{constructor(t,e=t){super(gt("use",t),e)}use(t,e){return this.attr("href",(e||"")+"#"+t,et)}}W({Container:{use:Lt((function(t,e){return this.put(new Gi).use(t,e)}))}}),wt(Gi,"Use");const Ki=ft;Ct([Ri,Pi,We,Fe,je],$("viewbox")),Ct([ze,bi,wi,_i],$("marker")),Ct(Hi,$("Text")),Ct(_i,$("Path")),Ct(be,$("Defs")),Ct([Hi,Ni],$("Tspan")),Ct([xi,Ae,Ne,Si],$("radius")),Ct(he,$("EventTarget")),Ct(ye,$("Dom")),Ct(_e,$("Element")),Ct(xe,$("Shape")),Ct([we,Ie],$("Container")),Ct(Ne,$("Gradient")),Ct(Si,$("Runner")),Qt.extend([...new Set(F)]),gi([fe,jt,Kt,Yt,me,$e,li,Vt]),yi();class Ji{constructor(t){this.eventType=t,this.handlers=[]}fire(t){if(Object.hasOwnProperty.call(this.handlers,t)){if("function"==typeof this.handlers[t])return this.handlers[t](t,this),this;if(this.handlers[t]instanceof Array){let e=!1;for(const i of this.handlers[t])"function"==typeof i&&(e=!0,i(t,this));if(e)return this}}return this}on(t,e,i){"function"==typeof e&&("function"==typeof this.handlers[t]?this.handlers[t]=[this.handlers[t],e.bind(i)]:this.handlers[t]instanceof Array?this.handlers[t].push(e.bind(i)):this.handlers[t]=e.bind(i))}}function Qi(t,...e){for(const i of e)Object.defineProperty(t,i,{enumerable:!1,writable:!0});return t}function Zi(t,e){function i(t,e){const i=(""+t).split("e");return+(i[0]+"e"+(i[1]?+i[1]+e:e))}return i(Math.round(i(t,+e)),-e)}function ts(t,e,i=0,s=1){return n=>i+s*(n-t)/e}Ji.eventType={};const es=(t,e=0,i=1)=>Math.max(e,Math.min(i,t)),is=(t,e,i)=>t*(1-i)+e*i;class ss extends Ji{constructor({name:t,description:e,min:i,max:s,sortingorder:n}){super(ss.eventType),this.name=t,this.description=e||t,this.min=+i||0,this.max=+s||5,this.maxDominance=0,this.classes=[],this.classCount=0,this.sortingorder=n,Qi(this,"_weight","_blur")}update(){this.fire(ss.eventType.updated)}blur(t){const e="ascending"===this.sortingorder?-2:2,i=this.max-this.min,s=e*this.blurIntensity*i;return Math.min(this.max,Math.max(this.min,t+s))}set weight(t){return this._weight=Math.max(0,t),this.fire(ss.eventType.weightUpdated),this.fire(ss.eventType.updated),t}get weight(){return this._weight||0}set blurIntensity(t){return this._blur=Math.max(0,t),this.fire(ss.eventType.blurIntensityUpdated),this.fire(ss.eventType.updated),t}get blurIntensity(){return this._blur||0}export(){return{name:this.name,weight:this.weight,blurIntensity:this.blurIntensity}}}ss.eventType={updated:"updated",blurIntensityUpdated:"blurIntensityUpdated",weightUpdated:"weightUpdated"};class ns{constructor({technology:t,name:e,description:i,evaluations:s}){this.name=t||e,this.description=i||t,this.evaluations=s||{},this.bounds={},this.dominance={},this.rank={},this.sortingorder={},this.score=0,this.selected=!1}updateBounds(t){for(const e of t)this.bounds[e.name]=e.blur(this.evaluations[e.name]),this.dominance[e.name]=0;return this}updateDominance(t,e){for(const i of t){this.dominance[i.name]=0;for(const t of e)t!==this&&("ascending"==i.sortingorder&&this.bounds[i.name]>t.evaluations[i.name]&&this.dominance[i.name]++,"descending"==i.sortingorder&&this.bounds[i.name]<t.evaluations[i.name]&&this.dominance[i.name]++)}return this}updateScore(t){this.score=0;let e=0;for(const i of t.filter((t=>t.weight>0)))this.score+=i.weight*this.dominance[i.name]/i.maxDominance,e+=i.weight;return this.score/=e,this}}class rs extends Ji{constructor(t,e){super(),this.technologies=t,this.criteria=e,Qi(this,"_technologies","_criteria")}set technologies(t){this._technologies={all:[],sorted:[],map:{}};for(const e of t){const t=new ns(e);this._technologies.all.push(t),this._technologies.map[t.name]=t}}get technologies(){return this._technologies}set criteria(t){this._criteria={all:[],map:{},updated:[]};for(const e of t){const t=new ss(e);this._criteria.map[t.name]=t,this._criteria.all.push(t),t.on(ss.eventType.updated,((t,e)=>{this._criteria.updated.push(e),this.sort()}),this)}this._criteria.updated=this._criteria.all.slice()}get criteria(){return this._criteria}sort(){return this.updateBounds().updateDominance().normalizeDominance().updateScore(),this.technologies.sorted=this.technologies.all.slice().sort(((t,e)=>e.score-t.score)),this.criteria.updated=[],this.fire(rs.eventType.sorted),this}updateDominance(){return this.technologies.all.forEach((t=>t.updateDominance(this.criteria.updated,this.technologies.all))),this}updateBounds(){return this.technologies.all.forEach((t=>t.updateBounds(this.criteria.updated))),this}normalizeDominance(){for(const t of this.criteria.all){t.maxDominance=this.technologies.all.reduce(((e,i)=>Math.max(e,i.dominance[t.name])),0);const e=[...new Set(this.technologies.all.map((e=>+e.dominance[t.name])))].sort(((t,e)=>t-e));e.forEach(((e,i)=>{const s=this.technologies.all.filter((i=>i.dominance[t.name]===e));t.classes[e]={dominance:e,rank:i,centroid:s.reduce(((e,i)=>e+i.evaluations[t.name]),0)/s.length,centroidNormal:s.reduce(((e,i)=>e+i.evaluations[t.name]),0)/s.length/t.max,count:s.length}})),t.classCount=e.length,this.technologies.all.forEach((i=>i.rank[t.name]=e.indexOf(i.dominance[t.name])))}return this}updateScore(){return this.technologies.all.forEach((t=>t.updateScore(this.criteria.all))),this}}rs.eventType={sorted:"sorted"};class os{constructor(t,e){this.svg=t,this.color=e,this.fontSize=11,this.border=2,this._x=0,this._y=0,this._hidden=!1,this.group=this.svg.group(),this.group.front().mouseover((()=>this.group.front())),this.textElement=this.group.text("a").addClass("overlay").font({anchor:"middle",size:this.fontSize}),this.rect=this.group.rect(this.textElement.length()+2*this.border,this.fontSize+2*this.border).radius(3).fill(this.color).stroke(this.color).back(),this.recenter()}set hidden(t){this._hidden=t,t?this.group.hide():this.group.show()}addClass(t){return this.group.addClass(t),this}hide(){return this.hidden=!0,this}show(){return this.hidden=!1,this}mousedown(t){return this.group.mousedown((e=>{t(e)})),this}move(t,e){return this._x=t,this._y=e,this.textElement.center(t,e),this.rect.center(t,e),this.top(),this}recenter(){return this.rect.size(this.textElement.length()+2*this.border,this.fontSize+2*this.border),this.textElement.center(this._x,this._y),this.rect.center(this._x,this._y),this}text(t){return this.textElement.text(`${t}`),this.recenter(),this}top(){return this.rect.front(),this.textElement.front(),this.group.front(),this}}const as=["#332288","#117733","#44AA99","#88CCEE","#DDCC77","#CC6677","#AA4499","#882255"];class ls{constructor(t,e,i,s){this.panel=t,this.criterion=i,this.color=as[e.i%as.length],i.color=this.color,this.offset=e,this.labelsGroup=t.labelsGroup.group(),this.slidersGroup=t.svg.group(),this.weight=0,this.blurIntensity=0,this.constraints=null,this.ellipse=null,this.callback=s,this.label=this.labelsGroup.text(i.description).move(e.x,e.y).fill(this.color).mousedown((t=>{this.onMousedown(t)})),this.labelBbox=this.label.bbox(),this.LineOrigin={x:this.labelBbox.x2,y:this.labelBbox.cy},this.criterion.weight>0&&this.createHandle(0,0),i.on("updated",(()=>{this.weight===this.criterion.weight&&this.blurIntensity===this.criterion.blurIntensity||(null===this.ellipse&&this.createHandle(0,0),this.updatePosition())}))}set stageBox(t){const{x2:e,y2:i}=t,s=Math.max(0,this.label.bbox().x2-10),n=Math.max(0,this.label.bbox().y-10);this.constraints=new SVG.Box(s,n,e-s+10,i-n+10)}onMousedown(t){null===this.ellipse?this.createHandle(t.offsetX,t.offsetY):this.moveHandle(t.offsetX,t.offsetY),this.show(),this.ellipse.remember("_draggable").startDrag(t)}onDrag(t){const{x:e,y:i}=function(t,e){const{handler:i,box:s}=e.detail;e.preventDefault();let{x:n,y:r}=s;return n<t.x&&(n=t.x),r<t.y&&(r=t.y),s.x2>t.x2&&(n=t.x2-s.w),s.y2>t.y2&&(r=t.y2-s.h),"y"===t.axis&&(r=t.constant),"x"===t.axis&&(n=t.constant),{x:n,y:r}}(this.constraints,t);this.moveHandle(e,i)}updatePosition(){if(this.criterion.weight>0){this.weight=this.criterion.weight,this.blurIntensity=this.criterion.blurIntensity;const t=this.panel.inverseMapWeight(this.criterion.weight),e=this.panel.inversemapBlur(this.criterion.blurIntensity);this.moveHandle(t,e)}}moveHandle(t,e){this.ellipse.center(t,e);const i=t-Math.abs(e-this.LineOrigin.y);var s;this.line.plot([this.LineOrigin.x,this.LineOrigin.y,i,this.LineOrigin.y,t,e,i,this.LineOrigin.y]).back(),this.weightLine.plot([i,this.LineOrigin.y,t,this.LineOrigin.y,t,this.LineOrigin.y-4,t,this.LineOrigin.y+4,t,this.LineOrigin.y]),this.weight=Zi(this.panel.mapWeight(t),2),this.criterion.weight=this.weight,this.weightOverlay.move(is(this.LineOrigin.x,t+this.weightOverlay.textElement.length()/2,1),this.LineOrigin.y).text("Importance: "+this.criterion.weight).hidden=!(this.criterion.weight>0),this.blurIntensity=Math.max(0,Zi(this.panel.mapBlur(e),2)),this.criterion.blurIntensity=this.blurIntensity,this.granularityOverlay.move(t-this.granularityOverlay.textElement.length()/2-7,e).text(`Granularity: ${s=this.criterion.blurIntensity,`${Math.round(100*s)}%`} - ${this.criterion.classCount} classes`).hidden=!(this.criterion.weight>0&&this.criterion.blurIntensity>0)}show(){this.slidersGroup.show()}hide(){this.slidersGroup.hide()}createHandle(t,e){const i=this.label.bbox(),s=i.x2,n=i.y+i.h/2,r=2.5+t,o=2.5+e,a=r-Math.abs(o-n);this.line=this.slidersGroup.polyline([this.LineOrigin.x,this.LineOrigin.y,a,n,r,o,a,n]).stroke(this.color).back(),this.weightLine=this.slidersGroup.polyline([a,this.LineOrigin.y,r,this.LineOrigin.y,r,this.LineOrigin.y-2,r,this.LineOrigin.y+2]).stroke(this.color).addClass("dashed").back(),this.ellipse=this.slidersGroup.ellipse().fill(this.color).draggable().addClass("bidirectionnel").move(2.5+t,2.5+e).on("dragmove.namespace",(t=>this.onDrag(t))).on("dragend.namespace",(()=>{this.constraints.axis=null,this.criterion.weight<=0&&this.hide(),this.callback(this)})),this.weightOverlay=new os(this.slidersGroup.parent(),this.color).move(is(s,a,.2),n).hide().addClass("horizontal").mousedown((t=>hs(this,"y",t))),this.granularityOverlay=new os(this.slidersGroup.parent(),this.color).hide().addClass("vertical").mousedown((t=>hs(this,"x",t)))}}const hs=(t,e,i)=>{t.constraints.axis=e,t.constraints.constant=t.ellipse[e](),t.ellipse.remember("_draggable").startDrag(i)};window.SVG=t;class cs{constructor(t,e,i){this.dimensions={width:"100%",height:"500px"},this.restAreaWidth=100,this._initSvg(t,this.dimensions).then((()=>(this._setupCriteria(e)._setupStage(),"function"==typeof i?i():null)))}_initSvg(e,i){return window.SVG=t,function(t){function e(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var i=function(t){return t.changedTouches&&(t=t.changedTouches[0]),{x:t.clientX,y:t.clientY}},s=function(){function s(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),t.remember("_draggable",this),this.el=t,this.drag=this.drag.bind(this),this.startDrag=this.startDrag.bind(this),this.endDrag=this.endDrag.bind(this)}var n;return(n=[{key:"init",value:function(t){t?(this.el.on("mousedown.drag",this.startDrag),this.el.on("touchstart.drag",this.startDrag)):(this.el.off("mousedown.drag"),this.el.off("touchstart.drag"))}},{key:"startDrag",value:function(e){var s=!e.type.indexOf("mouse");if(!(s&&1!==(e.which||e.buttons)||this.el.dispatch("beforedrag",{event:e,handler:this}).defaultPrevented)){e.preventDefault(),e.stopPropagation(),this.init(!1),this.box=this.el.bbox(),this.lastClick=this.el.point(i(e));var n=(s?"mousemove":"touchmove")+".drag",r=(s?"mouseup":"touchcancel.drag touchend")+".drag";t.on(window,n,this.drag),t.on(window,r,this.endDrag),this.el.fire("dragstart",{event:e,handler:this,box:this.box})}}},{key:"drag",value:function(e){var s=this.box,n=this.lastClick,r=this.el.point(i(e)),o=s.x+(r.x-n.x),a=s.y+(r.y-n.y),l=new t.Box(o,a,s.w,s.h);if(!this.el.dispatch("dragmove",{event:e,handler:this,box:l}).defaultPrevented)return this.move(o,a),l}},{key:"move",value:function(e,i){"svg"===this.el.type?t.G.prototype.move.call(this.el,e,i):this.el.move(e,i)}},{key:"endDrag",value:function(e){var i=this.drag(e);this.el.fire("dragend",{event:e,handler:this,box:i}),t.off(window,"mousemove.drag"),t.off(window,"touchmove.drag"),t.off(window,"mouseup.drag"),t.off(window,"touchend.drag"),this.init(!0)}}])&&e(s.prototype,n),s}();t.extend(t.Element,{draggable:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return(this.remember("_draggable")||new s(this)).init(t),this}})}(window.SVG),Promise.resolve().then((()=>{this.svg=Ki().addTo(e).size(i.width,i.height);const t=this.svg.rect("100%","100%");return this.dimensions=t.bbox(),t.remove(),window.addEventListener("resize",(()=>{const t=this.svg.rect("100%","100%");this.dimensions=t.bbox(),t.remove(),this._cleanUpStage()._setupStage()})),this}))}_setupStage(){const{x:t,y:e,w:i,h:s}=this.labelsGroup.bbox(),{x2:n,y2:r}=this.dimensions;this.labelBox=new SVG.Box(t-5,e,i+10,s),this.stageBox=new SVG.Box(this.labelBox.x2,this.labelBox.y2,n-this.labelBox.x2,r-this.labelBox.y2),this.areas={},this.areas.labels=this.labelsGroup.rect(this.labelBox.w,"100%").move(this.labelBox.x,this.labelBox.y).addClass("labelsGroup").back(),this.areas.stage=this.svg.rect(this.stageBox.w,this.stageBox.h).move(this.stageBox.x,this.stageBox.y).fill("#eee").back(),this.areas.axis=this.svg.group();const o=this.areas.axis.text("Importance").fill("#bbb").addClass("dropshadow").font({anchor:"left",size:20});o.move(this.stageBox.x2-o.length()-2,this.stageBox.y),this.areas.axis.textPath("Granularity").fill("#bbb").addClass("dropshadow").font({anchor:"left",size:20}).plot(`M ${this.stageBox.x-10} ${this.stageBox.y2-2} L ${this.stageBox.x-10} ${this.stageBox.y+10}`);const a=this.areas.axis.text("<- Drag criteria from the left to start ordering technologies").fill("#bbb").font({anchor:"left",size:20});a.move(this.stageBox.x+this.stageBox.w/2-a.length()/2,this.labelBox.h/2),this.mapWeight=ts(this.stageBox.x,this.stageBox.w,0,10),this.mapBlur=function(t,e,i=0,s=1){return n=>i+s*es((n-t)/e)}(this.stageBox.y,this.stageBox.h,0,.2),this.inverseMapWeight=ts(0,10,this.stageBox.x,this.stageBox.w),this.inversemapBlur=ts(0,.2,this.stageBox.y,this.stageBox.h);for(const t of this.labels)t.stageBox=this.stageBox,t.updatePosition();return this}_cleanUpStage(){return this.areas.labels.remove(),this.areas.stage.remove(),this.areas.axis.remove(),this}_setupCriteria(t){this.labelsGroup=this.svg.group(),this.labels=[];let e=0;for(const i of t)this.labels.push(new ls(this,{i:e,x:5,y:15*++e},i,(t=>{})));return this}}window.SVG=t;const ds={dominance:"dominance",rank:"rank",centroid:"centroid"};class us{constructor(t,e){this.dimensions={width:"100%",height:"300px"},this.mode=ds.dominance,this._initSvg(t,this.dimensions)._setupStage()}update(t,e){this._cachedTechnologies=t,this._cachedCriteria=e,this._cleanUpStage()._setupStage(e),t.forEach(((i,s)=>this._drawTechnology(i,e,s,t.length)))}_initSvg(e,i){return window.SVG=t,this.svg=Ki().addTo(e).size(i.width,i.height),this.paddingTop=15,this._updateSize(),window.addEventListener("resize",(()=>{this._updateSize(),this._cleanUpStage()._setupStage()})),this}_updateSize(){const t=this.svg.rect("100%","100%");this.dimensions=t.bbox(),this.dimensions.height-=this.paddingTop,t.remove()}_getAxisPosition(t,e){return this.dimensions.width/(e-1)*t}_setupStage(t){return this._drawStage(t),this}_drawStage(t){this.stage=this.svg.group(),this.stage.attr({id:"stage"}),this.stage.attr({"stroke-width":1}),this.stage.translate(0,this.paddingTop),this._setupCriteria(t),this.technologyLabels=this.stage.group(),this.modeText=this.stage.text(this.mode),this.modeText.attr({"font-size":12,"font-family":"sans-serif",fill:"black","text-anchor":"start"}),this.modeText.move(10,-this.paddingTop),this.modeText.on("click",(()=>{const t=Object.values(ds),e=t.indexOf(this.mode);this.mode=t[(e+1)%t.length],this.modeText.text(this.mode),this.update(this._cachedTechnologies,this._cachedCriteria)}))}_setupCriteria(t){return this.criteria=t??this.criteria??[],this.axisLabels=this.stage.group(),this.axisLabels.attr({id:"axisLabels"}),this.criteria.forEach(((t,e,i)=>{this._drawAxis(t,e,i.length),this._drawLabel(t,e,i.length)})),this}_drawAxis(t,e,i){const s=this.axisLabels.line(0,0,0,this.dimensions.height);s.attr({"stroke-width":1,stroke:t.color}),s.move(this._getAxisPosition(e,i),0)}_drawLabel(t,e,i){const s=this.axisLabels.text(t.name);s.attr({"font-size":12,"font-family":"sans-serif",fill:t.color,"text-anchor":"start"}),s.move(this._getAxisPosition(e,i)+5,-8),e===i-1&&s.move(this._getAxisPosition(e,i)+5,5),s.rotate(90,this._getAxisPosition(e,i)+5,0)}_cleanUpStage(){return this.stage.remove(),this.axisLabels.remove(),this}_drawTechnology(t,e,i,s){const n=e.filter((t=>t._weight>0)),r=n.map(((e,s)=>[this._getAxisPosition(s,n.length),this._getTechnologyPosition(t,e,i,n.length)])),o=this.stage.polyline(r);this._colorTechnology(o,t,i,s),o.on("click",(()=>{this._drawTechnologyLabels(t,e),t.selected=!t.selected,e[0].update(),this._colorTechnology(o,t,i)}))}_colorTechnology(t,e,i,s){t.attr({fill:"none",stroke:e.selected?"rgb(0,255,0)":ps(i,s),"stroke-width":e.selected?5:2})}_getTechnologyPosition(t,e,i,s,n="rank"){const r=2*((a=(o=i)||o+1,function(){var t=a+=1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296})()-.5)*e.blurIntensity/8;var o,a;const l={rank:t.rank[e.name]/(e.classCount-1),dominance:t.dominance[e.name]/(e.maxDominance-1),centroid:e.classes[t.dominance[e.name]].centroidNormal};return this.dimensions.height*es(1-l[this.mode]+r,0,1)}_drawTechnologyLabels(t,e){this.technologyLabels.clear();const i=e.filter((t=>t._weight>0));i.forEach(((e,s)=>{const n=this.technologyLabels.text(`${e.name}: ${t.dominance[e.name]}`);n.attr({"font-size":12,"font-family":"sans-serif"}),n.move(this._getAxisPosition(s,i.length)+5,this._getTechnologyPosition(t,e,s,i.length)+5)}))}}function ps(t,e){return`rgba(${Math.floor(255*t/e)}, 0, ${Math.floor(255*(e-t)/e)}, 0.5)`}let ms={},fs={attr:function(t,e,i,s){if(!1===e||null==e||!e&&("class"===t||"style"===t))return"";if(!0===e)return" "+(s?t:t+'="'+t+'"');var n=typeof e;return"object"!==n&&"function"!==n||"function"!=typeof e.toJSON||(e=e.toJSON()),"string"==typeof e||(e=JSON.stringify(e),i||-1===e.indexOf('"'))?(i&&(e=fs.escape(e))," "+t+'="'+e+'"'):" "+t+"='"+e.replace(/'/g,"&#39;")+"'"},attrs:function(t,e){var i="";for(var s in t)if(gs.call(t,s)){var n=t[s];if("class"===s){n=fs.classes(n),i=fs.attr(s,n,!1,e)+i;continue}"style"===s&&(n=fs.style(n)),i+=pug_attr(s,n,!1,e)}return i},classes:function(t,e){return Array.isArray(t)?fs.classes_array(t,e):t&&"object"==typeof t?fs.classes_object(t):t||""},classes_array:function(t,e){for(var i,s="",n="",r=Array.isArray(e),o=0;o<t.length;o++)(i=pug_classes(t[o]))&&(r&&e[o]&&(i=pug_escape(i)),s=s+n+i,n=" ");return s},classes_object:function(t){var e="",i="";for(var s in t)s&&t[s]&&gs.call(t,s)&&(e=e+i+s,i=" ");return e},escape:function(t){var e=""+t,i=ys.exec(e);if(!i)return t;var s,n,r,o="";for(s=i.index,n=0;s<e.length;s++){switch(e.charCodeAt(s)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}n!==s&&(o+=e.substring(n,s)),n=s+1,o+=r}return n!==s?o+e.substring(n,s):o}};var gs=Object.prototype.hasOwnProperty,ys=/["&<>]/;fs.merge=function(t,e){if(1===arguments.length){for(var i=t[0],s=1;s<t.length;s++)i=fs.merge(i,t[s]);return i}for(var n in e)if("class"===n){var r=t[n]||[];t[n]=(Array.isArray(r)?r:[r]).concat(e[n]||[])}else if("style"===n){r=(r=pug_style(t[n]))&&";"!==r[r.length-1]?r+";":r;var o=pug_style(e[n]);o=o&&";"!==o[o.length-1]?o+";":o,t[n]=r+o}else t[n]=e[n];return t},fs.rethrow=function(t,e,i,s){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&e||s))throw t.message+=" on line "+i,t;var n,r,o,a;try{s=s||require("fs").readFileSync(e,{encoding:"utf8"}),n=3,r=s.split("\n"),o=Math.max(i-n,0),a=Math.min(r.length,i+n)}catch(s){return t.message+=" - could not read from "+e+" ("+s.message+")",void fs.rethrow(t,null,i)}n=r.slice(o,a).map((function(t,e){var s=e+o+1;return(s==i?"  > ":"    ")+s+"| "+t})).join("\n"),t.path=e;try{t.message=(e||"Pug")+":"+i+"\n"+n+"\n\n"+t.message}catch(t){}throw t},fs.style=function(t){if(!t)return"";if("object"==typeof t){var e="";for(var i in t)gs.call(t,i)&&(e=e+i+":"+t[i]+";");return e}return t+""},ms.table=function(t){var e,i="",s=t||{};return function(t,s,n,r,o){function a(t){return n.parseFloat(t).toFixed(2)}const l=["star","star_half","star_border"];function h(e){e=s.min(1,s.max(0,e))||0;const i=s.floor(5*e),n=s.floor(10*e)%2;return[i,n,5-i-n].map(((e,i)=>t(e).fill(l[i]))).flat()}const c=r.filter((t=>t.weight>0)).sort(((t,e)=>t.weight-e.weight));i+='<table class="responsive-table striped compactTable"><thead><tr class="hide-on-med-and-down"><th>Technology</th><th><div class="flex"><span class="orange-text">score</span></div></th>',function(){var t=c;if("number"==typeof t.length)for(var n=0,r=t.length;n<r;n++){var o=t[n];i+='<th><div class="flex">';let r=`color:${o.color}`;i=i+"<span"+fs.attr("style",fs.style(r),!0,!1)+">"+fs.escape(null==(e=o.name)?"":e)+'</span></div><div class="hide-on-med-and-down flex small"><span>importance</span><span>granularity</span></div><div class="hide-on-med-and-down flex small"><span>'+fs.escape(null==(e=a(o.weight))?"":e)+"</span><span>"+fs.escape(null==(e=s.floor(100*o.blurIntensity))?"":e)+"% - "+fs.escape(null==(e=o.classCount)?"":e)+" classes</span></div></th>"}else for(var n in r=0,t){r++,o=t[n],i+='<th><div class="flex">';let l=`color:${o.color}`;i=i+"<span"+fs.attr("style",fs.style(l),!0,!1)+">"+fs.escape(null==(e=o.name)?"":e)+'</span></div><div class="hide-on-med-and-down flex small"><span>importance</span><span>granularity</span></div><div class="hide-on-med-and-down flex small"><span>'+fs.escape(null==(e=a(o.weight))?"":e)+"</span><span>"+fs.escape(null==(e=s.floor(100*o.blurIntensity))?"":e)+"% - "+fs.escape(null==(e=o.classCount)?"":e)+" classes</span></div></th>"}}.call(this),i+='</tr><tr class="hide-on-large-only"><th>Technology</th><th class="orange-text">score</th>',function(){var t=c;if("number"==typeof t.length){for(var s=0,n=t.length;s<n;s++)if((r=t[s]).weight>0){let t=`color:${r.color}`;i=i+"<th"+fs.attr("style",fs.style(t),!0,!1)+">"+fs.escape(null==(e=r.name)?"":e)+"</th>"}}else for(var s in n=0,t){var r;if(n++,(r=t[s]).weight>0){let t=`color:${r.color}`;i=i+"<th"+fs.attr("style",fs.style(t),!0,!1)+">"+fs.escape(null==(e=r.name)?"":e)+"</th>"}}}.call(this),i+="</tr></thead><tbody>",function(){var t=o;if("number"==typeof t.length)for(var s=0,n=t.length;s<n;s++){const n="background-color:"+((r=t[s]).selected?"lightgreen":"white");i=i+'<tr class="technology"'+fs.attr("data-technology",r.name,!0,!1)+fs.attr("style",fs.style(n),!0,!1)+"><td>"+fs.escape(null==(e=r.description)?"":e)+"</td>";const o=c.reduce(((t,e)=>t+e.weight),0),l=c.map((t=>({name:t.name,weight:a(t.weight),normalizedDominance:a(r.dominance[t.name]/t.maxDominance),partialScore:a(t.weight*r.dominance[t.name]/t.maxDominance),normalizedPartialScore:a(t.weight*r.dominance[t.name]/t.maxDominance/o)})));let d=`score: ${a(r.score)}\n${l.map((t=>`+${t.weight}x${t.normalizedDominance} = ${t.partialScore} | +${t.normalizedPartialScore} ${t.name}`)).join("\n")}`;i=i+'<td class="orange-text"'+fs.attr("title",d,!0,!1)+">",function(){var t=h(r.score);if("number"==typeof t.length)for(var s=0,n=t.length;s<n;s++){var o=t[s];i=i+'<i class="material-icons">'+fs.escape(null==(e=o)?"":e)+"</i>"}else for(var s in n=0,t)n++,o=t[s],i=i+'<i class="material-icons">'+fs.escape(null==(e=o)?"":e)+"</i>"}.call(this),i+="</td>",function(){var t=c;if("number"==typeof t.length){for(var s=0,n=t.length;s<n;s++)if((o=t[s]).weight>0){let t=`color:${o.color}`,s=`${o.name}: ${r.evaluations[o.name]}\ndominance: ${r.dominance[o.name]}\nrank: ${r.rank[o.name]}`;i=i+"<td"+(fs.attr("style",fs.style(t),!0,!1)+fs.attr("title",s,!0,!1))+"><span>",function(){var t=h(r.rank[o.name]/(o.classCount-1));if("number"==typeof t.length)for(var s=0,n=t.length;s<n;s++){var a=t[s];i=i+'<i class="material-icons">'+fs.escape(null==(e=a)?"":e)+"</i>"}else for(var s in n=0,t)n++,a=t[s],i=i+'<i class="material-icons">'+fs.escape(null==(e=a)?"":e)+"</i>"}.call(this),i+="</span></td>"}}else for(var s in n=0,t){var o;if(n++,(o=t[s]).weight>0){let t=`color:${o.color}`,s=`${o.name}: ${r.evaluations[o.name]}\ndominance: ${r.dominance[o.name]}\nrank: ${r.rank[o.name]}`;i=i+"<td"+(fs.attr("style",fs.style(t),!0,!1)+fs.attr("title",s,!0,!1))+"><span>",function(){var t=h(r.rank[o.name]/(o.classCount-1));if("number"==typeof t.length)for(var s=0,n=t.length;s<n;s++){var a=t[s];i=i+'<i class="material-icons">'+fs.escape(null==(e=a)?"":e)+"</i>"}else for(var s in n=0,t)n++,a=t[s],i=i+'<i class="material-icons">'+fs.escape(null==(e=a)?"":e)+"</i>"}.call(this),i+="</span></td>"}}}.call(this),i+="</tr>"}else for(var s in n=0,t){var r;n++;const o="background-color:"+((r=t[s]).selected?"lightgreen":"white");i=i+'<tr class="technology"'+fs.attr("data-technology",r.name,!0,!1)+fs.attr("style",fs.style(o),!0,!1)+"><td>"+fs.escape(null==(e=r.description)?"":e)+"</td>";const l=c.reduce(((t,e)=>t+e.weight),0),d=c.map((t=>({name:t.name,weight:a(t.weight),normalizedDominance:a(r.dominance[t.name]/t.maxDominance),partialScore:a(t.weight*r.dominance[t.name]/t.maxDominance),normalizedPartialScore:a(t.weight*r.dominance[t.name]/t.maxDominance/l)})));let u=`score: ${a(r.score)}\n${d.map((t=>`+${t.weight}x${t.normalizedDominance} = ${t.partialScore} | +${t.normalizedPartialScore} ${t.name}`)).join("\n")}`;i=i+'<td class="orange-text"'+fs.attr("title",u,!0,!1)+">",function(){var t=h(r.score);if("number"==typeof t.length)for(var s=0,n=t.length;s<n;s++){var o=t[s];i=i+'<i class="material-icons">'+fs.escape(null==(e=o)?"":e)+"</i>"}else for(var s in n=0,t)n++,o=t[s],i=i+'<i class="material-icons">'+fs.escape(null==(e=o)?"":e)+"</i>"}.call(this),i+="</td>",function(){var t=c;if("number"==typeof t.length){for(var s=0,n=t.length;s<n;s++)if((o=t[s]).weight>0){let t=`color:${o.color}`,s=`${o.name}: ${r.evaluations[o.name]}\ndominance: ${r.dominance[o.name]}\nrank: ${r.rank[o.name]}`;i=i+"<td"+(fs.attr("style",fs.style(t),!0,!1)+fs.attr("title",s,!0,!1))+"><span>",function(){var t=h(r.rank[o.name]/(o.classCount-1));if("number"==typeof t.length)for(var s=0,n=t.length;s<n;s++){var a=t[s];i=i+'<i class="material-icons">'+fs.escape(null==(e=a)?"":e)+"</i>"}else for(var s in n=0,t)n++,a=t[s],i=i+'<i class="material-icons">'+fs.escape(null==(e=a)?"":e)+"</i>"}.call(this),i+="</span></td>"}}else for(var s in n=0,t){var o;if(n++,(o=t[s]).weight>0){let t=`color:${o.color}`,s=`${o.name}: ${r.evaluations[o.name]}\ndominance: ${r.dominance[o.name]}\nrank: ${r.rank[o.name]}`;i=i+"<td"+(fs.attr("style",fs.style(t),!0,!1)+fs.attr("title",s,!0,!1))+"><span>",function(){var t=h(r.rank[o.name]/(o.classCount-1));if("number"==typeof t.length)for(var s=0,n=t.length;s<n;s++){var a=t[s];i=i+'<i class="material-icons">'+fs.escape(null==(e=a)?"":e)+"</i>"}else for(var s in n=0,t)n++,a=t[s],i=i+'<i class="material-icons">'+fs.escape(null==(e=a)?"":e)+"</i>"}.call(this),i+="</span></td>"}}}.call(this),i+="</tr>"}}.call(this),i+="</tbody></table>"}.call(this,"Array"in s?s.Array:"undefined"!=typeof Array?Array:void 0,"Math"in s?s.Math:"undefined"!=typeof Math?Math:void 0,"Number"in s?s.Number:"undefined"!=typeof Number?Number:void 0,"criteria"in s?s.criteria:"undefined"!=typeof criteria?criteria:void 0,"technologies"in s?s.technologies:"undefined"!=typeof technologies?technologies:void 0),i},ms.twoDimensionControlPanel=function(t){var e,i="",s=t||{};return function(t){i+="<svg>",function(){var s=t;if("number"==typeof s.length)for(var n=0,r=s.length;n<r;n++){var o=s[n];i=i+'<g class="draggable"'+fs.attr("id",o.name,!0,!1)+'><ellipse cx="15"'+fs.attr("cy",15*n+10,!0,!1)+'></ellipse><text x="20"'+fs.attr("y",15*n+10,!0,!1)+"><tspan>"+fs.escape(null==(e=o.description)?"":e)+"</tspan></text></g>"}else for(var n in r=0,s)r++,o=s[n],i=i+'<g class="draggable"'+fs.attr("id",o.name,!0,!1)+'><ellipse cx="15"'+fs.attr("cy",15*n+10,!0,!1)+'></ellipse><text x="20"'+fs.attr("y",15*n+10,!0,!1)+"><tspan>"+fs.escape(null==(e=o.description)?"":e)+"</tspan></text></g>"}.call(this),i+="</svg>"}.call(this,"criteria"in s?s.criteria:"undefined"!=typeof criteria?criteria:void 0),i},ms.twoSliderControlPanel=function(t){var e,i="",s=t||{};return function(t){i+="<form>",function(){var s=t;if("number"==typeof s.length)for(var n=0,r=s.length;n<r;n++){var o=s[n];i=i+'<div class="row"><label class="col l2 m12 s12">'+fs.escape(null==(e=o.description)?"":e)+'</label><label class="col l5 m6 s12">weight<div class="range-field"><input type="range"'+fs.attr("data-criterion",o.name,!0,!1)+' data-parameter="weight"'+fs.attr("value",o.weight,!0,!1)+' min="0" max="100" step="1"/></div></label><label class="col l5 m6 s12">Granularity<div class="range-field"><input type="range"'+fs.attr("data-criterion",o.name,!0,!1)+' data-parameter="blurIntensity"'+fs.attr("value",o.blurIntensity,!0,!1)+' min="0" max="1" step="0.01"/></div></label></div>'}else for(var n in r=0,s)r++,o=s[n],i=i+'<div class="row"><label class="col l2 m12 s12">'+fs.escape(null==(e=o.description)?"":e)+'</label><label class="col l5 m6 s12">weight<div class="range-field"><input type="range"'+fs.attr("data-criterion",o.name,!0,!1)+' data-parameter="weight"'+fs.attr("value",o.weight,!0,!1)+' min="0" max="100" step="1"/></div></label><label class="col l5 m6 s12">Granularity<div class="range-field"><input type="range"'+fs.attr("data-criterion",o.name,!0,!1)+' data-parameter="blurIntensity"'+fs.attr("value",o.blurIntensity,!0,!1)+' min="0" max="1" step="0.01"/></div></label></div>'}.call(this),i+="</form>"}.call(this,"criteria"in s?s.criteria:"undefined"!=typeof criteria?criteria:void 0),i};const _s=new Intl.DateTimeFormat("en",{year:"2-digit",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),vs={quotes:!0,quoteChar:'"',escapeChar:'"',delimiter:",",header:!0,newline:"\r\n",skipEmptyLines:!0,columns:null};class ws{constructor(t){this.anchor=t.querySelector("a"),t.addEventListener("click",(t=>{console.log("click"),this.saveData()}))}updateCSV(t){this.anchor.href&&window.URL.revokeObjectURL(this.anchor.href),this.csv=e.unparse({fields:["name","description","score"],data:t.sorted},vs);const i=new Blob([this.csv],{type:"text/csv"}),s=window.URL.createObjectURL(i);this.anchor.href=s}saveData(){this.anchor.download=`data_${(()=>{const t=_s.formatToParts(new Date).reduce(((t,e)=>(t[e.type]=e.value,t)),{});return`${t.year}${t.month}${t.day}_${t.hour}${t.minute}${t.second}`})()}.csv`}}class bs{constructor(t,e){e===ss.eventType.weightUpdated&&(this.newValue=t.weight),e===ss.eventType.blurIntensityUpdated&&(this.newValue=t.blurIntensity),this.time=new Date,this.criterion=t,this.type=e}}class xs{constructor(){this.data=[]}updateData(t,e){this.data.push(new bs(t,e))}}window.M={Tabs:M,Sidenav:S,FloatingActionButton:c},window.SVG=t;const Es=new rs([],[]);let ks,Cs=null,Ls=null;function Ts(t){const e=document.getElementById(t);e&&(e.innerHTML="")}function Ss(){["controlPanel","ParallelCoordinatesPlotPanel","logs"].forEach(Ts)}async function Os(){Ss();const[t,e]=await Promise.all([Rs(),Ps()]);Bs(t,e)}document.addEventListener("DOMContentLoaded",(function(){document.getElementById("csv").addEventListener("change",(function(t){var i;i=t.target.files[0],e.parse(i,{download:!0,header:!0,worker:!0,skipEmptyLines:!0,dynamicTyping:!0,complete:function(t){Bs(t.meta.fields.map(Ms).filter(Is).map((([e,i,s])=>({name:i,description:i,min:t.data.reduce(Ds(e),t.data[0][e]),max:t.data.reduce(As(e),t.data[0][e]),sortingorder:s}))),t.data.map(((t,e)=>{if(void 0!==t)return{technology:e,name:t.name||e,description:t.description||t.name||`${Math.ceil(100*t.TS)}_${Math.ceil(100*t.WFS)}`,evaluations:Object.entries(t).filter((([t,e])=>"name"!=t&&"description"!=t&&"technology"!=t)).map((([t,e])=>[Ms(t)[1],e])).reduce(((t,[e,i])=>({...t,[e]:i})),{})}})))}})})),document.getElementById("loadDB").addEventListener("click",Os),null===localStorage.getItem("criteria")?Os():Bs(JSON.parse(localStorage.getItem("criteria")),JSON.parse(localStorage.getItem("technologies")))}));const Ms=t=>{const e=t.match(/\((ASC|DESC)\)$/),i=t.replace(/\((ASC|DESC)\)$/,"").trim(),s={ASC:"ascending",DESC:"descending"};return e?[t,i,s[e[1]]]:[t,i,s.ASC]},Ds=t=>(e,i)=>i[t]<e?i[t]:e,As=t=>(e,i)=>i[t]>e?i[t]:e,Is=([,t])=>"name"!=t&&"description"!=t&&"technology"!=t;async function Rs(){const t=await fetch("/api/criteria");return(await t.json()).criteria}async function Ps(){const t=await fetch("/api/technologies");return(await t.json()).technologies}function Bs(t,e){Ss(),Es.criteria=t,Es.technologies=e,localStorage.setItem("criteria",JSON.stringify(Es.criteria.all)),localStorage.setItem("technologies",JSON.stringify(Es.technologies.all)),Ls=new xs,Cs=new cs(document.getElementById("controlPanel"),Es.criteria.all,(()=>{!function(){if(null===localStorage.getItem("sorterCriteria"))Es.criteria.all[0].weight=1;else{let e=JSON.parse(localStorage.getItem("sorterCriteria"));for(var t=0;t<e.length;t++){let i=e[t];Es.criteria.map[i.name]&&(Es.criteria.map[i.name].weight=i.weight,Es.criteria.map[i.name].blurIntensity=i.blurIntensity)}Hs()}}(),function(){const t=new ws(document.querySelector("#saveButton"));for(var e=0;e<Es.criteria.all.length;e++){let t=Es.criteria.all[e];t.on(ss.eventType.blurIntensityUpdated,((t,e)=>Ls.updateData(e,t))),t.on(ss.eventType.weightUpdated,((t,e)=>Ls.updateData(e,t)))}let i=null;Es.on(rs.eventType.sorted,(e=>{clearTimeout(i),i=setTimeout((()=>{Hs()}),100),Hs(10),function(){const t=Es.criteria.all.map((t=>t.export())),e=(JSON.parse(localStorage.getItem("sorterCriteria"))||[]).filter((e=>!(t.find((t=>t.name===e.name))?.weight<0))).map((e=>{const i=t.find((t=>t.name===e.name));return i?.weight>0&&(e.weight=i.weight,e.blurIntensity=i.blurIntensity),e})),i=t.filter((t=>!e.find((e=>e.name===t.name)))),s=[...e,...i];localStorage.setItem("sorterCriteria",JSON.stringify(s))}(),t.updateCSV(Es.technologies)}))}()})),ks=new us(document.getElementById("ParallelCoordinatesPlotPanel"))}function Hs(t){Ns(t),Fs()}function Ns(t){t=t||Es.technologies.sorted.length;try{const e=document.getElementById("result");e.innerHTML="";const i=ms.table({technologies:Es.technologies.sorted.slice(0,t),criteria:Es.criteria.all});e.insertAdjacentHTML("beforeend",i),function(){document.querySelector("#result tbody").addEventListener("click",(function(t){if(t.target.closest("tr.technology")){const e=t.target.closest("tr.technology");if(console.log(e.dataset.technology),e.dataset.technology){const t=Es.technologies.map[e.dataset.technology];t.selected=!t.selected,Ns(),Fs()}}}));let t=null;document.querySelector("#result tbody").addEventListener("mouseover",(function(e){if(e.target.closest("tr.technology")&&1===e.buttons){const i=e.target.closest("tr.technology");if(console.log(i.dataset.technology),i.dataset.technology){const e=Es.technologies.map[i.dataset.technology];e.selected=!e.selected,i.style.backgroundColor=e.selected?"yellow":"white",Fs(),clearTimeout(t),t=setTimeout((()=>{Hs()}),100)}}}))}()}catch(t){console.log(t)}}function Fs(t){if(t=t||Es.technologies.sorted.length,Es.criteria.all.filter((t=>t.weight>0)).length<2)return;const e=Es.criteria.all.filter((t=>t.weight>0)).sort(((t,e)=>t.weight-e.weight));ks.update(Es.technologies.sorted.slice(0,t),e)}})()})();